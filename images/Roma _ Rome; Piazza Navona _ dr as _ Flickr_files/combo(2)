YUI.add("list-proxy",function(t){function e(t,e,i){this.registry=t,this.attrName=i,this.attrDef=this.registry.attributes[i],this.id=e,this.isListProxy=!0}function i(t,e){t["min"===e?y:g]=!0}function n(t,e){return t+JSON.stringify(e)}function r(t){return f[t]}function a(t,e){f[t]=e}function s(t){delete f[t]}function o(e,i,o,u){if(!u||!t.Lang.isFunction(u.run))return t.Promise.reject("[list-proxy] `_cacheFetches` fetchFcn.run is not a function");var h=n(e,i),c=r(h);return c||(a(h,u.run.call(u,i,o).then(function(t){return s(h),t},function(t){throw s(h),t})),r(h))}function u(e,i,n){var r,a,s,u,h,c,d=t.merge({},e),f=i.getValue(d.id,n),g=f.getList(),y=-1,m=f.hasMinBoundary&&f.hasMinBoundary(),x=f.hasMaxBoundary&&f.hasMaxBoundary(),p=i.attributes[n].contextFetch.listFetcher,l=d.numNext,v=d.numPrev;return d.refetchAt=void 0!==d.refetchAt?d.refetchAt:5,g.some(function(t,e){return t.getValue("id")===d.listItemId&&(y=e+1),!t.registry.exists(t.id)})||1===y&&!m||y===g.length&&!x||-1===y?(d.numPrev=d.numPrev+d.refetchAt,d.numNext=d.numNext+d.refetchAt,o("context",d,i.appContext,p)):(r=y+d.numNext,a=g.length,s=g[0].getValue("id"),u=g[a-1].getValue("id"),h=g.slice(0,1===y?0:y-1).reverse().slice(0,d.numPrev),c=g.slice(y,r),r>a&&y<d.numPrev&&!m&&!x?o("context",d,i.appContext,p):r>a&&!x?(d.photoId=u,d.numPrev=0,d.numNext=r-a,o("context",d,i.appContext,p).then(function(t){return{previous:h,next:c.concat(t.next).slice(0,l)}})):y<=d.numPrev&&!m?(d.photoId=s,d.numNext=0,d.numPrev=d.numPrev-y+1,o("context",d,i.appContext,p).then(function(t){return{previous:h.concat(t.previous).slice(0,v),next:c}})):new t.Promise(function(t){t({previous:h,next:c}),y>=g.length-d.numNext&&d.refetchAt>0&&!x&&(d.photoId=u,d.numPrev=0,d.numNext=d.refetchAt,o("context",d,i.appContext,p)),y-1<=d.numPrev&&d.refetchAt>0&&!m&&(d.photoId=s,d.numPrev=d.refetchAt,d.numNext=0,o("context",d,i.appContext,p))}))}function h(t,e,i){var n,r;for(n=e;n<i;n++)if(void 0===(r=t[n])||!r.registry.exists(r.id))return!1;return!0}function c(e,i,n){var r,a,s=t.merge({},e),u=i.getValue(s.id,n),c=u.getList();return r=s.perPage*(s.page-1),a=s.perPage*(s.page-1)+s.perPage,!(u.hasMinBoundary&&u.hasMinBoundary()&&c.length>=a||u.hasMaxBoundary&&u.hasMaxBoundary()&&u.hasMinBoundary&&u.hasMinBoundary())||!h(c,r,a)&&i.attributes[n].pageFetch?o("page",s,i.appContext,i.attributes[n].pageFetch.listFetcher):t.Promise.resolve(c.slice(r,a))}function d(e,i,n){var r,a,s=i.getValue(e.id,n).getList();return r=e.offset,a=e.offset+e.limit,s.length>=a&&h(s,r,a)?t.Promise.resolve(s.slice(r,a)):o("range",e,i.appContext,i.attributes[n].rangeFetch.listFetcher)}var f,g="hasMaxBoundary",y="hasMinBoundary";e.prototype={getPage:function(e){var i=t.merge({page:1,perPage:20},e,this.attrDef.pageFetch);return i.id=this.id,t.ListProxyStatic.fetchListByPage(i,this.registry,this.attrName)},getRange:function(e){var i=t.merge({offset:0,limit:10},e,this.attrDef.rangeFetch);return i.id=this.id,t.ListProxyStatic.fetchListByRange(i,this.registry,this.attrName)},getContext:function(e){var i=t.merge({numPrev:10,numNext:10},e,this.attrDef.contextFetch);return i.id=this.id,i.listItemId=e[i.listItemIdField],t.ListProxyStatic.fetchListByContext(i,this.registry,this.attrName)},getList:function(){return this.registry._data[this.id][this.attrName]||[]},appendToListMulti:function(e){var i=t.clone(this.registry._data[this.id][this.attrName])||[];e.forEach(function(t){i.push(t)}),i.hasMinBoundary=this.hasMinBoundary(),i.hasMaxBoundary=this.hasMaxBoundary(),this.registry.setValue(this.id,this.attrName,i,!1)},appendToList:function(e){var i=t.clone(this.registry._data[this.id][this.attrName])||[];i.push(e),i.hasMinBoundary=this.hasMinBoundary(),i.hasMaxBoundary=this.hasMaxBoundary(),this.registry.setValue(this.id,this.attrName,i,!1)},prependToList:function(t){(this.registry._data[this.id][this.attrName]||[]).unshift(t)},getFromListByID:function(e,i){var n=this.registry._data[this.id][this.attrName]||[],r=!1;return t.Array.some(n,function(t){t[i||"id"]===e&&(r=t)}),r||!1},removeFromList:function(e,i){var n,r=this.registry._data[this.id][this.attrName]||[],a=0;0!==r.length&&(t.Array.some(r,function(t){return a++,t[i||"id"]===e}),a===r.length&&r[a-1][i||"id"]!==e||a>0&&(n=r.slice(0,a-1).concat(r.slice(a)),n.hasMinBoundary=this.hasMinBoundary(),n.hasMaxBoundary=this.hasMaxBoundary(),this.registry.setValue(this.id,this.attrName,n)))},setMinBoundary:function(){this.getList()[y]=!0},hasMinBoundary:function(){return!!this.getList()[y]},setMaxBoundary:function(){this.getList()[g]=!0},hasMaxBoundary:function(){return!!this.getList()[g]},toJSON:function(){var e=[];return t.Array.each(this.getList(),function(t){e.push(t.toJSON())}),e}},f={},t.ListProxy=e,t.ListProxyStatic={setBoundary:i,fetchListByContext:u,fetchListByPage:c,fetchListByRange:d}},"@VERSION@");
YUI.add("api-helper",function(e){function t(){return U.join(",")}function n(){return z.join(",")}function r(){return S.join(",")}function i(){return E.join(",")}function a(){return F.join(",")}function o(){return O.join(",")}function s(t){function n(e){return o++,e.getValue("id")===h}var r,i,a,o=0,s=t.model,d=t.next,c=t.prev,l=t.hasMin,u=t.hasMax,p=t.current,m=t.numNext,_=t.numPrev,h=s.getValue("id");return p.some(n)?1===o&&0===d.length?r=c.concat(p):o===p.length&&0===c.length?r=p.concat(d):o<c.length&&p.length-o<d.length?r=c.concat([s],d):(r=p,a=c.slice(0),a.some(function(e){return!r.some(function(t){return t.getValue("id")===e.getValue("id")})})?r=r.slice(o-1):a=[],i=d.slice(0),i.every(function(e){return r.some(function(t){return t.getValue("id")===e.getValue("id")})})?i=[]:r=r.slice(0,o),r=a.concat(r,i)):r=0===d.length&&0===m?c.concat([s],p):0===c.length&&0===_?p.concat([s],d):c.concat([s],d),(u||m>0&&d.length<m)&&e.ListProxyStatic.setBoundary(r,"max"),(l||_>0&&c.length<_)&&e.ListProxyStatic.setBoundary(r,"min"),r}function d(t){var n=t.current,r=t.newPages,i=t.perPage,a=t.pageNum,o=t.hasMin,s=t.hasMax,d=t.totalItems,c=[],l=[],u=[];return 0===n.length?(u=r,1===a&&e.ListProxyStatic.setBoundary(u,"min"),void 0!==d&&d<=a*i&&e.ListProxyStatic.setBoundary(u,"max")):(o&&1!==a&&(c=n.slice(0,a*i),l=n.slice(a*i)),r.length<i||d===i*a?l=[]:d&&d>n.length&&s?(c=0===c.length?n.slice(0,-1*(a-1)*i):c,l=n.slice(-1*(a-1)*i)):s&&(l=0===l.length?n:l),u=c.concat(r,l),(o||1===a)&&e.ListProxyStatic.setBoundary(u,"min"),(s||r.length<i||d===i*a)&&e.ListProxyStatic.setBoundary(u,"max")),u}function c(e){if(!e)return e;var t=e;try{var n=/^\/\/c\d(\.staticflickr\.com\/\d\/\d+\/)(\d+)(_.+\.jpg)$/,r=e.match(n);r&&(t="//c1"+r[1]+r[2]+r[3])}catch(e){}return t}function l(e){var t,n=/^([a-z]+:)(\/\/(farm[0-9]{1,2}|c[0-9])\.static[\.]?flickr.com)/g;if("string"!=typeof e){for(t in e)e[t]=e[t]?e[t].replace(n,"$2"):null,e[t]=c(e[t]);return e}return c(e.replace(n,"$2"))}function u(t,n){var r={};return!n&&t.id?e.Object.each(t,function(n,i){var a,o=/^url_([a-z]+)$/.exec(i);o&&(a=o[1],r[a]={displayUrl:l(t["url_"+a]),width:parseInt(t["width_"+a],10),height:parseInt(t["height_"+a],10)},t["url_"+a+"_cdn"]?(YUI.Env.isServer||(e.config.flickr.cdnUrls=!0),r[a].url=l(t["url_"+a+"_cdn"])):(YUI.Env.isServer||(e.config.flickr.cdnUrls=!1),r[a].url=l(t["url_"+a])))}):t&&t[0]&&t[0].location?e.Object.each(t,function(e,t){var n=/_[a-z0-9]+_([a-z])\./.exec(e.location);if(n&&e.width>0&&e.width>0&&"o"!==n[1]){var i=n[1],a=i,o=new RegExp("_("+i+")\\.$");a="m"===i?"s":i,a="l"===i?"m":i,r[a]={displayUrl:l(e.location),width:parseInt(e.width,10),height:parseInt(e.height,10),url:l(e.location.replace(o,"_"+a+".")),key:a}}}):e.Array.each(t,function(t,n,i){if("video"!==t.media){var a=/sizes\/(\w+)\/?$/.exec(t.url)[1];a&&(r[a]={displayUrl:l(t.source),width:parseInt(t.width,10),height:parseInt(t.height,10)},t.source_cdn?(YUI.Env.isServer||(e.config.flickr.cdnUrls=!0),r[a].url=l(t.source_cdn)):(YUI.Env.isServer||(e.config.flickr.cdnUrls=!1),r[a].url=l(t.source)))}}),r}function p(e){var t,n=!1;for(t=0;t<e.length;t++)"HD MP4"===e[t].label&&(n=!0);return n}function m(e,t){var n={id:e.id,title:e.title,description:e.description&&e.description.content||"",sizes:u(e),isHD:p(e),needsInterstitial:e.needsInterstitial,canComment:e.canComment,canPublicComment:e.publiceditability?e.publiceditability.cancomment:0,canAddMeta:e.canAddMeta||e.canAddmeta,safetyLevel:e.safetyLevel,license:e.license,mediaType:e.media,secret:e.secret,rotation:e.rotation,hasInvalidColorspaceForPrint:e.hasInvalidColorspaceForPrint,oWidth:e.oWidth?parseInt(e.oWidth,10):0,oHeight:e.oHeight?parseInt(e.oHeight,10):0,isVideoPending:e.video?e.video.pending:0};return n.owner={pathAlias:e.pathalias||e.pathAlias,username:e.ownername,realname:e.realname,id:t||e.owner,buddyicon:l(e.iconurls),isAdFree:e.isAdFree,isPro:e.ispro,dateCreated:e.ownerDatecreate},n.engagement={id:e.id,ownerNsid:t||e.owner,isFaved:e.isfavorite||!1,canShare:e.canShare,canDownload:e.canDownload,commentCount:e.countComments,faveCount:e.countFaves,viewCount:e.countViews},n.stats={id:e.id,dateTaken:e.datetaken,datePosted:e.dateupload,takenGranularity:e.datetakengranularity,isDateTakenUnknown:e.datetakenunknown||"1"===e.datetakenunknown||1===e.datetakenunknown},n}function _(t){return t.owner&&t.owner.accountId?{id:t.id,pathAlias:t.owner.accountIdAlias||t.owner.accountId,username:t.owner.accountIdAlias,realname:t.owner.name,nsid:t.owner.accountId,ownerNsid:t.owner.accountId,isFaved:!1,faveCount:t.stats.favesCount,commentCount:t.stats.commentsCount,title:t.title,description:t.description,mediaType:void 0,license:void 0,sizes:e.APIHelper.response.parsePhotoSize(t.sizes),needsInterstitial:t.needsInterstitial||void 0,canComment:void 0,hasInvalidColorspaceForPrint:!1,oWidth:parseInt(t.sizes[0].width,10),oHeight:parseInt(t.sizes[0].height,10),isPublic:!0,isVisibleByFriends:!1,isVisibleByFamily:!1}:{id:t.id,pathAlias:t.pathalias||t.owner,username:t.ownername,realname:t.realname,nsid:t.owner,ownerNsid:t.owner,isFaved:t.isfavorite||!1,faveCount:t.countFaves,commentCount:t.countComments,title:t.title,description:t.description&&t.description.content||"",mediaType:t.media,license:t.license,sizes:e.APIHelper.response.parsePhotoSize(t),needsInterstitial:t.needsInterstitial,canComment:t.canComment,hasInvalidColorspaceForPrint:!!t.hasInvalidColorspaceForPrint&&t.hasInvalidColorspaceForPrint,oWidth:t.oWidth?parseInt(t.oWidth,10):0,oHeight:t.oHeight?parseInt(t.oHeight,10):0,isPublic:!!t.ispublic,isVisibleByFriends:!!t.isfriend,isVisibleByFamily:!!t.isfamily}}function h(t){var n=[],r=t.photos,i=t.photoModelRegistry,a=t.personModelRegistry,o=t.photoEngagementModelRegistry,s=t.photoStatsModelRegistry,d=t.ownerID,c=t.existingPerson,l={},u={},p={};return r.length&&e.Array.each(r,function(e){var t=m(e,d),r=t.owner.id;l[r]||(c?l[r]=c:(a.addOrUpdate(t.owner),l[r]=a.proxy(r))),u[e.id]||(o.addOrUpdate(t.engagement),u[e.id]=o.proxy(e.id)),p[e.id]||(s.addOrUpdate(t.stats),p[e.id]=s.proxy(e.id)),t.owner=l[r],t.engagement=u[e.id],t.stats=p[e.id],i.addOrUpdate(t),n.push(i.proxy(e.id))}),n}function g(t){var n=[],r=t.pages,i=t.pageModelRegistry;return r.length&&e.Array.each(r,function(e){var t=y(e);i.addOrUpdate(t),n.push(i.proxy(e.id))}),n}function y(t){var n={id:t.id,pageNumber:t.pageNumber,template:parseInt(t.template,10),countPhotos:t.countPhotos,backgroundColor:t.backgroundColor};return e.Lang.isNumber(n.backgroundColor)&&(n.backgroundColor=""+n.backgroundColor,n.backgroundColor=n.backgroundColor.match(/.{1,3}/g).join(",")),n}function f(e){var t={id:e.nsid,isDeleted:e.isDeleted,pathAlias:e.pathAlias,username:e.username,realname:e.realname,isAdFree:e.isAdFree,isPro:e.ispro,buddyicon:l(e.iconurls),location:e.location};return e.datecreate&&(t.dateCreated=e.datecreate),t}function v(e){var t=[],n=e.places,r=e.placeRegistry;return n.length&&n.forEach(function(e){var n,i=e.woeid||e.place_id;n=w(e),r.addOrUpdate(n),t.push(r.proxy(i))}),t}function w(e){return{id:e.woeid||e.place_id,woeId:e.woeid,woeName:e.woe_name,placeId:e.place_id,placeType:e.place_type,placeTypeId:e.place_type_id,placeUrl:e.place_url,latitude:e.latitude,longitude:e.longitude}}function P(e){return{id:e.nsid||e.user,username:e.username,realname:e.realname,iconfarm:e.iconfarm,iconserver:e.iconserver,pathAlias:e.pathAlias}}function I(e){return"string"!=typeof e?e:("_"===e[0]&&(e=e.slice(1)),e.replace(/_([a-zA-Z0-9])/g,function(e,t,n){return t.toUpperCase()}))}function b(t){return e.each(t,function(n,r){e.Lang.isObject(n)&&"appContext"!==r&&(n=b(n));var i=I(r);t[i]=n}),t}function C(e){e.extras?e.extras=e.extras+",static_maps":e.extras="static_maps",e.static_map_zoom="3,6,14",e.static_map_width="245",e.static_map_height="100"}function x(t,n,r,i){var a,o;"gallery-models"===n.name&&(t.compoundId=t.id,t.id=t.compoundId.split("-").pop()),t.owner&&(a=e.APIHelper.response.parsePerson(t.owner),t.owner=r.addOrUpdate(a)),"group-pool-models"===n.name&&(t.title=e.Escape.html(t.title),o=i.parseGroupModel(t.id,t.pathAlias,t),t={id:t.id,pathAlias:t.pathAlias,group:i.addOrUpdate(o)}),"set-models"!==n.name&&"gallery-models"!==n.name||(t.primaryPhotoSizes=k(t)),n.addOrUpdate(t)}function k(t){var n=e.Lang.isObject(t)&&t.primaryPhotoExtras,r={};return e.Lang.isObject(n)&&(e.Object.each(n,function(t,i){var a,o=/^url_([a-z]+)$/.exec(i);o&&(a=o[1],r[a]={displayUrl:l(t),width:parseInt(n["width_"+a],10),height:parseInt(n["height_"+a],10)},n["url_"+a+"_cdn"]?(YUI.Env.isServer||(e.config.flickr.cdnUrls=!0),r[a].src=l(n["url_"+a+"_cdn"])):(YUI.Env.isServer||(e.config.flickr.cdnUrls=!1),r[a].src=l(n["url_"+a])))}),delete t.primaryPhotoExtras),r}function A(e){var t={};return t.title=e.title.content,t.id=e.id,t.photoCount=parseInt(e.photos,10),t.primary=e.primary,t.videoCount=parseInt(e.videos,10),t.totalCount=t.photoCount+t.videoCount,t.primaryPhotoSizes=k({primaryPhotoExtras:e}),t}var U=["can_addmeta","can_comment","can_download","can_share","contact","count_comments","count_faves","count_views","date_taken","date_upload","description","icon_urls_deep","isfavorite","ispro","license","media","needs_interstitial","owner_name","owner_datecreate","path_alias","realname","rotation","safety_level","secret_k","secret_h","url_c","url_f","url_h","url_k","url_l","url_m","url_n","url_o","url_q","url_s","url_sq","url_t","url_z","visibility","visibility_source","o_dims","is_marketplace_printable","is_marketplace_licensable","publiceditability"],z=["datecreate","date_activity","eighteenplus","invitation_only","needs_interstitial","non_members_privacy","pool_pending_count","privacy","member_pending_count","icon_urls","date_activity_detail"],S=["url_c","url_h","url_k","url_l","url_m","url_n","url_o","url_q","url_s","url_sq","url_t","url_z","path_alias","owner_name"],E=["can_comment","count_comments","count_faves","description","isfavorite","license","media","needs_interstitial","owner_name","path_alias","realname","rotation","url_c","url_l","url_m","url_n","url_q","url_s","url_sq","url_t","url_z"],F=["owner_name","path_alias","realname","sizes","url_m","url_n","url_q","url_s","url_sq","url_t","url_z","url_c","url_h","url_k","url_l","url_z","needs_interstitial"],O=["icon_urls","safe_search"],L={fave:function(t){return{id:e.guid(),type:t.type,owner:P(t),timestamp:t.dateadded}},comment:function(e){return{id:e.commentid,type:e.type,owner:P(e),content:e._content,timestamp:e.dateadded}},contacted:function(t){return{id:e.guid(),type:t.type,owner:P(t),timestamp:t.dateadded}},gallery:function(t,n){return{id:e.guid(),type:t.type,owner:P(t),gallery:n,timestamp:t.dateadded}},people:function(t,n){return{id:e.guid(),type:t.type,owner:P(t),timestamp:t.dateadded,personTagged:n.personTagged,tagger:n.tagger}},tag:function(t){return{id:e.guid(),type:t.type,owner:P(t),timestamp:t.dateadded}},photo_comment_mention:function(t){return{id:e.guid(),type:t.type,owner:P(t),timestamp:t.dateadded}},group_invite:function(t,n){return{id:e.guid(),type:t.type,owner:P(t),group:n.toJSON(),timestamp:t.dateadded}},group_user_invite:function(t){return{id:e.guid(),type:t.type,owner:P(t),timestamp:t.dateadded}},note:function(t){return{id:e.guid(),type:t.type,owner:P(t),timestamp:t.dateadded}},share:function(t){return{id:e.guid(),type:t.type,owner:P(t),timestamp:t.dateadded}},reply_reply:function(t){return{id:e.guid(),type:t.type,owner:P(t),timestamp:t.dateadded,replyId:t.reply_id}},topic_reply:function(t){return{id:e.guid(),type:t.type,owner:P(t),timestamp:t.dateadded,replyId:t.reply_id}},friend_join:function(t){return{id:e.guid(),type:t.type,owner:P(t),timestamp:t.dateadded,service:t.service}},group_topic_new:function(t){return{id:e.guid(),type:t.type,owner:P(t),timestamp:t.dateadded}},flickrmail:function(t,n){return{id:e.guid(),type:t.type,owner:P(n.owner),timestamp:t.dateadded,mail:n.mail}},testimonial:function(t,n){return{id:e.guid(),type:t.type,owner:P(n.owner),timestamp:t.dateadded,url:n.url}}};e.APIHelper={request:{getRebootPhotoExtras:t,getRebootGroupExtras:n,getRebootSearchSetsExtras:r,getRebootPhotoLiteExtras:i,getRebootAlbumsListExtras:a,getRebootPeopleExtras:o,addStaticMapsParams:C},response:{addOrReplaceListByContext:s,addOrReplaceListByPage:d,parsePhoto:m,parsePhotoLite:_,isHD:p,parsePhotos:h,parsePage:y,parsePages:g,parsePhotoSize:u,parsePerson:f,parsePlaces:v,parseContact:P,parseNotificationsEvents:L,agnosticizeFarmPathTransferProtocol:l,camelCaseProperties:b,addContextToRegistry:x,parsePrimaryPhotoSizes:k,parsePhotoSetMeta:A}}},"@VERSION@",{requires:["flickr-promise","list-proxy"]});
YUI.add("flickr-api",function(e){"use strict";function t(t,r){this.transport=e.transportFactory(t,r?r.flipper:null),void 0!==r&&(this.appContext=r),YUI.Env.isServer?this.api_url=YUI.Env.config.api.hostname_server:this.api_url=e.config.flickr.api.hostname_client}var r=require("lib/flog")("API"),s=[96,97,98,99,100,105,106,111,112,114,115,116,117,118,119],i=["flickr.photos.getInfo","flickr.photos.search","flickr.people.search","flickr.photosets.search","flickr.groups.search","flickr.people.getInfo","flickr.groups.pools.getPhotos","flickr.groups.getInfo","flickr.groups.getTopContributors","flickr.products.books.getBook","flickr.products.orders.getOrder","flickr.site.getBucketTestConfig","flickr.cameraroll.getMap","flickr.cameraroll.getPhotosByOffset","flickr.stats.getGraphData","flickr.stats.getTotalViewsForDateRange","flickr.stats.getMiscStats","flickr.stats.getPopularPhotos","flickr.stats.getReferrerCategoriesForDate","flickr.stats.getTotalViews"],o=function(e){return e&&e.message&&e.message.indexOf&&(e.message.indexOf("Photo not found")>-1||e.message.indexOf("not found (invalid ID)")>-1||e.message.indexOf("not found (inactive member)")>-1||e.message.indexOf("Login Failed")>-1)};t.prototype.callMethod=function(t,a,n,c){function l(i){var n,l="";i&&i.headers&&(i.headers["x-served-by"]&&(l=i.headers["x-served-by"]),i.headers["x-account-nsid"]&&this.appContext.setPreliminaryViewerNsid(i.headers["x-account-nsid"])),e.fletrics.increment("api.calls"+k),e.fletrics.increment("api.calls.responded"+k),u&&u.stop(),g&&g.stop(),m&&m.stop(),YUI.Env.isServer&&i.debug&&(YUI.Env.config.api.log_urls&&!i.debug.wasBatched&&r.info("url",{method:t,url:i.debug.url}),YUI.Env.config.api.log_curl&&!i.debug.wasBatched&&console.log(YUI.Env.server.curler(i.debug)));try{if(!(n=i.responseText?JSON.parse(i.responseText):i))throw r.error("returned an empty response",{method:t}),new Error("Empty response")}catch(e){var p="";if(i&&i.responseText){var f=i.responseText.toLowerCase().indexOf("<body>");p=f>-1?i.responseText.slice(f,100):i.responseText.slice(0,100)}throw r.error("responded with unparseable JSON",{method:t,err:e,servedBy:l,headers:i&&i.headers,response:p}),e.fatal=!0,e}try{(void 0===c.camelCase||c.camelCase)&&(n=e.APIHelper.response.camelCaseProperties(n))}catch(e){throw r.error("failed camelCase parsing",{method:t,err:e,servedBy:l}),e.fatal=!0,e}if("ok"===n.stat)return r.log("successfully returned",{method:t,response:n}),n;if("fail"===n.stat){if(n.fatal=!0,o(n)&&(n.is404=!0),!n.code)throw r.error('responded with "stat: fail" but no error code',{method:t,response:n,servedBy:l}),n;if(-1!==s.indexOf(n.code))throw r.error('responded with "stat: fail" and fatal error code',{method:t,response:n,servedBy:l,headers:i&&i.headers,config:a}),n;throw r.warn('responded with "stat: fail" and non-fatal error code',{method:t,response:n,servedBy:l}),n.fatal=!1,n}throw r.error('responded without a known "stat"',{method:t,response:n,servedBy:l}),n.fatal=!0,n}function p(e){throw e.fatal=!0,e.code&&-1!==["ECONNRESET","ECONNREFUSED","ECONNABORTED","EHOSTUNREACH","ENETDOWN","ENETUNREACH","ETIMEDOUT"].indexOf(e.code)&&(e.timeout=!0),e.resp&&0===e.resp.status&&"timeout"===e.resp.statusText&&(e.clientTimeout=!0),o(e)&&(e.is404=!0),r.error("failed in an unexpected way",{method:t,err:e}),e}var f,d,h,u=null,g=null,m=null,k="";return a=a||{},c=c||{},this.appContext&&this.appContext.request&&(this.appContext.request.UA.isBot||this.appContext.request.UA.isSharingBot)&&(!0,k=e.fletrics.getBotString()),-1!==i.indexOf(t)&&(u=e.fletrics.createStopwatch("api."+t+".latency"+k),e.fletrics.increment("api."+t+".calls"+k)),-1!==["flickr.photos.getInfo"].indexOf(t)&&(g=e.fletrics.createStopwatch("api."+t+".latency.histogram"+k)),m=e.fletrics.createStopwatch("api.latency"),e.fletrics.increment("api.calls.initiated"+k),this.appContext&&this.appContext.random_slice&&(a.random_slice=this.appContext.random_slice),!YUI.Env.isServer&&e.config.flickr.random_slice&&(a.random_slice=e.config.flickr.random_slice),this.appContext&&this.appContext.flipper.isFlipped("enable-viewer-nsid-check")&&!YUI.Env.isServer&&(d=this.appContext.getViewer(),a.viewerNSID=d.signedIn?d.nsid:""),(!e.config.flickr.cameraroll.suppress_logging||"flickr.cameraroll.getPhotosByOffset"!==t&&"flickr.cameraroll.getMapVersion"!==t)&&r.info("params",{method:t,config:a}),f={flickr:!0,data:a},f.data.method=t,c.timeout&&(f.timeout=c.timeout),h=this.api_url+"/services/rest",u&&u.start(),g&&g.start(),m&&m.start(),this.transport.makeRequest(h,f,n).then(l.bind(this),p.bind(this)).then(void 0,function(t){throw t.fatal?e.fletrics.increment("api.failures"+k):e.fletrics.increment("api.warnings"+k),t})},t.prototype.fetchSiteKey=function(){return this.transport.makeSiteKeyRequest(this.api_url+"/services/rest")},t.prototype.fetchCsrf=function(){return this.transport.makeCsrfRequest(this.api_url+"/services/rest")},e.namespace("FlickrAPI"),e.FlickrAPI=t},"@VERSION@",{requires:["promise","oop","fletrics","api-helper"]});
YUI.add("cycle",function(Y,NAME){"function"!=typeof Y.decycle&&(Y.decycle=function(e){"use strict";var t=[],r=[];return(function e(n,a){var o,i,c;if(!("object"!=typeof n||null===n||n instanceof Boolean||n instanceof Date||n instanceof Number||n instanceof RegExp||n instanceof String)){for(o=0;o<t.length;o+=1)if(t[o]===n)return{$ref:r[o]};if(t.push(n),r.push(a),"[object Array]"===Object.prototype.toString.apply(n))for(c=[],o=0;o<n.length;o+=1)c[o]=e(n[o],a+"["+o+"]");else{c={};for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(c[i]=e(n[i],a+"["+JSON.stringify(i)+"]"))}return c}return n})(e,"$")}),"function"!=typeof Y.retrocycle&&(Y.retrocycle=function retrocycle($){"use strict";var px=/^\$(?:\[(?:\d+|\"(?:[^\\\"\u0000-\u001f]|\\([\\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*\")\])*$/;return(function rez(value){var i,item,name,path;if(value&&"object"==typeof value)if("[object Array]"===Object.prototype.toString.apply(value))for(i=0;i<value.length;i+=1)(item=value[i])&&"object"==typeof item&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[i]=eval(path):rez(item));else for(name in value)"object"==typeof value[name]&&(item=value[name])&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[name]=eval(path):rez(item))})($),$})},"@VERSION@");
YUI.add("model-import-export",function(t,e){var i,r=require("lib/flog")(e);i=t.ModelImportExport=function(t){this.appContext=t,this.objectCache={}},i.prototype={exportAll:function(){var e={};return t.Object.each(this.appContext.modelRegistries,function(t,i){e[i]=this.exportRegistry(t)},this),e=t.decycle(e)},exportRegistry:function(t){return Object.keys(t._data).map(function(e){return this.exportModel(t,e)},this)},exportModel:function(t,e){var i={},o=t.name;return this.objectCache[o]||(this.objectCache[o]={}),this.objectCache[o][e]?i=this.objectCache[o][e]:(i._flickrModelRegistry=t.name,Object.keys(t.attributes).forEach(function(o){var a,s,n,c,l=t.attributes[o];try{l.readOnly||(a=t.getValue(e,o))!==t.getDefaultValue(e,o)&&(s=t.getValue(e,o,!0),l.isModel?n=this.exportModel(a.registry,a.getValue("id")):l.isListProxy?n=a.getList().length?a.getList().map(function(t){return this.exportModel(t.registry,t.getValue("id"))},this):void 0:l.isCollection?(c=a._data.length?a._data.map(function(t){return t?this.exportModel(t.registry,t.getValue("id")):void 0},this):[],n={_data:c,fetchedStart:a.fetchedStart,fetchedEnd:a.fetchedEnd,totalItems:a.totalItems}):n=l.serialize&&"function"==typeof l.serialize?l.serialize(s):s,i[o]=n)}catch(t){r.warn("Error exporting attribute",{err:t,attr:o})}},this),this.objectCache[o][e]=i),i},importAll:function(e){e=t.retrocycle(e);var i=this,r=Object.keys(e),o=r.map(this.appContext.getModelRegistry,this.appContext);return o.length?t.Promise.all(o).then(function(t){t.forEach(function(t){i.importRegistry(e[t.name])})}):t.Promise.resolve()},importRegistry:function(t){t.forEach(function(t){this.importModel(t)},this)},importModel:function(e){var i=e._flickrModelRegistry,r=this.appContext.modelRegistries[i],o={};return r.exists(e.id)||(t.Object.each(e,function(t,e){var i=r.attributes[e];i&&(i.isModel?o[e]=this.importModel(t):i.isListProxy?o[e]=t.map(this.importModel,this):i.isCollection?(o[e]=t,o[e].pageContent=o[e]._data.map(function(t){return t?this.importModel(t):void 0},this),o[e].page=1,o[e].perPage=o[e].pageContent.length):i.deserialize&&"function"==typeof i.deserialize?o[e]=i.deserialize(t):o[e]=t)},this),r.add(o,!1,!0)),r.proxy(e.id)}}},"@VERSION@",{requires:["cycle"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("cookie",function(e,t){function h(e){throw new TypeError(e)}function p(e){(!s(e)||e==="")&&h("Cookie name must be a non-empty string.")}function d(e){(!s(e)||e==="")&&h("Subcookie name must be a non-empty string.")}var n=e.Lang,r=e.Object,i=null,s=n.isString,o=n.isObject,u=n.isUndefined,a=n.isFunction,f=encodeURIComponent,l=decodeURIComponent,c=e.config.doc;e.Cookie={_createCookieString:function(e,t,n,r){r=r||{};var i=f(e)+"="+(n?f(t):t),u=r.expires,a=r.path,l=r.domain;return o(r)&&(u instanceof Date&&(i+="; expires="+u.toUTCString()),s(a)&&a!==""&&(i+="; path="+a),s(l)&&l!==""&&(i+="; domain="+l),r.secure===!0&&(i+="; secure")),i},_createCookieHashString:function(e){o(e)||h("Cookie._createCookieHashString(): Argument must be an object.");var t=[];return r.each(e,function(e,n){!a(e)&&!u(e)&&t.push(f(n)+"="+f(String(e)))}),t.join("&")},_parseCookieHash:function(e){var t=e.split("&"),n=i,r={};if(e.length)for(var s=0,o=t.length;s<o;s++)n=t[s].split("="),r[l(n[0])]=l(n[1]);return r},_parseCookieString:function(e,t,n){var r={};if(s(e)&&e.length>0){var o=t===!1?function(e){return e}:l,a=e.split(/;\s/g),f=i,c=i,h=i;for(var p=0,d=a.length;p<d;p++){h=a[p].match(/([^=]+)=/i);if(h instanceof Array)try{f=l(h[1]),c=o(a[p].substring(h[1].length+1))}catch(v){}else f=l(a[p]),c="";!u(n)&&n.reverseCookieLoading?u(r[f])&&(r[f]=c):r[f]=c}}return r},_setDoc:function(e){c=e},exists:function(e){p(e);var t=this._parseCookieString(c.cookie,!0);return t.hasOwnProperty(e)},get:function(e,t){p(e);var n,r,s;return a(t)?(s=t,t={}):o(t)?s=t.converter:t={},n=this._parseCookieString(c.cookie,!t.raw,t),r=n[e],u(r)?i:a(s)?s(r):r},getSub:function(e,t,n,r){var s=this.getSubs(e,r);return s!==i?(d(t),u(s[t])?i:a(n)?n(s[t]):s[t]):i},getSubs:function(e,t){p(e);var n=this._parseCookieString(c.cookie,!1,t);return s(n[e])?this._parseCookieHash(n[e]):i},remove:function(t,n){return p(t),n=e.merge(n||{},{expires:new Date(0)}),this.set(t,"",n)},removeSub:function(e,t,n){p(e),d(t),n=n||{};var r=this.getSubs(e);if(o(r)&&r.hasOwnProperty(t)){delete r[t];if(!n.removeIfEmpty)return this.setSubs(e,r,n);for(var i in r)if(r.hasOwnProperty(i)&&!a(r[i])&&!u(r[i]))return this.setSubs(e,r,n);return this.remove(e,n)}return""},set:function(e,t,n){p(e),u(t)&&h("Cookie.set(): Value cannot be undefined."),n=n||{};var r=this._createCookieString(e,t,!n.raw,n);return c.cookie=r,r},setSub:function(e,t,n,r){p(e),d(t),u(n)&&h("Cookie.setSub(): Subcookie value cannot be undefined.");var i=this.getSubs(e);return o(i)||(i={}),i[t]=n,this.setSubs(e,i,r)},setSubs:function(e,t,n){p(e),o(t)||h("Cookie.setSubs(): Cookie value must be an object.");var r=this._createCookieString(e,this._createCookieHashString(t),!1,n);return c.cookie=r,r}}},"3.16.0",{requires:["yui-base"]});
YUI.add("better-use",function(e){var t,r={};e.betterUse=t=function(n,s,i){var o,c,a;if(a=function(t,r){var n;try{if(window.performance){var s=window.performance.timing;s.responseEnd&&s.responseStart&&!isNaN(s.responseEnd)&&!isNaN(s.responseEnd)&&(n=s.responseEnd-s.responseStart)}}catch(e){}var i=new Error("Loading failed: "+t.msg);return i.type="failure",n&&(i.ttl=n),i.moduleLoadingError=!0,i.data=t.data,i.modules=r,i.failed=t.failed,e.fletrics&&e.fletrics.increment("betterUse.failures"),i},i=i||!1,"string"==typeof n){if(""===n.trim())return e.Promise.reject("[better-use] `betterUse` called without any modules.");n=[n]}if(!e.Lang.isArray(n)||n.length<1)return e.Promise.reject("[better-use] `betterUse` called without any modules.");if(i&&n.join("").length>300){for(var l=[];n.length>0;)l.push(e.betterUse(n.splice(0,10)));return e.Promise.all(l)}return s=s&&s._yuid?s:e,o=s._yuid,r[o]?(r[o].modules=r[o].modules.concat(n),r[o].promise):(r[o]||(r[o]={modules:n,promise:void 0}),c=r[o].promise=new e.Promise(function(n,c){e.soon(function(){var l,m=r[o].modules,u=m.slice(0);delete r[o],m.push(function(e,r){if(clearTimeout(l),r.success)n(e),e.fletrics;else if(i)try{var o=/(https:\/\/s\.yimg\.com\/zz\/combo[\S]+)\.js/g,f=/(https:\/\/s\.yimg\.com\/zz\/combo[\S]+)\.css/g,d=!(!r||!r.msg)&&r.msg.match(o);if(d){var p=document.createElement("script");p.onload=function(){n(e)},p.onerror=function(e){c(a(r,u))},p.src=d[0]+"?"+(new Date).getTime().toString(),e.config.doc.body.appendChild(p)}else if(d=!(!r||!r.msg)&&r.msg.match(f)){var g=document.createElement("link");g.rel="stylesheet",g.onload=function(){n(e)},g.onerror=function(e){c(a(r,u))},g.href=d[0]+"?"+(new Date).getTime().toString(),e.config.doc.head.appendChild(g)}else c(a(r,u))}catch(e){c(a(r,u))}else e.fletrics,t(m.slice(0,-1),s,!i).then(function(e){n(e)},function(e){c(e)})}),l=setTimeout(function(){if(i){var r;try{if(window.performance){var o=window.performance.timing;o.responseEnd&&o.responseStart&&!isNaN(o.responseEnd)&&!isNaN(o.responseEnd)&&(r=o.responseEnd-o.responseStart)}}catch(e){}var a=new Error("timed out after "+e.betterUse.timeout+"ms");r&&(a.ttl=r),a.type="timeout",a.moduleLoadingError=!0,a.modules=u,e.fletrics&&e.fletrics.increment("betterUse.timeouts"),c(a)}else e.fletrics,t(m.slice(0,-1),s,!i).then(function(e){n(e)},function(e){c(e)})},e.betterUse.timeout),s.use.apply(s,m)})}),c.then(null,function(t){throw e.fletrics&&e.fletrics.increment("betterUse."+t.type),t}))},e.betterUse.timeout=YUI.Env.isServer?1e4:3e5},"@VERSION@",{requires:["flickr-promise","timers","fletrics"]});
YUI.add("view-counter",function(e,i){function t(i){this.appContext=i.appContext,this.queued={},this.logging={},this.logged={},this.pendingFlush=void 0,this.avoidDuplicates=!1,this.maxPerCall=e.Lang.isNumber(i.maxPerCall)?i.maxPerCall:20,this.flushDelay=e.Lang.isNumber(i.flushDelay)?i.flushDelay:1e3}var s=require("lib/flog")(i);e.ViewCounter=t,t.prototype={queue:function(i,t,s){var n,r;i&&this.canQueue(i)&&(t&&e.Lang.isString(t)||(t=""),"/"===t.charAt(0)&&(n=!0),r={photo_id:i},s&&(r.async=!0),n?r.path=t:r.referrer=t,this.queued[i]=r,this.pendingFlush||(this.pendingFlush=setTimeout(this.flushQueue.bind(this),this.flushDelay)))},flushQueue:function(e){var i=!1;e&&(this.avoidDuplicates=this.avoidDuplicates||!!e.avoidDuplicates,i=!!e.resetDuplicateTracking),this.pendingFlush?(clearTimeout(this.pendingFlush),this.pendingFlush=void 0,i?this.logQueuedViews().then(function(){this.logged={},this.avoidDuplicates=!1}.bind(this)):this.logQueuedViews()):this.logged={}},logQueuedViews:function(){var i,t,s,n=this,r=this.avoidDuplicates;return i=this.queued,this.queued={},t=Object.keys(i),this.maxPerCall&&this.maxPerCall<t.length&&t.forEach(function(e,t){t>=this.maxPerCall&&(n.queue(i[e]),i[e]=void 0,delete i[e])}),e.mix(this.logging,i),s={views:JSON.stringify(e.Object.values(i))},this.appContext.callAPI("flickr.photos.addView",s).then(function(){e.mix(n.logged,i)},function(){}).then(function(){r||Object.keys(i).forEach(function(e){n.logging[e]=void 0,delete n.logging[e]})})},canQueue:function(e){return!(this.queued[e]||this.logging[e]||this.logged[e])},recordAlbumView:function(e){var i={views:JSON.stringify([{user_id:e.albumOwnerID,photoset_id:e.albumID,referrer:e.referrer}])};this.appContext.callAPI("flickr.photosets.addView",i).then(function(){},function(i){s.error("flickr.photosets.addView failed",{err:i,params:e})})},recordPhotostreamView:function(e){var i={views:JSON.stringify([{user_id:e.photostreamOwnerId,referrer:e.referrer}])};this.appContext.callAPI("flickr.people.addView",i).then(function(){},function(i){s.error("flickr.people.addView failed",{err:i,params:e})})}}},"@VERSION@",{requires:[]});
YUI.add("flipper",function(i){"use strict";i.Flipper=function(i){this.config=i},i.Flipper.prototype.isFlipped=function(i){return void 0!==this.config[i]&&this.config[i]},i.Flipper.prototype.getValue=function(i){return this.isFlipped(i)},i.Flipper.prototype.toJSON=function(){return this.config},i.Flipper.prototype.prepareForExport=function(){var i=this;Object.keys(this.config).forEach(function(t){!1===i.config[t]&&delete i.config[t]})}},"@VERSION@",{requires:[]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("handlebars-base",function(e,t){
/*!
Handlebars.js - Copyright (C) 2011 Yehuda Katz
https://raw.github.com/wycats/handlebars.js/master/LICENSE
*/
;var n=e.namespace("Handlebars");n.VERSION="1.0.0",n.COMPILER_REVISION=4,n.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},n.helpers={},n.partials={};var r=Object.prototype.toString,i="[object Function]",s="[object Object]";n.registerHelper=function(e,t,i){if(r.call(e)===s){if(i||t)throw new n.Exception("Arg not supported with multiple helpers");n.Utils.extend(this.helpers,e)}else i&&(t.not=i),this.helpers[e]=t},n.registerPartial=function(e,t){r.call(e)===s?n.Utils.extend(this.partials,e):this.partials[e]=t},n.registerHelper("helperMissing",function(e){if(arguments.length===2)return undefined;throw new Error("Missing helper: '"+e+"'")}),n.registerHelper("blockHelperMissing",function(e,t){var s=t.inverse||function(){},o=t.fn,u=r.call(e);return u===i&&(e=e.call(this)),e===!0?o(this):e===!1||e==null?s(this):u==="[object Array]"?e.length>0?n.helpers.each(e,t):s(this):o(e)}),n.K=function(){},n.createFrame=Object.create||function(e){n.K.prototype=e;var t=new n.K;return n.K.prototype=null,t},n.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(e,t){if(n.logger.level<=e){var r=n.logger.methodMap[e];typeof console!="undefined"&&console[r]&&console[r].call(console,t)}}},n.log=function(e,t){n.logger.log(e,t)},n.registerHelper("each",function(e,t){var s=t.fn,o=t.inverse,u=0,a="",f,l=r.call(e);l===i&&(e=e.call(this)),t.data&&(f=n.createFrame(t.data));if(e&&typeof e=="object")if(e instanceof Array)for(var c=e.length;u<c;u++)f&&(f.index=u),a+=s(e[u],{data:f});else for(var h in e)e.hasOwnProperty(h)&&(f&&(f.key=h),a+=s(e[h],{data:f}),u++);return u===0&&(a=o(this)),a}),n.registerHelper("if",function(e,t){var s=r.call(e);return s===i&&(e=e.call(this)),!e||n.Utils.isEmpty(e)?t.inverse(this):t.fn(this)}),n.registerHelper("unless",function(e,t){return n.helpers["if"].call(this,e,{fn:t.inverse,inverse:t.fn})}),n.registerHelper("with",function(e,t){var s=r.call(e);s===i&&(e=e.call(this));if(!n.Utils.isEmpty(e))return t.fn(e)}),n.registerHelper("log",function(e,t){var r=t.data&&t.data.level!=null?parseInt(t.data.level,10):1;n.log(r,e)});var o=["description","fileName","lineNumber","message","name","number","stack"];n.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n=0;n<o.length;n++)this[o[n]]=t[o[n]]},n.Exception.prototype=new Error,n.SafeString=function(e){this.string=e},n.SafeString.prototype.toString=function(){return this.string.toString()};var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a=/[&<>"'`]/g,f=/[&<>"'`]/,l=function(e){return u[e]||"&amp;"};n.Utils={extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},escapeExpression:function(e){return e instanceof n.SafeString?e.toString():e==null||e===!1?"":(e=e.toString(),f.test(e)?e.replace(a,l):e)},isEmpty:function(e){return!e&&e!==0?!0:r.call(e)==="[object Array]"&&e.length===0?!0:!1}},n.VM={template:function(e){var t={escapeExpression:n.Utils.escapeExpression,invokePartial:n.VM.invokePartial,programs:[],program:function(e,t,r){var i=this.programs[e];return r?i=n.VM.program(e,t,r):i||(i=this.programs[e]=n.VM.program(e,t)),i},merge:function(e,t){var r=e||t;return e&&t&&(r={},n.Utils.extend(r,t),n.Utils.extend(r,e)),r},programWithDepth:n.VM.programWithDepth,noop:n.VM.noop,compilerInfo:null};return function(r,i){i=i||{};var s=e.call(t,n,r,i.helpers,i.partials,i.data),o=t.compilerInfo||[],u=o[0]||1,a=n.COMPILER_REVISION;if(u!==a){if(u<a){var f=n.REVISION_CHANGES[a],l=n.REVISION_CHANGES[u];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+f+") or downgrade your runtime to an older version ("+l+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+o[1]+")."}return s}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,3),i=function(e,i){return i=i||{},t.apply(this,[e,i.data||n].concat(r))};return i.program=e,i.depth=r.length,i},program:function(e,t,n){var r=function(e,r){return r=r||{},t(e,r.data||n)};return r.program=e,r.depth=0,r},noop:function(){return""},invokePartial:function(e,t,r,i,s,o){var u={helpers:i,partials:s,data:o};if(e===undefined)throw new n.Exception("The partial "+t+" could not be found");if(e instanceof Function)return e(r,u);if(!n.compile)throw new n.Exception("The partial "+t+" could not be compiled when running in runtime-only mode");return s[t]=n.compile(e,{data:o!==undefined}),s[t](r,u)}},n.template=n.VM.template,n.VERSION+="-yui",n.revive=n.template,e.namespace("Template").Handlebars=n},"3.16.0",{requires:[]});
YUI.add("better-handlebars",function(e,t){
/*!

 handlebars v4.0.5

Copyright (C) 2011-2015 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
*/
(function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Handlebars=t():e.Handlebars=t()})(this,function(){return(function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)})([function(e,t,r){"use strict";function n(){var e=new s.HandlebarsEnvironment;return p.extend(e,s),e.SafeString=u.default,e.Exception=f.default,e.Utils=p,e.escapeExpression=p.escapeExpression,e.VM=v,e.template=function(t){return v.template(t,e)},e}var a=r(1).default,o=r(2).default;t.__esModule=!0;var i=r(3),s=a(i),l=r(17),u=o(l),c=r(5),f=o(c),d=r(4),p=a(d),h=r(18),v=a(h),m=r(19),g=o(m),x=n();x.create=n,g.default(x),x.default=x,t.default=x,e.exports=t.default},function(e,t){"use strict";t.default=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},t.__esModule=!0},function(e,t){"use strict";t.default=function(e){return e&&e.__esModule?e:{default:e}},t.__esModule=!0},function(e,t,r){"use strict";function n(e,t,r){this.helpers=e||{},this.partials=t||{},this.decorators=r||{},l.registerDefaultHelpers(this),u.registerDefaultDecorators(this)}var a=r(2).default;t.__esModule=!0,t.HandlebarsEnvironment=n;var o=r(4),i=r(5),s=a(i),l=r(6),u=r(14),c=r(16),f=a(c);t.VERSION="4.0.5";t.COMPILER_REVISION=7;var d={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};t.REVISION_CHANGES=d;n.prototype={constructor:n,logger:f.default,log:f.default.log,registerHelper:function(e,t){if("[object Object]"===o.toString.call(e)){if(t)throw new s.default("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if("[object Object]"===o.toString.call(e))o.extend(this.partials,e);else{if(void 0===t)throw new s.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if("[object Object]"===o.toString.call(e)){if(t)throw new s.default("Arg not supported with multiple decorators");o.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var p=f.default.log;t.log=p,t.createFrame=o.createFrame,t.logger=f.default},function(e,t){"use strict";function r(e){return c[e]}function n(e){for(var t=1;t<arguments.length;t++)for(var r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&(e[r]=arguments[t][r]);return e}function a(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function o(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return d.test(e)?e.replace(f,r):e}function i(e){return!e&&0!==e||!(!v(e)||0!==e.length)}function s(e){var t=n({},e);return t._parent=e,t}function l(e,t){return e.path=t,e}function u(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=n,t.indexOf=a,t.escapeExpression=o,t.isEmpty=i,t.createFrame=s,t.blockParams=l,t.appendContextPath=u;var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},f=/[&<>"'`=]/g,d=/[&<>"'`=]/,p=Object.prototype.toString;t.toString=p;var h=function(e){return"function"==typeof e};h(/x/)&&(t.isFunction=h=function(e){return"function"==typeof e&&"[object Function]"===p.call(e)}),t.isFunction=h;var v=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===p.call(e)};t.isArray=v},function(e,t){"use strict";function r(e,t){var a=t&&t.loc,o=void 0,i=void 0;a&&(o=a.start.line,i=a.start.column,e+=" - "+o+":"+i);for(var s=Error.prototype.constructor.call(this,e),l=0;l<n.length;l++)this[n[l]]=s[n[l]];Error.captureStackTrace&&Error.captureStackTrace(this,r),a&&(this.lineNumber=o,this.column=i)}t.__esModule=!0;var n=["description","fileName","lineNumber","message","name","number","stack"];r.prototype=new Error,t.default=r,e.exports=t.default},function(e,t,r){"use strict";function n(e){i.default(e),l.default(e),c.default(e),d.default(e),h.default(e),m.default(e),x.default(e)}var a=r(2).default;t.__esModule=!0,t.registerDefaultHelpers=n;var o=r(7),i=a(o),s=r(8),l=a(s),u=r(9),c=a(u),f=r(10),d=a(f),p=r(11),h=a(p),v=r(12),m=a(v),g=r(13),x=a(g)},function(e,t,r){"use strict";t.__esModule=!0;var n=r(4);t.default=function(e){e.registerHelper("blockHelperMissing",function(t,r){var a=r.inverse,o=r.fn;if(!0===t)return o(this);if(!1===t||null==t)return a(this);if(n.isArray(t))return t.length>0?(r.ids&&(r.ids=[r.name]),e.helpers.each(t,r)):a(this);if(r.data&&r.ids){var i=n.createFrame(r.data);i.contextPath=n.appendContextPath(r.data.contextPath,r.name),r={data:i}}return o(t,r)})},e.exports=t.default},function(e,t,r){"use strict";var n=r(2).default;t.__esModule=!0;var a=r(4),o=r(5),i=n(o);t.default=function(e){e.registerHelper("each",function(e,t){function r(t,r,o){u&&(u.key=t,u.index=r,u.first=0===r,u.last=!!o,c&&(u.contextPath=c+t)),l+=n(e[t],{data:u,blockParams:a.blockParams([e[t],t],[c+t,null])})}if(!t)throw new i.default("Must pass iterator to #each");var n=t.fn,o=t.inverse,s=0,l="",u=void 0,c=void 0;if(t.data&&t.ids&&(c=a.appendContextPath(t.data.contextPath,t.ids[0])+"."),a.isFunction(e)&&(e=e.call(this)),t.data&&(u=a.createFrame(t.data)),e&&"object"==typeof e)if(a.isArray(e))for(var f=e.length;s<f;s++)s in e&&r(s,s,s===e.length-1);else{var d=void 0;for(var p in e)e.hasOwnProperty(p)&&(void 0!==d&&r(d,s-1),d=p,s++);void 0!==d&&r(d,s-1,!0)}return 0===s&&(l=o(this)),l})},e.exports=t.default},function(e,t,r){"use strict";var n=r(2).default;t.__esModule=!0;var a=r(5),o=n(a);t.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t.default},function(e,t,r){"use strict";t.__esModule=!0;var n=r(4);t.default=function(e){e.registerHelper("if",function(e,t){return n.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||n.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,r){return e.helpers.if.call(this,t,{fn:r.inverse,inverse:r.fn,hash:r.hash})})},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",function(){for(var t=[void 0],r=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)t.push(arguments[n]);var a=1;null!=r.hash.level?a=r.hash.level:r.data&&null!=r.data.level&&(a=r.data.level),t[0]=a,e.log.apply(e,t)})},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},e.exports=t.default},function(e,t,r){"use strict";t.__esModule=!0;var n=r(4);t.default=function(e){e.registerHelper("with",function(e,t){n.isFunction(e)&&(e=e.call(this));var r=t.fn;if(n.isEmpty(e))return t.inverse(this);var a=t.data;return t.data&&t.ids&&(a=n.createFrame(t.data),a.contextPath=n.appendContextPath(t.data.contextPath,t.ids[0])),r(e,{data:a,blockParams:n.blockParams([e],[a&&a.contextPath])})})},e.exports=t.default},function(e,t,r){"use strict";function n(e){i.default(e)}var a=r(2).default;t.__esModule=!0,t.registerDefaultDecorators=n;var o=r(15),i=a(o)},function(e,t,r){"use strict";t.__esModule=!0;var n=r(4);t.default=function(e){e.registerDecorator("inline",function(e,t,r,a){var o=e;return t.partials||(t.partials={},o=function(a,o){var i=r.partials;r.partials=n.extend({},i,t.partials);var s=e(a,o);return r.partials=i,s}),t.partials[a.args[0]]=a.fn,o})},e.exports=t.default},function(e,t,r){"use strict";t.__esModule=!0;var n=r(4),a={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=n.indexOf(a.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=a.lookupLevel(e),"undefined"!=typeof console&&a.lookupLevel(a.level)<=e){var t=a.methodMap[e];console[t]||(t="log");for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];console[t].apply(console,n)}}};t.default=a,e.exports=t.default},function(e,t){"use strict";function r(e){this.string=e}t.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},t.default=r,e.exports=t.default},function(e,t,r){"use strict";function n(e){var t=e&&e[0]||1,r=g.COMPILER_REVISION;if(t!==r){if(t<r){var n=g.REVISION_CHANGES[r],a=g.REVISION_CHANGES[t];throw new m.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+a+").")}throw new m.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function a(e,t){function r(r,n,a){a.hash&&(n=h.extend({},n,a.hash),a.ids&&(a.ids[0]=!0)),r=t.VM.resolvePartial.call(this,r,n,a);var o=t.VM.invokePartial.call(this,r,n,a);if(null==o&&t.compile&&(a.partials[a.name]=t.compile(r,e.compilerOptions,t),o=a.partials[a.name](n,a)),null!=o){if(a.indent){for(var i=o.split("\n"),s=0,l=i.length;s<l&&(i[s]||s+1!==l);s++)i[s]=a.indent+i[s];o=i.join("\n")}return o}throw new m.default("The partial "+a.name+" could not be compiled when running in runtime-only mode")}function n(t){function r(t){return""+e.main(a,t,a.helpers,a.partials,i,l,s)}var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=o.data;n._setup(o),!o.partial&&e.useData&&(i=u(t,i));var s=void 0,l=e.useBlockParams?[]:void 0;return e.useDepths&&(s=o.depths?t!==o.depths[0]?[t].concat(o.depths):o.depths:[t]),(r=c(e.main,r,a,o.depths||[],i,l))(t,o)}if(!t)throw new m.default("No environment passed to template");if(!e||!e.main)throw new m.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var a={strict:function(e,t){if(!(t in e))throw new m.default('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var r=e.length,n=0;n<r;n++)if(e[n]&&null!=e[n][t])return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:h.escapeExpression,invokePartial:r,fn:function(t){var r=e[t];return r.decorator=e[t+"_d"],r},programs:[],program:function(e,t,r,n,a){var i=this.programs[e],s=this.fn(e);return t||a||n||r?i=o(this,e,s,t,r,n,a):i||(i=this.programs[e]=o(this,e,s)),i},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var r=e||t;return e&&t&&e!==t&&(r=h.extend({},t,e)),r},noop:t.VM.noop,compilerInfo:e.compiler};return n.isTop=!0,n._setup=function(r){r.partial?(a.helpers=r.helpers,a.partials=r.partials,a.decorators=r.decorators):(a.helpers=a.merge(r.helpers,t.helpers),e.usePartial&&(a.partials=a.merge(r.partials,t.partials)),(e.usePartial||e.useDecorators)&&(a.decorators=a.merge(r.decorators,t.decorators)))},n._child=function(t,r,n,i){if(e.useBlockParams&&!n)throw new m.default("must pass block params");if(e.useDepths&&!i)throw new m.default("must pass parent depths");return o(a,t,e[t],r,0,n,i)},n}function o(e,t,r,n,a,o,i){function s(t){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=i;return i&&t!==i[0]&&(s=[t].concat(i)),r(e,t,e.helpers,e.partials,a.data||n,o&&[a.blockParams].concat(o),s)}return s=c(r,s,e,i,n,o),s.program=t,s.depth=i?i.length:0,s.blockParams=a||0,s}function i(e,t,r){return e?e.call||r.name||(r.name=e,e=r.partials[e]):e="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name],e}function s(e,t,r){r.partial=!0,r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath);var n=void 0;if(r.fn&&r.fn!==l&&(r.data=g.createFrame(r.data),n=r.data["partial-block"]=r.fn,n.partials&&(r.partials=h.extend({},r.partials,n.partials))),void 0===e&&n&&(e=n),void 0===e)throw new m.default("The partial "+r.name+" could not be found");if(e instanceof Function)return e(t,r)}function l(){return""}function u(e,t){return t&&"root"in t||(t=t?g.createFrame(t):{},t.root=e),t}function c(e,t,r,n,a,o){if(e.decorator){var i={};t=e.decorator(t,i,r,n&&n[0],a,o,n),h.extend(t,i)}return t}var f=r(1).default,d=r(2).default;t.__esModule=!0,t.checkRevision=n,t.template=a,t.wrapProgram=o,t.resolvePartial=i,t.invokePartial=s,t.noop=l;var p=r(4),h=f(p),v=r(5),m=d(v),g=r(3)},function(e,t){(function(r){"use strict";t.__esModule=!0,t.default=function(e){var t=void 0!==r?r:window,n=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=n),e}},e.exports=t.default}).call(t,(function(){return this})())}])}),e.Handlebars=YUI.Env.isServer?module.exports:this.Handlebars,e.Handlebars.revive=e.Handlebars.template,e.namespace("Template").Handlebars=e.Handlebars},"@VERSION@",{condition:{trigger:"handlebars-base",when:"after"}});
YUI.add("url",function(o,r){o[r]=function(r){var t=o.Lang.isString(r)?o.merge(o.config.flickr.url,{path:r},arguments[1]):o.merge(o.config.flickr.url,r);return!1===t.protocol?t.protocol="":":"!==t.protocol.substr(-1)&&(t.protocol+=":"),!1===t.host?t.path:o.Lang.sub("{protocol}//{host}{path}",t)}},"@VERSION@",{requires:["yui-base"]});
YUI.add("url-helper",function(e){function a(a){var t,s,o,r,n,i,l,p,c,m;if(t=a.photoId,s=a.pathAlias,t&&s){if(a.page){try{r=parseInt(a.page,10)}catch(e){return}1!==r&&e.Lang.isNumber(r)||(r=!1)}return n=e.Lang.isBoolean(a.lightbox)?a.lightbox:null,i=e.Lang.isBoolean(a.sizes)||e.Lang.isString(a.sizes)?a.sizes:null,l=e.Lang.isString(a.hash)?a.hash:null,p=e.Lang.isBoolean(a.exif)?a.exif:null,c=e.Lang.isBoolean(a.faves)?a.faves:null,m=e.Lang.isBoolean(a.details)?a.details:null,o=e.Lang.isString(a.contextSuffix)?a.contextSuffix:null,"/photos/"+s+"/"+t+"/"+(i?"sizes/"+(e.Lang.isString(i)?i+"/":""):"")+(p?"meta/":"")+(c?"favorites/":"")+(m?"edit-details/":"")+(o?"in/"+o+"/":"")+(r?"page"+r+"/":"")+(n?"lightbox/":"")+(l?"#"+l:"")}}function t(e,a,t){var s,o,r,n,i={params:{}},l=[];switch(s=e.indexOf("-"),-1===s&&(s=e.length),o=e.slice(0,s),r=e.slice(s+1),o){case"contacts":i.modelName="contacts-photo-models",i.params.id="me";break;case"contactsfaves":i.modelName="photostream-models",x.nsid(a)?i.params.id=a:i.params.pathAlias=a;break;case"explore":i.modelName="explore-models",i.params.id=r;break;case"faves":i.modelName="favorite-models",l=r.split("|"),x.nsid(l[0])?i.params.id=l[0]:i.params.pathAlias=l[0];break;case"activity_feed":i.modelName="activity-model",i.params.id=r;break;case"gallery":i.modelName="gallery-models",l=r.split("-"),n=l.length>=2?l.length-1:1,i.params.id=l[n],i.params.compoundId=r;break;case"photolist":i.modelName="photoList-models",i.params.id=r;break;case"photosof":i.modelName="photosof-models",x.nsid(r)?i.params.id=r:i.params.pathAlias=r;break;case"pool":i.modelName="group-pool-models",l=r.split("|"),x.nsid(l[0])?i.params.id=l[0]:x.pathAlias(l[0])?i.params.pathAlias=l[0]:(i.modelName="photostream-models",x.nsid(a)?i.params.id=a:i.params.pathAlias=a);break;case"set":case"album":i.modelName="set-models",i.params.id=r;break;case"shares":i.modelName="set-models",i.params.gpOwner=a,i.params.gpCode=r,i.params.id=r,i.params.isSharedEntity=!0;break;case"dateposted":case"datetaken":i.modelName="photostream-models","datetaken"===o?i.params.orderBy="datetaken":r&&(i.params.orderBy="dateposted"),["public","friend","family","ff"].indexOf(r)>-1&&(i.params.viewAs=r),x.nsid(a)?i.params.id=a:i.params.pathAlias=a;break;default:i.modelName="photostream-models",x.nsid(a)?i.params.id=a:i.params.pathAlias=a}return i}function s(a){var t,s,o,r;for(o=0;o<A.length;o++)for(t=A[o],r=0;r<t.patterns.length;r++)if(s=t.patterns[r].exec(a))return t=e.clone(t),t.match=s[0],t;return null}function o(a){var t;for(t=0;t<A.length;t++)if(A[t].name===a)return e.clone(A[t]);return null}function r(e){var a=this;return e.map(function(e){return a._encodeBase58(e)}).join("-")}function n(e){var a,t="",s=e,o=function(e){return"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"[parseInt(e,10)]};for(e=L(e);e.gte(58);)s=e.div(58),a=e.mod(58),t=o(a)+t,e=s;return o(e)+t}function i(e){var a=e.getValue("url"),t=e.getValue("nsid"),s=e.getValue("pathAlias"),o="/people/"+s+"/";return{cameraroll:"/cameraroll",photostream:a,edit:a+"?details=1",albums:a+(e.registry.appContext.flipper.isFlipped("rename-set-to-album")?"albums":"sets"),map:a+"map",favorites:a+"favorites",theirGroups:"/people/"+e.getValue("pathAlias")+"/groups/",myGroups:"/groups/",stats:a+"stats",creations:a+"creations",contacts:a+"contacts",galleries:a+"galleries",collections:a+"collections",archives:a+"archives",tags:a+"tags",popular:a+"popular-interesting",slideshow:a+"show",mywallart:a+"creations/wallart",myphotobooks:a+"creations/books",profile:o,photosOf:o+"photosof",people:"/photos/friends",list:"/people/"+e.getValue("pathAlias")+"/contacts",revlist:"/people/"+e.getValue("pathAlias")+"/contacts/rev",sendFlickrMail:"/mail/write/?to="+t,ignore:"/ignore.gne/?id="+t,godPage:"/god/accounts/account.gne?nsid="+t,wallet:"/account/wallet"}}function l(e){var a=e.getValue("url");return{photos:a+"pool/",admin:a+"admin/",discussions:a+"discuss/",members:a+"members/",map:a+"map/",rules:a+"rules/",about:a+"",invite:"/groups_invite_pre.gne?id="+e.id,thumbnails:a+"pool/?thumb=1",addPhotos:a+"pool/add/",godPage:"/god/group.gne?nsid="+e.id,unlock:a+"admin/throttle/"}}function p(e,a,t){var s=e.getValue("url");return t?s+=t.id+"/":a&&(s+="page"+a+"/"),s}function c(e,a){return(a||void 0===a?"https":"http")+"://flic.kr/p/"+this._encodeBase58(e)}function m(e){var a=e.indexOf("@"),t=e.substring(0,a),s=e.substr(a+3);return"https://flic.kr/ps/"+this._encodeBase58(t+s)}function u(e){var a=e.indexOf("@"),t=e.substring(0,a),s=e.substr(a+3);return"https://flic.kr/f/"+this._encodeBase58(t+s)}function d(e){var a=e.indexOf("@"),t=e.substring(0,a),s=e.substr(a+2);return 1===s.length&&(s="0"+s),"https://flic.kr/g/"+this._encodeBase58(t+s)}function h(e){return"https://flic.kr/s/"+this._encodeBase58(e)}function g(a,t,s){var o,r;return t&&s?r="//farm"+t+".staticflickr.com/"+s+"/buddyicons/"+a+".jpg":"string"==typeof a&&(o=parseInt(a.split("@")[0],10),isNaN(o)||(o%=100,o%=12,o<10&&(o="0"+o),r=e.url("/images/buddyicon"+o+".png"))),r}function f(a,t){var s;return t=t||"best",(!a[t]||a[t].indexOf("images/buddyicon")>-1)&&(t="best"),"best"===t?a&&e.Lang.isObject(a)&&(["retina","large","medium","small","default"].forEach(function(e){var t=a[e];if(t&&!s)return-1===t.indexOf("images/buddyicon")?void(s=t):void 0}),s||(s=a.retina)):s=a[t],e.APIHelper.response.agnosticizeFarmPathTransferProtocol(s)}function b(a,t,s,o,r){var n;return n="m"===r?"":"_"+r,"//farm"+a+"."+e.config.flickr.farm.host+"/"+t+"/"+s+"_"+o+n+".jpg"}function v(e,a,t,s){var o;return o="m"===s?"":"_"+s,e+"/"+a+"_"+t+o+".jpg"}function y(e,a){var t,s,o,r={},n="/photos/"+a,i="/people/"+a,l={url:"",type:""};switch(t=e.indexOf("-"),-1===t&&(t=e.length),s=e.slice(0,t),o=e.slice(t+1),s){case"album":case"set":l.url=n+"/albums/"+o,l.type="album";break;case"contacts":l.url="/photos/contacts/",l.type="contacts list";break;case"contactsfaves":case"dateposted":case"datetaken":l.url=n,l.type="photostream";break;case"explore":l.url="/explore/",l.type="explore";break;case"faves":l.url="/photos/"+o+"/favorites/",l.type="favorites";break;case"feed":l.url="/",l.type="activity_feed";break;case"gallery":t=o.lastIndexOf("-"),r.user=o.substring(0,t),r.galleryID=o.substring(t+1),l.url="/photos/"+r.user+"/galleries/"+r.galleryID,l.type="gallery";break;case"group":case"pool":l.url="/groups/"+o+"/pool/",l.type="group";break;case"photolist":l.url=n,l.type="photostream";break;case"photosof":l.url=i+"/photosof/",l.type="photosof";break;case"public":l.url=n,l.type="photostream";break;case"shares":l.url=n+"/shares/"+o,l.type="shares";break;default:l.url=n,l.type="photostream"}return l}function k(a){if(a instanceof Array){var t=[];return a.forEach(function(e){t.push(k(e))}),t.join(",")}return 0===a.indexOf("//")?a="https:"+a:0===a.indexOf("/")&&(a=e.url(a)),a}var x=require("lib/helpers/type-validator"),L=require("int"),N=/photos\/(([0-9]+@N[0-9]+)|((?!(?:tags)\/)[0-9a-zA-Z-_]+))\/([0-9]+)\/?/,A=[{name:"account",patterns:[/^\/account\/?/]},{name:"activity_feed",patterns:[/^\/$/,/^\/photos\/[^\/]+\/?\d+\/in\/feed/]},{name:"album",patterns:[/^\/photos\/[^\/]+\/(?:sets|albums)\/[^\/]+\/?/,/^\/photos\/[^\/]+\/?\d+\/in\/(?:set|album)/]},{name:"albums",patterns:[/^\/photos\/[^\/]+\/(?:sets|albums)\/?/]},{name:"cameraroll",patterns:[/^\/cameraroll\/?/]},{name:"commons",patterns:[/^\/commons\/?/]},{name:"contacts_list",patterns:[/^\/photos\/(?:friends|contacts)\/?/,/^\/photos\/[^\/]+\/friends\/?/,/^\/photos\/[^\/]+\/?\d+\/in\/contacts/]},{name:"create",patterns:[/^\/create\/?/]},{name:"creations",patterns:[/^\/photos\/[^\/]+\/creations\/?/]},{name:"explore",patterns:[/^\/explore(?:\/[^\/]+\/[^\/]+\/[^\/]+)?\/?/,/^\/photos\/[^\/]+\/?\d+\/in\/explore/]},{name:"favorites",patterns:[/^\/photos\/[^\/]+\/(?:faves|favorites|favourites)\/?/,/^\/photos\/[^\/]+\/?\d+\/in\/faves/]},{name:"gallery",patterns:[/^\/galleries\/?/,/^\/photos\/[^\/]+\/galleries\/[^\/]+\/?/]},{name:"groups",patterns:[/^\/groups\/?$/,/^\/photos\/[^\/]+\/?\d+\/in\/pool/]},{name:"group",patterns:[/^\/groups\/[^\/]+\/?/]},{name:"map",patterns:[/^\/map\/?/]},{name:"marketplace",patterns:[/^\/marketplace\/?/]},{name:"tags",patterns:[/^\/tags\/?$/,/^\/photos\/alltags\/?/,/^\/tags\/alltags\/?$/,/^\/photos\/tags\/?$/,/^\/photos\/tags-day\/?$/,/^\/photos\/tags-week\/?$/,/^\/photos\/[^\/]+\/?\d+\/in\/tag/]},{name:"tag",patterns:[/^\/tags\/[^\/]+\/?/,/^\/photos\/tags\/[^\/]+\/?/]},{name:"photo_page",patterns:[/^\/photos\/[^\/]+\/[0-9]+\/?/]},{name:"photostream",patterns:[/^\/photos\/[^\/]+\/?$/]},{name:"places",patterns:[/^\/places\/?/]},{name:"profile",patterns:[/^\/people\/[^\/]+\/?/,/^\/photos\/[^\/]+\/?\d+\/in\/photosof/]},{name:"search",patterns:[/^\/search(?:\/?.*)$/]},{name:"shares",patterns:[/^\/photos\/[^\/]+\/shares\/[^\/]+\/?/]},{name:"stats",patterns:[/^\/photos\/[^\/]+\/stats\/?/]}];e.URLHelper={PHOTOPAGE_PATTERN:N,getPhotoPage:a,parseContextURL:t,getContextEntity:y,getShortURL:c,getShortPhotostreamURL:m,getShortGroupURL:d,getShortAlbumURL:h,getShortFavoritesURL:u,getSiteSectionByURL:s,getSiteSectionByName:o,generateShortenedPhotolist:r,_encodeBase58:n,generatePersonUrls:i,generateGroupUrls:l,getBuddyIconURL:g,getGroupIconURL:f,getDiscussionUrl:p,getFarmURL:b,getFarmURLWithPrefix:v,addProtocolToURL:k}},"@VERSION@",{requires:["url","api-helper"]});
YUI.add("moment",function(t,e){!(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()})(this,function(){"use strict";function t(){return jn.apply(null,arguments)}function e(t){return"[object Array]"===Object.prototype.toString.call(t)}function n(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function i(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function r(t,e){for(var n in e)s(e,n)&&(t[n]=e[n]);return s(e,"toString")&&(t.toString=e.toString),s(e,"valueOf")&&(t.valueOf=e.valueOf),t}function o(t,e,n,i){return Ot(t,e,n,i,!0).utc()}function a(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function u(t){return null==t._pf&&(t._pf=a()),t._pf}function d(t){if(null==t._isValid){var e=u(t);t._isValid=!(isNaN(t._d.getTime())||!(e.overflow<0)||e.empty||e.invalidMonth||e.invalidWeekday||e.nullInput||e.invalidFormat||e.userInvalidated),t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)}return t._isValid}function l(t){var e=o(NaN);return null!=t?r(u(e),t):u(e).userInvalidated=!0,e}function h(t){return void 0===t}function c(t,e){var n,i,s;if(h(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),h(e._i)||(t._i=e._i),h(e._f)||(t._f=e._f),h(e._l)||(t._l=e._l),h(e._strict)||(t._strict=e._strict),h(e._tzm)||(t._tzm=e._tzm),h(e._isUTC)||(t._isUTC=e._isUTC),h(e._offset)||(t._offset=e._offset),h(e._pf)||(t._pf=u(e)),h(e._locale)||(t._locale=e._locale),qn.length>0)for(n in qn)i=qn[n],s=e[i],h(s)||(t[i]=s);return t}function f(e){c(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),!1===Jn&&(Jn=!0,t.updateOffset(this),Jn=!1)}function m(t){return t instanceof f||null!=t&&null!=t._isAMomentObject}function _(t){return t<0?Math.ceil(t):Math.floor(t)}function y(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=_(e)),n}function g(t,e,n){var i,s=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),o=0;for(i=0;i<s;i++)(n&&t[i]!==e[i]||!n&&y(t[i])!==y(e[i]))&&o++;return o+r}function p(){}function v(t){return t?t.toLowerCase().replace("_","-"):t}function D(t){for(var e,n,i,s,r=0;r<t.length;){for(s=v(t[r]).split("-"),e=s.length,n=v(t[r+1]),n=n?n.split("-"):null;e>0;){if(i=Y(s.slice(0,e).join("-")))return i;if(n&&n.length>=e&&g(s,n,!0)>=e-1)break;e--}r++}return null}function Y(t){var e=null;if(!Bn[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=$n._abbr,require("./locale/"+t),S(e)}catch(t){}return Bn[t]}function S(t,e){var n;return t&&(n=h(e)?w(t):M(t,e))&&($n=n),$n._abbr}function M(t,e){return null!==e?(e.abbr=t,Bn[t]=Bn[t]||new p,Bn[t].set(e),S(t),Bn[t]):(delete Bn[t],null)}function w(t){var n;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return $n;if(!e(t)){if(n=Y(t))return n;t=[t]}return D(t)}function k(t,e){var n=t.toLowerCase();Qn[n]=Qn[n+"s"]=Qn[e]=t}function T(t){return"string"==typeof t?Qn[t]||Qn[t.toLowerCase()]:void 0}function b(t){var e,n,i={};for(n in t)s(t,n)&&(e=T(n))&&(i[e]=t[n]);return i}function O(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function W(e,n){return function(i){return null!=i?(U(this,e,i),t.updateOffset(this,n),this):x(this,e)}}function x(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function U(t,e,n){t.isValid()&&t._d["set"+(t._isUTC?"UTC":"")+e](n)}function G(t,e){var n;if("object"==typeof t)for(n in t)this.set(n,t[n]);else if(t=T(t),O(this[t]))return this[t](e);return this}function P(t,e,n){var i=""+Math.abs(t),s=e-i.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+i}function C(t,e,n,i){var s=i;"string"==typeof i&&(s=function(){return this[i]()}),t&&(ei[t]=s),e&&(ei[e[0]]=function(){return P(s.apply(this,arguments),e[1],e[2])}),n&&(ei[n]=function(){return this.localeData().ordinal(s.apply(this,arguments),t)})}function F(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function H(t){var e,n,i=t.match(Xn);for(e=0,n=i.length;e<n;e++)ei[i[e]]?i[e]=ei[i[e]]:i[e]=F(i[e]);return function(s){var r="";for(e=0;e<n;e++)r+=i[e]instanceof Function?i[e].call(s,t):i[e];return r}}function V(t,e){return t.isValid()?(e=I(e,t.localeData()),ti[e]=ti[e]||H(e),ti[e](t)):t.localeData().invalidDate()}function I(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(Kn.lastIndex=0;i>=0&&Kn.test(t);)t=t.replace(Kn,n),Kn.lastIndex=0,i-=1;return t}function L(t,e,n){vi[t]=O(e)?e:function(t,i){return t&&n?n:e}}function N(t,e){return s(vi,t)?vi[t](e._strict,e._locale):new RegExp(R(t))}function R(t){return A(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,s){return e||n||i||s}))}function A(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function E(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(i=function(t,n){n[e]=y(t)}),n=0;n<t.length;n++)Di[t[n]]=i}function z(t,e){E(t,function(t,n,i,s){i._w=i._w||{},e(t,i._w,i,s)})}function Z(t,e,n){null!=e&&s(Di,t)&&Di[t](e,n._a,n,t)}function j(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function $(t,n){return e(this._months)?this._months[t.month()]:this._months[xi.test(n)?"format":"standalone"][t.month()]}function q(t,n){return e(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[xi.test(n)?"format":"standalone"][t.month()]}function J(t,e,n){var i,s,r;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(s=o([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(r="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function B(t,e){var n;return t.isValid()?"string"==typeof e&&"number"!=typeof(e=t.localeData().monthsParse(e))?t:(n=Math.min(t.date(),j(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t):t}function Q(e){return null!=e?(B(this,e),t.updateOffset(this,!0),this):x(this,"Month")}function X(){return j(this.year(),this.month())}function K(t){return this._monthsParseExact?(s(this,"_monthsRegex")||et.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex}function tt(t){return this._monthsParseExact?(s(this,"_monthsRegex")||et.call(this),t?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex}function et(){function t(t,e){return e.length-t.length}var e,n,i=[],s=[],r=[];for(e=0;e<12;e++)n=o([2e3,e]),i.push(this.monthsShort(n,"")),s.push(this.months(n,"")),r.push(this.months(n,"")),r.push(this.monthsShort(n,""));for(i.sort(t),s.sort(t),r.sort(t),e=0;e<12;e++)i[e]=A(i[e]),s[e]=A(s[e]),r[e]=A(r[e]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")$","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")$","i")}function nt(t){var e,n=t._a;return n&&-2===u(t).overflow&&(e=n[Si]<0||n[Si]>11?Si:n[Mi]<1||n[Mi]>j(n[Yi],n[Si])?Mi:n[wi]<0||n[wi]>24||24===n[wi]&&(0!==n[ki]||0!==n[Ti]||0!==n[bi])?wi:n[ki]<0||n[ki]>59?ki:n[Ti]<0||n[Ti]>59?Ti:n[bi]<0||n[bi]>999?bi:-1,u(t)._overflowDayOfYear&&(e<Yi||e>Mi)&&(e=Mi),u(t)._overflowWeeks&&-1===e&&(e=Oi),u(t)._overflowWeekday&&-1===e&&(e=Wi),u(t).overflow=e),t}function it(e){!1===t.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function st(t,e){var n=!0;return r(function(){return n&&(it(t+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),n=!1),e.apply(this,arguments)},e)}function rt(t,e){Fi[t]||(it(e),Fi[t]=!0)}function ot(t){var e,n,i,s,r,o,a=t._i,d=Hi.exec(a)||Vi.exec(a);if(d){for(u(t).iso=!0,e=0,n=Li.length;e<n;e++)if(Li[e][1].exec(d[1])){s=Li[e][0],i=!1!==Li[e][2];break}if(null==s)return void(t._isValid=!1);if(d[3]){for(e=0,n=Ni.length;e<n;e++)if(Ni[e][1].exec(d[3])){r=(d[2]||" ")+Ni[e][0];break}if(null==r)return void(t._isValid=!1)}if(!i&&null!=r)return void(t._isValid=!1);if(d[4]){if(!Ii.exec(d[4]))return void(t._isValid=!1);o="Z"}t._f=s+(r||"")+(o||""),Yt(t)}else t._isValid=!1}function at(e){var n=Ri.exec(e._i);if(null!==n)return void(e._d=new Date(+n[1]));ot(e),!1===e._isValid&&(delete e._isValid,t.createFromInputFallback(e))}function ut(t,e,n,i,s,r,o){var a=new Date(t,e,n,i,s,r,o);return t<100&&t>=0&&isFinite(a.getFullYear())&&a.setFullYear(t),a}function dt(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function lt(t){return ht(t)?366:365}function ht(t){return t%4==0&&t%100!=0||t%400==0}function ct(){return ht(this.year())}function ft(t,e,n){var i=7+e-n;return-(7+dt(t,0,i).getUTCDay()-e)%7+i-1}function mt(t,e,n,i,s){var r,o,a=(7+n-i)%7,u=ft(t,i,s),d=1+7*(e-1)+a+u;return d<=0?(r=t-1,o=lt(r)+d):d>lt(t)?(r=t+1,o=d-lt(t)):(r=t,o=d),{year:r,dayOfYear:o}}function _t(t,e,n){var i,s,r=ft(t.year(),e,n),o=Math.floor((t.dayOfYear()-r-1)/7)+1;return o<1?(s=t.year()-1,i=o+yt(s,e,n)):o>yt(t.year(),e,n)?(i=o-yt(t.year(),e,n),s=t.year()+1):(s=t.year(),i=o),{week:i,year:s}}function yt(t,e,n){var i=ft(t,e,n),s=ft(t+1,e,n);return(lt(t)-i+s)/7}function gt(t,e,n){return null!=t?t:null!=e?e:n}function pt(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function vt(t){var e,n,i,s,r=[];if(!t._d){for(i=pt(t),t._w&&null==t._a[Mi]&&null==t._a[Si]&&Dt(t),t._dayOfYear&&(s=gt(t._a[Yi],i[Yi]),t._dayOfYear>lt(s)&&(u(t)._overflowDayOfYear=!0),n=dt(s,0,t._dayOfYear),t._a[Si]=n.getUTCMonth(),t._a[Mi]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=r[e]=i[e];for(;e<7;e++)t._a[e]=r[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[wi]&&0===t._a[ki]&&0===t._a[Ti]&&0===t._a[bi]&&(t._nextDay=!0,t._a[wi]=0),t._d=(t._useUTC?dt:ut).apply(null,r),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[wi]=24)}}function Dt(t){var e,n,i,s,r,o,a,d;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(r=1,o=4,n=gt(e.GG,t._a[Yi],_t(Wt(),1,4).year),i=gt(e.W,1),((s=gt(e.E,1))<1||s>7)&&(d=!0)):(r=t._locale._week.dow,o=t._locale._week.doy,n=gt(e.gg,t._a[Yi],_t(Wt(),r,o).year),i=gt(e.w,1),null!=e.d?((s=e.d)<0||s>6)&&(d=!0):null!=e.e?(s=e.e+r,(e.e<0||e.e>6)&&(d=!0)):s=r),i<1||i>yt(n,r,o)?u(t)._overflowWeeks=!0:null!=d?u(t)._overflowWeekday=!0:(a=mt(n,i,s,r,o),t._a[Yi]=a.year,t._dayOfYear=a.dayOfYear)}function Yt(e){if(e._f===t.ISO_8601)return void ot(e);e._a=[],u(e).empty=!0;var n,i,s,r,o,a=""+e._i,d=a.length,l=0;for(s=I(e._f,e._locale).match(Xn)||[],n=0;n<s.length;n++)r=s[n],i=(a.match(N(r,e))||[])[0],i&&(o=a.substr(0,a.indexOf(i)),o.length>0&&u(e).unusedInput.push(o),a=a.slice(a.indexOf(i)+i.length),l+=i.length),ei[r]?(i?u(e).empty=!1:u(e).unusedTokens.push(r),Z(r,i,e)):e._strict&&!i&&u(e).unusedTokens.push(r);u(e).charsLeftOver=d-l,a.length>0&&u(e).unusedInput.push(a),!0===u(e).bigHour&&e._a[wi]<=12&&e._a[wi]>0&&(u(e).bigHour=void 0),e._a[wi]=St(e._locale,e._a[wi],e._meridiem),vt(e),nt(e)}function St(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(i=t.isPM(n),i&&e<12&&(e+=12),i||12!==e||(e=0),e):e}function Mt(t){var e,n,i,s,o;if(0===t._f.length)return u(t).invalidFormat=!0,void(t._d=new Date(NaN));for(s=0;s<t._f.length;s++)o=0,e=c({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[s],Yt(e),d(e)&&(o+=u(e).charsLeftOver,o+=10*u(e).unusedTokens.length,u(e).score=o,(null==i||o<i)&&(i=o,n=e));r(t,n||e)}function wt(t){if(!t._d){var e=b(t._i);t._a=i([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),vt(t)}}function kt(t){var e=new f(nt(Tt(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Tt(t){var i=t._i,s=t._f;return t._locale=t._locale||w(t._l),null===i||void 0===s&&""===i?l({nullInput:!0}):("string"==typeof i&&(t._i=i=t._locale.preparse(i)),m(i)?new f(nt(i)):(e(s)?Mt(t):s?Yt(t):n(i)?t._d=i:bt(t),d(t)||(t._d=null),t))}function bt(s){var r=s._i;void 0===r?s._d=new Date(t.now()):n(r)?s._d=new Date(+r):"string"==typeof r?at(s):e(r)?(s._a=i(r.slice(0),function(t){return parseInt(t,10)}),vt(s)):"object"==typeof r?wt(s):"number"==typeof r?s._d=new Date(r):t.createFromInputFallback(s)}function Ot(t,e,n,i,s){var r={};return"boolean"==typeof n&&(i=n,n=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=s,r._l=n,r._i=t,r._f=e,r._strict=i,kt(r)}function Wt(t,e,n,i){return Ot(t,e,n,i,!1)}function xt(t,n){var i,s;if(1===n.length&&e(n[0])&&(n=n[0]),!n.length)return Wt();for(i=n[0],s=1;s<n.length;++s)n[s].isValid()&&!n[s][t](i)||(i=n[s]);return i}function Ut(){return xt("isBefore",[].slice.call(arguments,0))}function Gt(){return xt("isAfter",[].slice.call(arguments,0))}function Pt(t){var e=b(t),n=e.year||0,i=e.quarter||0,s=e.month||0,r=e.week||0,o=e.day||0,a=e.hour||0,u=e.minute||0,d=e.second||0,l=e.millisecond||0;this._milliseconds=+l+1e3*d+6e4*u+36e5*a,this._days=+o+7*r,this._months=+s+3*i+12*n,this._data={},this._locale=w(),this._bubble()}function Ct(t){return t instanceof Pt}function Ft(t,e){C(t,0,0,function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+P(~~(t/60),2)+e+P(~~t%60,2)})}function Ht(t,e){var n=(e||"").match(t)||[],i=n[n.length-1]||[],s=(i+"").match(ji)||["-",0,0],r=60*s[1]+y(s[2]);return"+"===s[0]?r:-r}function Vt(e,i){var s,r;return i._isUTC?(s=i.clone(),r=(m(e)||n(e)?+e:+Wt(e))-+s,s._d.setTime(+s._d+r),t.updateOffset(s,!1),s):Wt(e).local()}function It(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Lt(e,n){var i,s=this._offset||0;return this.isValid()?null!=e?("string"==typeof e?e=Ht(yi,e):Math.abs(e)<16&&(e*=60),!this._isUTC&&n&&(i=It(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),s!==e&&(!n||this._changeInProgress?ee(this,Bt(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?s:It(this):null!=e?this:NaN}function Nt(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Rt(t){return this.utcOffset(0,t)}function At(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(It(this),"m")),this}function Et(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ht(_i,this._i)),this}function zt(t){return!!this.isValid()&&(t=t?Wt(t).utcOffset():0,(this.utcOffset()-t)%60==0)}function Zt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function jt(){if(!h(this._isDSTShifted))return this._isDSTShifted;var t={};if(c(t,this),t=Tt(t),t._a){var e=t._isUTC?o(t._a):Wt(t._a);this._isDSTShifted=this.isValid()&&g(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function $t(){return!!this.isValid()&&!this._isUTC}function qt(){return!!this.isValid()&&this._isUTC}function Jt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Bt(t,e){var n,i,r,o=t,a=null;return Ct(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(o={},e?o[e]=t:o.milliseconds=t):(a=$i.exec(t))?(n="-"===a[1]?-1:1,o={y:0,d:y(a[Mi])*n,h:y(a[wi])*n,m:y(a[ki])*n,s:y(a[Ti])*n,ms:y(a[bi])*n}):(a=qi.exec(t))?(n="-"===a[1]?-1:1,o={y:Qt(a[2],n),M:Qt(a[3],n),d:Qt(a[4],n),h:Qt(a[5],n),m:Qt(a[6],n),s:Qt(a[7],n),w:Qt(a[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=Kt(Wt(o.from),Wt(o.to)),o={},o.ms=r.milliseconds,o.M=r.months),i=new Pt(o),Ct(t)&&s(t,"_locale")&&(i._locale=t._locale),i}function Qt(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Xt(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Kt(t,e){var n;return t.isValid()&&e.isValid()?(e=Vt(e,t),t.isBefore(e)?n=Xt(t,e):(n=Xt(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function te(t,e){return function(n,i){var s,r;return null===i||isNaN(+i)||(rt(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),r=n,n=i,i=r),n="string"==typeof n?+n:n,s=Bt(n,i),ee(this,s,t),this}}function ee(e,n,i,s){var r=n._milliseconds,o=n._days,a=n._months;e.isValid()&&(s=null==s||s,r&&e._d.setTime(+e._d+r*i),o&&U(e,"Date",x(e,"Date")+o*i),a&&B(e,x(e,"Month")+a*i),s&&t.updateOffset(e,o||a))}function ne(t,e){var n=t||Wt(),i=Vt(n,this).startOf("day"),s=this.diff(i,"days",!0),r=s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse",o=e&&(O(e[r])?e[r]():e[r]);return this.format(o||this.localeData().calendar(r,this,Wt(n)))}function ie(){return new f(this)}function se(t,e){var n=m(t)?t:Wt(t);return!(!this.isValid()||!n.isValid())&&(e=T(h(e)?"millisecond":e),"millisecond"===e?+this>+n:+n<+this.clone().startOf(e))}function re(t,e){var n=m(t)?t:Wt(t);return!(!this.isValid()||!n.isValid())&&(e=T(h(e)?"millisecond":e),"millisecond"===e?+this<+n:+this.clone().endOf(e)<+n)}function oe(t,e,n){return this.isAfter(t,n)&&this.isBefore(e,n)}function ae(t,e){var n,i=m(t)?t:Wt(t);return!(!this.isValid()||!i.isValid())&&(e=T(e||"millisecond"),"millisecond"===e?+this==+i:(n=+i,+this.clone().startOf(e)<=n&&n<=+this.clone().endOf(e)))}function ue(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function de(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function le(t,e,n){var i,s,r,o;return this.isValid()?(i=Vt(t,this),i.isValid()?(s=6e4*(i.utcOffset()-this.utcOffset()),e=T(e),"year"===e||"month"===e||"quarter"===e?(o=he(this,i),"quarter"===e?o/=3:"year"===e&&(o/=12)):(r=this-i,o="second"===e?r/1e3:"minute"===e?r/6e4:"hour"===e?r/36e5:"day"===e?(r-s)/864e5:"week"===e?(r-s)/6048e5:r),n?o:_(o)):NaN):NaN}function he(t,e){var n,i,s=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(s,"months");return e-r<0?(n=t.clone().add(s-1,"months"),i=(e-r)/(r-n)):(n=t.clone().add(s+1,"months"),i=(e-r)/(n-r)),-(s+i)}function ce(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function fe(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?O(Date.prototype.toISOString)?this.toDate().toISOString():V(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):V(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function me(e){var n=V(this,e||t.defaultFormat);return this.localeData().postformat(n)}function _e(t,e){return this.isValid()&&(m(t)&&t.isValid()||Wt(t).isValid())?Bt({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ye(t){return this.from(Wt(),t)}function ge(t,e){return this.isValid()&&(m(t)&&t.isValid()||Wt(t).isValid())?Bt({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function pe(t){return this.to(Wt(),t)}function ve(t){var e;return void 0===t?this._locale._abbr:(e=w(t),null!=e&&(this._locale=e),this)}function De(){return this._locale}function Ye(t){switch(t=T(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function Se(t){return t=T(t),void 0===t||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")}function Me(){return+this._d-6e4*(this._offset||0)}function we(){return Math.floor(+this/1e3)}function ke(){return this._offset?new Date(+this):this._d}function Te(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function be(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Oe(){return this.isValid()?this.toISOString():"null"}function We(){return d(this)}function xe(){return r({},u(this))}function Ue(){return u(this).overflow}function Ge(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Pe(t,e){C(0,[t,t.length],0,e)}function Ce(t){return Ie.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Fe(t){return Ie.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function He(){return yt(this.year(),1,4)}function Ve(){var t=this.localeData()._week;return yt(this.year(),t.dow,t.doy)}function Ie(t,e,n,i,s){var r;return null==t?_t(this,i,s).year:(r=yt(t,i,s),e>r&&(e=r),Le.call(this,t,e,n,i,s))}function Le(t,e,n,i,s){var r=mt(t,e,n,i,s),o=dt(r.year,0,r.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Ne(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Re(t){return _t(t,this._week.dow,this._week.doy).week}function Ae(){return this._week.dow}function Ee(){return this._week.doy}function ze(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Ze(t){var e=_t(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function je(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function $e(t,n){return e(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(n)?"format":"standalone"][t.day()]}function qe(t){return this._weekdaysShort[t.day()]}function Je(t){return this._weekdaysMin[t.day()]}function Be(t,e,n){var i,s,r;for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(s=Wt([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(s,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(s,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(s,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(r="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[i]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(n&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(n&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}}function Qe(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=je(t,this.localeData()),this.add(t-e,"d")):e}function Xe(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Ke(t){return this.isValid()?null==t?this.day()||7:this.day(this.day()%7?t:t-7):null!=t?this:NaN}function tn(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function en(){return this.hours()%12||12}function nn(t,e){C(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function sn(t,e){return e._meridiemParse}function rn(t){return"p"===(t+"").toLowerCase().charAt(0)}function on(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function an(t,e){e[bi]=y(1e3*("0."+t))}function un(){return this._isUTC?"UTC":""}function dn(){return this._isUTC?"Coordinated Universal Time":""}function ln(t){return Wt(1e3*t)}function hn(){return Wt.apply(null,arguments).parseZone()}function cn(t,e,n){var i=this._calendar[t];return O(i)?i.call(e,n):i}function fn(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function mn(){return this._invalidDate}function _n(t){return this._ordinal.replace("%d",t)}function yn(t){return t}function gn(t,e,n,i){var s=this._relativeTime[n];return O(s)?s(t,e,n,i):s.replace(/%d/i,t)}function pn(t,e){var n=this._relativeTime[t>0?"future":"past"];return O(n)?n(e):n.replace(/%s/i,e)}function vn(t){var e,n;for(n in t)e=t[n],O(e)?this[n]=e:this["_"+n]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function Dn(t,e,n,i){var s=w(),r=o().set(i,e);return s[n](r,t)}function Yn(t,e,n,i,s){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return Dn(t,e,n,s);var r,o=[];for(r=0;r<i;r++)o[r]=Dn(t,r,n,s);return o}function Sn(t,e){return Yn(t,e,"months",12,"month")}function Mn(t,e){return Yn(t,e,"monthsShort",12,"month")}function wn(t,e){return Yn(t,e,"weekdays",7,"day")}function kn(t,e){return Yn(t,e,"weekdaysShort",7,"day")}function Tn(t,e){return Yn(t,e,"weekdaysMin",7,"day")}function bn(){var t=this._data;return this._milliseconds=ys(this._milliseconds),this._days=ys(this._days),this._months=ys(this._months),t.milliseconds=ys(t.milliseconds),t.seconds=ys(t.seconds),t.minutes=ys(t.minutes),t.hours=ys(t.hours),t.months=ys(t.months),t.years=ys(t.years),this}function On(t,e,n,i){var s=Bt(e,n);return t._milliseconds+=i*s._milliseconds,t._days+=i*s._days,t._months+=i*s._months,t._bubble()}function Wn(t,e){return On(this,t,e,1)}function xn(t,e){return On(this,t,e,-1)}function Un(t){return t<0?Math.floor(t):Math.ceil(t)}function Gn(){var t,e,n,i,s,r=this._milliseconds,o=this._days,a=this._months,u=this._data;return r>=0&&o>=0&&a>=0||r<=0&&o<=0&&a<=0||(r+=864e5*Un(Cn(a)+o),o=0,a=0),u.milliseconds=r%1e3,t=_(r/1e3),u.seconds=t%60,e=_(t/60),u.minutes=e%60,n=_(e/60),u.hours=n%24,o+=_(n/24),s=_(Pn(o)),a+=s,o-=Un(Cn(s)),i=_(a/12),a%=12,u.days=o,u.months=a,u.years=i,this}function Pn(t){return 4800*t/146097}function Cn(t){return 146097*t/4800}function Fn(t){var e,n,i=this._milliseconds;if("month"===(t=T(t))||"year"===t)return e=this._days+i/864e5,n=this._months+Pn(e),"month"===t?n:n/12;switch(e=this._days+Math.round(Cn(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}}function Hn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12)}function Vn(t){return function(){return this.as(t)}}function In(t){return t=T(t),this[t+"s"]()}function Ln(t){return function(){return this._data[t]}}function Nn(){return _(this.days()/7)}function Rn(t,e,n,i,s){return s.relativeTime(e||1,!!n,t,i)}function An(t,e,n){var i=Bt(t).abs(),s=Gs(i.as("s")),r=Gs(i.as("m")),o=Gs(i.as("h")),a=Gs(i.as("d")),u=Gs(i.as("M")),d=Gs(i.as("y")),l=s<Ps.s&&["s",s]||r<=1&&["m"]||r<Ps.m&&["mm",r]||o<=1&&["h"]||o<Ps.h&&["hh",o]||a<=1&&["d"]||a<Ps.d&&["dd",a]||u<=1&&["M"]||u<Ps.M&&["MM",u]||d<=1&&["y"]||["yy",d];return l[2]=e,l[3]=+t>0,l[4]=n,Rn.apply(null,l)}function En(t,e){return void 0!==Ps[t]&&(void 0===e?Ps[t]:(Ps[t]=e,!0))}function zn(t){var e=this.localeData(),n=An(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function Zn(){var t,e,n,i=Cs(this._milliseconds)/1e3,s=Cs(this._days),r=Cs(this._months);t=_(i/60),e=_(t/60),i%=60,t%=60,n=_(r/12),r%=12;var o=n,a=r,u=s,d=e,l=t,h=i,c=this.asSeconds();return c?(c<0?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(u?u+"D":"")+(d||l||h?"T":"")+(d?d+"H":"")+(l?l+"M":"")+(h?h+"S":""):"P0D"}var jn,$n,qn=t.momentProperties=[],Jn=!1,Bn={},Qn={},Xn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Kn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ti={},ei={},ni=/\d/,ii=/\d\d/,si=/\d{3}/,ri=/\d{4}/,oi=/[+-]?\d{6}/,ai=/\d\d?/,ui=/\d\d\d\d?/,di=/\d\d\d\d\d\d?/,li=/\d{1,3}/,hi=/\d{1,4}/,ci=/[+-]?\d{1,6}/,fi=/\d+/,mi=/[+-]?\d+/,_i=/Z|[+-]\d\d:?\d\d/gi,yi=/Z|[+-]\d\d(?::?\d\d)?/gi,gi=/[+-]?\d+(\.\d{1,3})?/,pi=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,vi={},Di={},Yi=0,Si=1,Mi=2,wi=3,ki=4,Ti=5,bi=6,Oi=7,Wi=8;C("M",["MM",2],"Mo",function(){return this.month()+1}),C("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),C("MMMM",0,0,function(t){return this.localeData().months(this,t)}),k("month","M"),L("M",ai),L("MM",ai,ii),L("MMM",function(t,e){return e.monthsShortRegex(t)}),L("MMMM",function(t,e){return e.monthsRegex(t)}),E(["M","MM"],function(t,e){e[Si]=y(t)-1}),E(["MMM","MMMM"],function(t,e,n,i){var s=n._locale.monthsParse(t,i,n._strict);null!=s?e[Si]=s:u(n).invalidMonth=t});var xi=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Ui="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Gi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Pi=pi,Ci=pi,Fi={};t.suppressDeprecationWarnings=!1;var Hi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Vi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Ii=/Z|[+-]\d\d(?::?\d\d)?/,Li=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ni=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ri=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=st("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),C("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),C(0,["YY",2],0,function(){return this.year()%100}),C(0,["YYYY",4],0,"year"),C(0,["YYYYY",5],0,"year"),C(0,["YYYYYY",6,!0],0,"year"),k("year","y"),L("Y",mi),L("YY",ai,ii),L("YYYY",hi,ri),L("YYYYY",ci,oi),L("YYYYYY",ci,oi),E(["YYYYY","YYYYYY"],Yi),E("YYYY",function(e,n){n[Yi]=2===e.length?t.parseTwoDigitYear(e):y(e)}),E("YY",function(e,n){n[Yi]=t.parseTwoDigitYear(e)}),E("Y",function(t,e){e[Yi]=parseInt(t,10)}),t.parseTwoDigitYear=function(t){return y(t)+(y(t)>68?1900:2e3)};var Ai=W("FullYear",!1);t.ISO_8601=function(){};var Ei=st("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=Wt.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:l()}),zi=st("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Wt.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:l()}),Zi=function(){return Date.now?Date.now():+new Date};Ft("Z",":"),Ft("ZZ",""),L("Z",yi),L("ZZ",yi),E(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Ht(yi,t)});var ji=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var $i=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,qi=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Bt.fn=Pt.prototype;var Ji=te(1,"add"),Bi=te(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Qi=st("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});C(0,["gg",2],0,function(){return this.weekYear()%100}),C(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Pe("gggg","weekYear"),Pe("ggggg","weekYear"),Pe("GGGG","isoWeekYear"),Pe("GGGGG","isoWeekYear"),k("weekYear","gg"),k("isoWeekYear","GG"),L("G",mi),L("g",mi),L("GG",ai,ii),L("gg",ai,ii),L("GGGG",hi,ri),L("gggg",hi,ri),L("GGGGG",ci,oi),L("ggggg",ci,oi),z(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=y(t)}),z(["gg","GG"],function(e,n,i,s){n[s]=t.parseTwoDigitYear(e)}),C("Q",0,"Qo","quarter"),k("quarter","Q"),L("Q",ni),E("Q",function(t,e){e[Si]=3*(y(t)-1)}),C("w",["ww",2],"wo","week"),C("W",["WW",2],"Wo","isoWeek"),k("week","w"),k("isoWeek","W"),L("w",ai),L("ww",ai,ii),L("W",ai),L("WW",ai,ii),z(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=y(t)});var Xi={dow:0,doy:6};C("D",["DD",2],"Do","date"),k("date","D"),L("D",ai),L("DD",ai,ii),L("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),E(["D","DD"],Mi),E("Do",function(t,e){e[Mi]=y(t.match(ai)[0],10)});var Ki=W("Date",!0);C("d",0,"do","day"),C("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),C("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),C("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),C("e",0,0,"weekday"),C("E",0,0,"isoWeekday"),k("day","d"),k("weekday","e"),k("isoWeekday","E"),L("d",ai),L("e",ai),L("E",ai),L("dd",pi),L("ddd",pi),L("dddd",pi),z(["dd","ddd","dddd"],function(t,e,n,i){var s=n._locale.weekdaysParse(t,i,n._strict);null!=s?e.d=s:u(n).invalidWeekday=t}),z(["d","e","E"],function(t,e,n,i){e[i]=y(t)});var ts="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),es="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),ns="Su_Mo_Tu_We_Th_Fr_Sa".split("_");C("DDD",["DDDD",3],"DDDo","dayOfYear"),k("dayOfYear","DDD"),L("DDD",li),L("DDDD",si),E(["DDD","DDDD"],function(t,e,n){n._dayOfYear=y(t)}),C("H",["HH",2],0,"hour"),C("h",["hh",2],0,en),C("hmm",0,0,function(){return""+en.apply(this)+P(this.minutes(),2)}),C("hmmss",0,0,function(){return""+en.apply(this)+P(this.minutes(),2)+P(this.seconds(),2)}),C("Hmm",0,0,function(){return""+this.hours()+P(this.minutes(),2)}),C("Hmmss",0,0,function(){return""+this.hours()+P(this.minutes(),2)+P(this.seconds(),2)}),nn("a",!0),nn("A",!1),k("hour","h"),L("a",sn),L("A",sn),L("H",ai),L("h",ai),L("HH",ai,ii),L("hh",ai,ii),L("hmm",ui),L("hmmss",di),L("Hmm",ui),L("Hmmss",di),E(["H","HH"],wi),E(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),E(["h","hh"],function(t,e,n){e[wi]=y(t),u(n).bigHour=!0}),E("hmm",function(t,e,n){var i=t.length-2;e[wi]=y(t.substr(0,i)),e[ki]=y(t.substr(i)),u(n).bigHour=!0}),E("hmmss",function(t,e,n){var i=t.length-4,s=t.length-2;e[wi]=y(t.substr(0,i)),e[ki]=y(t.substr(i,2)),e[Ti]=y(t.substr(s)),u(n).bigHour=!0}),E("Hmm",function(t,e,n){var i=t.length-2;e[wi]=y(t.substr(0,i)),e[ki]=y(t.substr(i))}),E("Hmmss",function(t,e,n){var i=t.length-4,s=t.length-2;e[wi]=y(t.substr(0,i)),e[ki]=y(t.substr(i,2)),e[Ti]=y(t.substr(s))});var is=/[ap]\.?m?\.?/i,ss=W("Hours",!0);C("m",["mm",2],0,"minute"),k("minute","m"),L("m",ai),L("mm",ai,ii),E(["m","mm"],ki);var rs=W("Minutes",!1);C("s",["ss",2],0,"second"),k("second","s"),L("s",ai),L("ss",ai,ii),E(["s","ss"],Ti);var os=W("Seconds",!1);C("S",0,0,function(){return~~(this.millisecond()/100)}),C(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),C(0,["SSS",3],0,"millisecond"),C(0,["SSSS",4],0,function(){return 10*this.millisecond()}),C(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),C(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),C(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),C(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),C(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),k("millisecond","ms"),L("S",li,ni),L("SS",li,ii),L("SSS",li,si);var as;for(as="SSSS";as.length<=9;as+="S")L(as,fi);for(as="S";as.length<=9;as+="S")E(as,an);var us=W("Milliseconds",!1);C("z",0,0,"zoneAbbr"),C("zz",0,0,"zoneName");var ds=f.prototype;ds.add=Ji,ds.calendar=ne,ds.clone=ie,ds.diff=le,ds.endOf=Se,ds.format=me,ds.from=_e,ds.fromNow=ye,ds.to=ge,ds.toNow=pe,ds.get=G,ds.invalidAt=Ue,ds.isAfter=se,ds.isBefore=re,ds.isBetween=oe,ds.isSame=ae,ds.isSameOrAfter=ue,ds.isSameOrBefore=de,ds.isValid=We,ds.lang=Qi,ds.locale=ve,ds.localeData=De,ds.max=zi,ds.min=Ei,ds.parsingFlags=xe,ds.set=G,ds.startOf=Ye,ds.subtract=Bi,ds.toArray=Te,ds.toObject=be,ds.toDate=ke,ds.toISOString=fe,ds.toJSON=Oe,ds.toString=ce,ds.unix=we,ds.valueOf=Me,ds.creationData=Ge,ds.year=Ai,ds.isLeapYear=ct,ds.weekYear=Ce,ds.isoWeekYear=Fe,ds.quarter=ds.quarters=Ne,ds.month=Q,ds.daysInMonth=X,ds.week=ds.weeks=ze,ds.isoWeek=ds.isoWeeks=Ze,ds.weeksInYear=Ve,ds.isoWeeksInYear=He,ds.date=Ki,ds.day=ds.days=Qe,ds.weekday=Xe,ds.isoWeekday=Ke,ds.dayOfYear=tn,ds.hour=ds.hours=ss,ds.minute=ds.minutes=rs,ds.second=ds.seconds=os,ds.millisecond=ds.milliseconds=us,ds.utcOffset=Lt,ds.utc=Rt,ds.local=At,ds.parseZone=Et,ds.hasAlignedHourOffset=zt,ds.isDST=Zt,ds.isDSTShifted=jt,ds.isLocal=$t,ds.isUtcOffset=qt,ds.isUtc=Jt,ds.isUTC=Jt,ds.zoneAbbr=un,ds.zoneName=dn,ds.dates=st("dates accessor is deprecated. Use date instead.",Ki),ds.months=st("months accessor is deprecated. Use month instead",Q),ds.years=st("years accessor is deprecated. Use year instead",Ai),ds.zone=st("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Nt);var ls=ds,hs={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},cs={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},fs=/\d{1,2}/,ms={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},_s=p.prototype;_s._calendar=hs,_s.calendar=cn,_s._longDateFormat=cs,_s.longDateFormat=fn,_s._invalidDate="Invalid date",_s.invalidDate=mn,_s._ordinal="%d",_s.ordinal=_n,_s._ordinalParse=fs,_s.preparse=yn,_s.postformat=yn,_s._relativeTime=ms,_s.relativeTime=gn,_s.pastFuture=pn,_s.set=vn,_s.months=$,_s._months=Ui,_s.monthsShort=q,_s._monthsShort=Gi,_s.monthsParse=J,_s._monthsRegex=Ci,_s.monthsRegex=tt,_s._monthsShortRegex=Pi,_s.monthsShortRegex=K,_s.week=Re,_s._week=Xi,_s.firstDayOfYear=Ee,_s.firstDayOfWeek=Ae,_s.weekdays=$e,_s._weekdays=ts,_s.weekdaysMin=Je,_s._weekdaysMin=ns,_s.weekdaysShort=qe,_s._weekdaysShort=es,_s.weekdaysParse=Be,_s.isPM=rn,_s._meridiemParse=is,_s.meridiem=on,S("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===y(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),t.lang=st("moment.lang is deprecated. Use moment.locale instead.",S),t.langData=st("moment.langData is deprecated. Use moment.localeData instead.",w);var ys=Math.abs,gs=Vn("ms"),ps=Vn("s"),vs=Vn("m"),Ds=Vn("h"),Ys=Vn("d"),Ss=Vn("w"),Ms=Vn("M"),ws=Vn("y"),ks=Ln("milliseconds"),Ts=Ln("seconds"),bs=Ln("minutes"),Os=Ln("hours"),Ws=Ln("days"),xs=Ln("months"),Us=Ln("years"),Gs=Math.round,Ps={s:45,m:45,h:22,d:26,M:11},Cs=Math.abs,Fs=Pt.prototype;return Fs.abs=bn,Fs.add=Wn,Fs.subtract=xn,Fs.as=Fn,Fs.asMilliseconds=gs,Fs.asSeconds=ps,Fs.asMinutes=vs,Fs.asHours=Ds,Fs.asDays=Ys,Fs.asWeeks=Ss,Fs.asMonths=Ms,Fs.asYears=ws,Fs.valueOf=Hn,Fs._bubble=Gn,Fs.get=In,Fs.milliseconds=ks,Fs.seconds=Ts,Fs.minutes=bs,Fs.hours=Os,Fs.days=Ws,Fs.weeks=Nn,Fs.months=xs,Fs.years=Us,Fs.humanize=zn,Fs.toISOString=Zn,Fs.toString=Zn,Fs.toJSON=Zn,Fs.locale=ve,Fs.localeData=De,Fs.toIsoString=st("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Zn),Fs.lang=Qi,C("X",0,0,"unix"),C("x",0,0,"valueOf"),L("x",mi),L("X",gi),E("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),E("x",function(t,e,n){n._d=new Date(y(t))}),t.version="2.11.2",(function(t){jn=t})(Wt),t.fn=ls,t.min=Ut,t.max=Gt,t.now=Zi,t.utc=o,t.unix=ln,t.months=Sn,t.isDate=n,t.locale=S,t.invalid=l,t.duration=Bt,t.isMoment=m,t.weekdays=wn,t.parseZone=hn,t.localeData=w,t.isDuration=Ct,t.monthsShort=Mn,t.weekdaysMin=Tn,t.defineLocale=M,t.weekdaysShort=kn,t.normalizeUnits=T,t.relativeTimeThreshold=En,t.prototype=ls,t}),
/*!

moment
https://github.com/moment/moment

Copyright (c) 2011-2013 Tim Wood, Iskren Chernev, Moment.js contributors

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
*/
t.moment=YUI.Env.isServer?module.exports:this.moment,"undefined"!=typeof window&&(window.moment=YUI.Env.isServer?module.exports:this.moment)},"@VERSION@");
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("escape",function(e,t){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#x60;"},r={html:function(e){return(e+"").replace(/[&<>"'\/`]/g,r._htmlReplacer)},regex:function(e){return(e+"").replace(/[\-$\^*()+\[\]{}|\\,.?\s]/g,"\\$&")},_htmlReplacer:function(e){return n[e]}};r.regexp=r.regex,e.Escape=r},"3.16.0",{requires:["yui-base"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datatype-number-parse",function(e,t){var n=e.Escape.regex,r="\\s*";e.mix(e.namespace("Number"),{_buildParser:e.cached(function(e,t,i,s){var o=[],u;return e&&o.push("^"+r+n(e)+r),t&&o.push(r+n(t)+r+"$"),i&&o.push(n(i)+"(?=\\d)"),u=new RegExp("(?:"+o.join("|")+")","g"),s==="."&&(s=null),function(e){return e=e.replace(u,""),s?e.replace(s,"."):e}}),parse:function(t,n){var r;n&&typeof t=="string"&&(r=this._buildParser(n.prefix,n.suffix,n.thousandsSeparator,n.decimalSeparator),t=r(t)),typeof t=="string"&&e.Lang.trim(t)!==""&&(t=+t);if(typeof t!="number"||!isFinite(t))t=null;return t}}),e.namespace("Parsers").number=e.Number.parse,e.namespace("DataType"),e.DataType.Number=e.Number},"3.16.0",{requires:["escape"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datatype-number-format",function(e,t){var n=e.Lang;e.mix(e.namespace("Number"),{format:function(e,t){if(n.isNumber(e)){t=t||{};var r=e<0,i=e+"",s=t.decimalPlaces,o=t.decimalSeparator||".",u=t.thousandsSeparator,a,f,l,c;n.isNumber(s)&&s>=0&&s<=20&&(i=e.toFixed(s)),o!=="."&&(i=i.replace(".",o));if(u){a=i.lastIndexOf(o),a=a>-1?a:i.length,f=i.substring(a);for(l=0,c=a;c>0;c--)l%3===0&&c!==a&&(!r||c>1)&&(f=u+f),f=i.charAt(c-1)+f,l++;i=f}return i=t.prefix?t.prefix+i:i,i=t.suffix?i+t.suffix:i,i}return n.isValue(e)&&e.toString?e.toString():""}}),e.namespace("DataType"),e.DataType.Number=e.Number},"3.16.0");
YUI.add("intl-messageformat",function(a,e){!(function(a,e){"use strict";var o=a.Intl||a.IntlPolyfill,l=(function(a){"use strict";function e(a,o,l){if("string"==typeof a&&(a=e.__parse(a)),!a||"number"!=typeof a.length)throw new TypeError("A pattern must be provided as a String or Array.");l=this._mergeFormats(e.FORMATS,l),L(this,"_locale",{value:this._resolveLocale(o)}),a=this._compilePattern(a,o,l),L(this,"_pattern",{value:a}),this.format=v.call(this.format,this)}function o(a){var e=a.match(y);return e?new l(e[1]):a}function l(a){this.valueName=a}function t(a,e){this.valueName=a,this.options=e}function r(a,e,o){this.valueName=a,this.options=e,this.pluralFunction=o}function n(a,e){var o,l,t,r,n,c=/[{}]/g,s=[],u=0,m=0;for(t=c.exec(a);t;){if((u+="{"===t[0]?1:-1)<0)throw new Error("Imbalanced bracket detected at index "+t.index+' for message "'+a+'"');0===u&&(o=t.index+1,s.push(a.slice(m,o)),m=o),1===u&&m!==t.index&&(l=a.slice(m,t.index),-1===l.indexOf("{")&&(s.push(l),m=t.index)),t=c.exec(a)}if(0!==u)throw new Error("Brackets were not properly closed: "+a);if(m!==a.length&&s.push(a.slice(m)),e)for(r=0,n=s.length;r<n;r++)s[r]=s[r].replace(/^\s+|\s+$/gm,"");return s}function c(a){return a.replace(/^\{\s*/,"").replace(/\s*\}$/,"")}function s(a){return a.indexOf("{")>=0}function u(a,e){var o,l,t,r,n;if(a.options={},e.length%2)throw new Error("Options must come in pairs: "+e.join(", "));for(n=0,r=e.length;n<r;n+=2)t=e[n],l=e[n+1],a.options[t]=l,o=o||"other"===t;if(!o)throw new Error('Options must include default "other" option: '+e.join(", "));return a}function m(a,e){return a.format=e[0],a}function i(a,e,o){var l={type:o.type,valueName:e[1]},t=e[2]&&n(e[2],!0);return o.tokenParser&&t&&(l=o.tokenParser(l,t)),o.postParser&&(l=o.postParser(l)),l}function d(a,e){var o,l;for(o=0,l=w.length;o<l;o++)if(_(w[o],a,e))return a[e];return a[e]}function _(a,e,o){var l,t,r,n,c=e[o],s=c.match(a.regex),u=[];if(s){if(l=a.parse(c,s,a),e[o]=l,l&&l.options&&"object"==typeof l.options)for(t in l.options)l.options.hasOwnProperty(t)&&u.push(t);for(r=0,n=u.length;r<n;r++)f(l,u[r],a);return!0}return!!s}function f(a,e,o){var l=a.options&&a.options[e];l=c(l),a.options[e]=p(l,o.outputFormatter)}function p(a,e){var o,l,t;if(!s(a))return e?e(a):[a];for(o=n(a),l=0,t=o.length;l<t;l++)"{"===o[l].charAt(0)&&(o[l]=d(o,l));return o}function g(a){var e,o,l,t,r=Array.prototype.slice.call(arguments,1);for(e=0,o=r.length;e<o;e+=1)if(l=r[e])for(t in l)l.hasOwnProperty(t)&&(a[t]=l[t]);return a}if(!a)throw new ReferenceError("Intl must be available");var h=Object.prototype.hasOwnProperty,F=(function(){try{return!!Object.defineProperty({},"a",{})}catch(a){return!1}})(),L=(!F&&Object.prototype.__defineGetter__,F?Object.defineProperty:function(a,e,o){"get"in o&&a.__defineGetter__?a.__defineGetter__(e,o.get):(!h.call(a,e)||"value"in o)&&(a[e]=o.value)}),D=Object.create||function(a,e){function o(){}var l,t;o.prototype=a,l=new o;for(t in e)h.call(e,t)&&L(l,t,e[t]);return l},v=Function.prototype.bind||function(a){var e=this,o=[].slice.call(arguments,1);return function(){e.apply(a,o.concat([].slice.call(arguments)))}};L(e,"FORMATS",{enumerable:!0,value:{number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}}}),L(e,"__availableLocales__",{value:[]}),L(e,"__localeData__",{value:D(null)}),L(e,"__addLocaleData",{value:function(a){if(!a||!a.locale)throw new Error("Object passed does not identify itself with a valid language tag");if(!a.messageformat)throw new Error("Object passed does not contain locale data for IntlMessageFormat");var o=e.__availableLocales__,l=e.__localeData__,t=a.locale.toLowerCase().split("-")[0];o.push(t),l[t]=a.messageformat,void 0===e.defaultLocale&&(e.defaultLocale=t)}}),L(e,"__parse",{value:p}),L(e,"defaultLocale",{enumerable:!0,writable:!0}),e.prototype.format=function(a){return this._format(this._pattern,a)},e.prototype.resolvedOptions=function(){return{locale:this._locale}},e.prototype._compilePattern=function(l,n,c){"string"==typeof l&&(l=[l]);var s,u,m,i,d,_,f,p,g,F,L,D=this._locale,v=e.__localeData__,y=[];for(s=0,u=l.length;s<u;s+=1)if("string"!=typeof(m=l[s])){if(i=m.type,d=m.valueName,p=m.options){F={};for(g in p)h.call(p,g)&&(L=p[g],"plural"===i&&"string"==typeof L&&L.indexOf("${#}")>=0?(L=L.match(/(.*)\${#}(.*)/),F[g]=[L[1],{valueName:d,format:new a.NumberFormat(n).format},L[2]]):F[g]=this._compilePattern(L,n,c))}switch(i){case"date":_=c.date[m.format],y.push({valueName:d,format:new a.DateTimeFormat(n,_).format});break;case"time":_=c.time[m.format],y.push({valueName:d,format:new a.DateTimeFormat(n,_).format});break;case"number":_=c.number[m.format],y.push({valueName:d,format:new a.NumberFormat(n,_).format});break;case"plural":f=v[D].pluralFunction,y.push(new r(d,F,f));break;case"select":y.push(new t(d,F));break;default:throw new Error("Message pattern part at index "+s+" does not have a valid type")}}else y.push(o(m));return y},e.prototype._format=function(a,e){var o,l,t,r,n,c,s="";for(o=0,l=a.length;o<l;o+=1)if("string"!=typeof(t=a[o])){if(r=t.valueName,!e||!h.call(e,r))throw new Error("A value must be provided for: "+r);n=e[r],c=t.options,s+=c?this._format(t.getOption(n),e):t.format(n)}else s+=t;return s},e.prototype._mergeFormats=function(a,e){var o,l,t={};for(o in a)h.call(a,o)&&(t[o]=l=D(a[o]),e&&h.call(e,o)&&g(l,e[o]));return t},e.prototype._resolveLocale=function(a){var o,l,t,r=e.__availableLocales__;if(0===r.length)throw new Error("No locale data has been provided for IntlMessageFormat yet");if("string"==typeof a&&(a=[a]),a&&a.length)for(l=0,t=a.length;l<t;l+=1){if(o=a[l].toLowerCase().split("-")[0],!/[a-z]{2,3}/i.test(o))throw new RangeError('"'+a[l]+'" is not a structurally valid language tag');if(r.indexOf(o)>=0)break}return o||e.defaultLocale};var y=/^\${([-\w]+)}$/;l.prototype.format=function(a){return a?"string"==typeof a?a:String(a):""},t.prototype.getOption=function(a){var e=this.options;return e[a]||e.other},r.prototype.getOption=function(a){var e=this.options;return e[this.pluralFunction(a)]||e.other};var w=[{type:"string",regex:/^{\s*([-\w]+)\s*}$/,parse:i,postParser:function(a){return"${"+a.valueName+"}"}},{type:"select",regex:/^{\s*([-\w]+)\s*,\s*select\s*,\s*(.*)\s*}$/,parse:i,tokenParser:u},{type:"plural",regex:/^{\s*([-\w]+)\s*,\s*plural\s*,\s*(.*)\s*}$/,parse:i,tokenParser:u,outputFormatter:function(a){return a.replace(/#/g,"${#}")}},{type:"time",regex:/^{\s*([-\w]+)\s*,\s*time(?:,(.*))?\s*}$/,parse:i,tokenParser:m,postParser:function(a){return a.format=a.format||"medium",a}},{type:"date",regex:/^{\s*([-\w]+)\s*,\s*date(?:,(.*))?\s*}$/,parse:i,tokenParser:m,postParser:function(a){return a.format=a.format||"medium",a}},{type:"number",regex:/^{\s*([-\w]+)\s*,\s*number(?:,(.*))?\s*}$/,parse:i,tokenParser:m},{type:"custom",regex:/^{\s*([-\w]+)\s*,\s*([a-zA-Z]*)(?:,(.*))?\s*}$/,parse:i,tokenParser:m}];return e})(o);"function"==typeof define&&define.amd&&define(l),"object"==typeof module&&"object"==typeof module.exports&&(module.exports=l),a&&(a.IntlMessageFormat=l)})("undefined"!=typeof global?global:this),(function(a){var e=a.IntlMessageFormat,o=[function(a){},function(a){return a=Math.floor(a),1===a?"one":"other"},function(a){return a=Math.floor(a),a>=0&&a<=1?"one":"other"},function(a){var e=Math.floor(Math.abs(a));return a=Math.floor(a),0===e||1===a?"one":"other"},function(a){return a=Math.floor(a),0===a?"zero":1===a?"one":2===a?"two":a%100>=3&&a%100<=10?"few":a%100>=11&&a%100<=99?"many":"other"},function(a){return a=Math.floor(a),a%10==1&&a%100!=11?"one":a%10>=2&&a%10<=4&&!(a%100>=12&&a%100<=14)?"few":a%10==0||a%10>=5&&a%10<=9||a%100>=11&&a%100<=14?"many":"other"},function(a){return"other"},function(a){return a=Math.floor(a),a%10==1&&a%100!=11&&a%100!=71&&a%100!=91?"one":a%10==2&&a%100!=12&&a%100!=72&&a%100!=92?"two":(a%10>=3&&a%10<=4||a%10==9)&&!(a%100>=10&&a%100<=19||a%100>=70&&a%100<=79||a%100>=90&&a%100<=99)?"few":0!==a&&a%1e6==0?"many":"other"},function(a){var e=Math.floor(Math.abs(a)),o=a.toString().replace(/^[^.]*\.?/,"").length,l=parseInt(a.toString().replace(/^[^.]*\.?/,""),10);return a=Math.floor(a),0===o&&e%10==1&&(e%100!=11||l%10==1&&l%100!=11)?"one":0===o&&e%10>=2&&e%10<=4&&(!(e%100>=12&&e%100<=14)||l%10>=2&&l%10<=4&&!(l%100>=12&&l%100<=14))?"few":"other"},function(a){var e=Math.floor(Math.abs(a)),o=a.toString().replace(/^[^.]*\.?/,"").length;return a=Math.floor(a),1===e&&0===o?"one":"other"},function(a){var e=Math.floor(Math.abs(a)),o=a.toString().replace(/^[^.]*\.?/,"").length;return a=Math.floor(a),1===e&&0===o?"one":e>=2&&e<=4&&0===o?"few":0!==o?"many":"other"},function(a){return a=Math.floor(a),0===a?"zero":1===a?"one":2===a?"two":3===a?"few":6===a?"many":"other"},function(a){var e=Math.floor(Math.abs(a)),o=parseInt(a.toString().replace(/^[^.]*\.?|0+$/g,""),10);return a=Math.floor(a),1===a||0!==o&&(0===e||1===e)?"one":"other"},function(a){var e=Math.floor(Math.abs(a));return a=Math.floor(a),0===e||1===e?"one":"other"},function(a){var e=Math.floor(Math.abs(a)),o=a.toString().replace(/^[^.]*\.?/,"").length;return a=Math.floor(a),e>=0&&e<=1&&0===o?"one":"other"},function(a){return a=Math.floor(a),1===a?"one":2===a?"two":a>=3&&a<=6?"few":a>=7&&a<=10?"many":"other"},function(a){return a=Math.floor(a),1===a||11===a?"one":2===a||12===a?"two":a>=3&&a<=10||a>=13&&a<=19?"few":"other"},function(a){return a=Math.floor(a),a%10==1?"one":a%10==2?"two":a%100==0||a%100==20||a%100==40||a%100==60?"few":"other"},function(a){var e=Math.floor(Math.abs(a)),o=a.toString().replace(/^[^.]*\.?/,"").length;return a=Math.floor(a),1===e&&0===o?"one":2===e&&0===o?"two":0!==o||a>=0&&a<=10||a%10!=0?"other":"many"},function(a){var e=Math.floor(Math.abs(a)),o=parseInt(a.toString().replace(/^[^.]*\.?|0+$/g,""),10);return a=Math.floor(a),0!==o||e%10!=1||e%100==11&&0===o?"other":"one"},function(a){return a=Math.floor(a),0===a?"zero":1===a?"one":"other"},function(a){return a=Math.floor(a),1===a?"one":2===a?"two":"other"},function(a){var e=Math.floor(Math.abs(a));return a=Math.floor(a),0===a?"zero":0!==e&&1!==e||0===a?"other":"one"},function(a){var e=parseInt(a.toString().replace(/^[^.]*\.?/,""),10);return a=Math.floor(a),a%10!=1||a%100>=11&&a%100<=19?a%10>=2&&a%10<=9&&!(a%100>=11&&a%100<=19)?"few":0!==e?"many":"other":"one"},function(a){var e=a.toString().replace(/^[^.]*\.?/,"").length,o=parseInt(a.toString().replace(/^[^.]*\.?/,""),10);return a=Math.floor(a),a%10==0||a%100>=11&&a%100<=19||2===e&&o%100>=11&&o%100<=19?"zero":a%10==1&&(a%100!=11||2===e&&o%10==1&&(o%100!=11||2!==e&&o%10==1))?"one":"other"},function(a){var e=Math.floor(Math.abs(a)),o=a.toString().replace(/^[^.]*\.?/,"").length,l=parseInt(a.toString().replace(/^[^.]*\.?/,""),10);return a=Math.floor(a),0!==o||e%10!=1&&l%10!=1?"other":"one"},function(a){return a=Math.floor(a),1===a?"one":0===a||a%100>=2&&a%100<=10?"few":a%100>=11&&a%100<=19?"many":"other"},function(a){var e=Math.floor(Math.abs(a)),o=a.toString().replace(/^[^.]*\.?/,"").length;return a=Math.floor(a),1===e&&0===o?"one":0===o&&e%10>=2&&e%10<=4&&!(e%100>=12&&e%100<=14)?"few":0===o&&1!==e&&(e%10>=0&&e%10<=1||0===o&&(e%10>=5&&e%10<=9||0===o&&e%100>=12&&e%100<=14))?"many":"other"},function(a){var e=Math.floor(Math.abs(a)),o=a.toString().replace(/^[^.]*\.?/,"").length,l=parseInt(a.toString().replace(/^[^.]*\.?|0+$/g,""),10);return a=Math.floor(a),1===e&&(0===o||0===e&&1===l)?"one":"other"},function(a){var e=Math.floor(Math.abs(a)),o=a.toString().replace(/^[^.]*\.?/,"").length;return a=Math.floor(a),1===e&&0===o?"one":0!==o||0===a||1!==a&&a%100>=1&&a%100<=19?"few":"other"},function(a){var e=Math.floor(Math.abs(a)),o=a.toString().replace(/^[^.]*\.?/,"").length;return a=Math.floor(a),0===o&&e%10==1&&e%100!=11?"one":0===o&&(e%10==0||0===o&&(e%10>=5&&e%10<=9||0===o&&e%100>=11&&e%100<=14))?"many":"other"},function(a){var e=Math.floor(Math.abs(a));return a=Math.floor(a),0===e||1===a?"one":a>=2&&a<=10?"few":"other"},function(a){var e=Math.floor(Math.abs(a)),o=parseInt(a.toString().replace(/^[^.]*\.?/,""),10);return a=Math.floor(a),0===a||1===a||0===e&&1===o?"one":"other"},function(a){var e=Math.floor(Math.abs(a)),o=a.toString().replace(/^[^.]*\.?/,"").length;return a=Math.floor(a),0===o&&e%100==1?"one":0===o&&e%100==2?"two":0===o&&(e%100>=3&&e%100<=4||0!==o)?"few":"other"},function(a){return a=Math.floor(a),a>=0&&a<=1||a>=11&&a<=99?"one":"other"},function(a){var e=Math.floor(Math.abs(a)),o=a.toString().replace(/^[^.]*\.?/,"").length;return a=Math.floor(a),0===o&&e%10==1&&e%100!=11?"one":0===o&&e%10>=2&&e%10<=4&&!(e%100>=12&&e%100<=14)?"few":0===o&&(e%10==0||0===o&&(e%10>=5&&e%10<=9||0===o&&e%100>=11&&e%100<=14))?"many":"other"}];e.__addLocaleData({locale:"aa",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"af",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"agq",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"ak",messageformat:{pluralFunction:o[2]}}),e.__addLocaleData({locale:"am",messageformat:{pluralFunction:o[3]}}),e.__addLocaleData({locale:"ar",messageformat:{pluralFunction:o[4]}}),e.__addLocaleData({locale:"as",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"asa",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"ast",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"az",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"bas",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"be",messageformat:{pluralFunction:o[5]}}),e.__addLocaleData({locale:"bem",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"bez",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"bg",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"bm",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"bn",messageformat:{pluralFunction:o[3]}}),e.__addLocaleData({locale:"bo",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"br",messageformat:{pluralFunction:o[7]}}),e.__addLocaleData({locale:"brx",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"bs",messageformat:{pluralFunction:o[8]}}),e.__addLocaleData({locale:"byn",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"ca",messageformat:{pluralFunction:o[9]}}),e.__addLocaleData({locale:"cgg",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"chr",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"cs",messageformat:{pluralFunction:o[10]}}),e.__addLocaleData({locale:"cy",messageformat:{pluralFunction:o[11]}}),e.__addLocaleData({locale:"da",messageformat:{pluralFunction:o[12]}}),e.__addLocaleData({locale:"dav",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"de",messageformat:{pluralFunction:o[9]}}),e.__addLocaleData({locale:"dje",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"dua",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"dyo",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"dz",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"ebu",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"ee",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"el",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"en",messageformat:{pluralFunction:o[9]}}),e.__addLocaleData({locale:"eo",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"es",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"et",messageformat:{pluralFunction:o[9]}}),e.__addLocaleData({locale:"eu",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"ewo",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"fa",messageformat:{pluralFunction:o[3]}}),e.__addLocaleData({locale:"ff",messageformat:{pluralFunction:o[13]}}),e.__addLocaleData({locale:"fi",messageformat:{pluralFunction:o[14]}}),e.__addLocaleData({locale:"fil",messageformat:{pluralFunction:o[14]}}),e.__addLocaleData({locale:"fo",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"fr",messageformat:{pluralFunction:o[13]}}),e.__addLocaleData({locale:"fur",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"ga",messageformat:{pluralFunction:o[15]}}),e.__addLocaleData({locale:"gd",messageformat:{pluralFunction:o[16]}}),e.__addLocaleData({locale:"gl",messageformat:{pluralFunction:o[9]}}),e.__addLocaleData({locale:"gsw",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"gu",messageformat:{pluralFunction:o[3]}}),e.__addLocaleData({locale:"guz",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"gv",messageformat:{pluralFunction:o[17]}}),e.__addLocaleData({locale:"ha",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"haw",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"he",messageformat:{pluralFunction:o[18]}}),e.__addLocaleData({locale:"hi",messageformat:{pluralFunction:o[3]}}),e.__addLocaleData({locale:"hr",messageformat:{pluralFunction:o[8]}}),e.__addLocaleData({locale:"hu",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"hy",messageformat:{pluralFunction:o[13]}}),e.__addLocaleData({locale:"ia",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"id",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"ig",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"ii",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"is",messageformat:{pluralFunction:o[19]}}),e.__addLocaleData({locale:"it",messageformat:{pluralFunction:o[9]}}),e.__addLocaleData({locale:"ja",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"jgo",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"jmc",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"ka",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"kab",messageformat:{pluralFunction:o[13]}}),e.__addLocaleData({locale:"kam",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"kde",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"kea",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"khq",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"ki",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"kk",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"kkj",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"kl",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"kln",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"km",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"kn",messageformat:{pluralFunction:o[3]}}),e.__addLocaleData({locale:"ko",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"kok",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"ks",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"ksb",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"ksf",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"ksh",messageformat:{pluralFunction:o[20]}}),e.__addLocaleData({locale:"kw",messageformat:{pluralFunction:o[21]}}),e.__addLocaleData({locale:"ky",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"lag",messageformat:{pluralFunction:o[22]}}),e.__addLocaleData({locale:"lg",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"lkt",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"ln",messageformat:{pluralFunction:o[2]}}),e.__addLocaleData({locale:"lo",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"lt",messageformat:{pluralFunction:o[23]}}),e.__addLocaleData({locale:"lu",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"luo",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"luy",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"lv",messageformat:{pluralFunction:o[24]}}),e.__addLocaleData({locale:"mas",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"mer",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"mfe",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"mg",messageformat:{pluralFunction:o[2]}}),e.__addLocaleData({locale:"mgh",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"mgo",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"mk",messageformat:{pluralFunction:o[25]}}),e.__addLocaleData({locale:"ml",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"mn",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"mr",messageformat:{pluralFunction:o[3]}}),e.__addLocaleData({locale:"ms",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"mt",messageformat:{pluralFunction:o[26]}}),e.__addLocaleData({locale:"mua",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"my",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"naq",messageformat:{pluralFunction:o[21]}}),e.__addLocaleData({locale:"nb",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"nd",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"ne",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"nl",messageformat:{pluralFunction:o[9]}}),e.__addLocaleData({locale:"nmg",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"nn",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"nnh",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"nr",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"nso",messageformat:{pluralFunction:o[2]}}),e.__addLocaleData({locale:"nus",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"nyn",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"om",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"or",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"os",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"pa",messageformat:{pluralFunction:o[2]}}),e.__addLocaleData({locale:"pl",messageformat:{pluralFunction:o[27]}}),e.__addLocaleData({locale:"ps",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"pt",messageformat:{pluralFunction:o[28]}}),e.__addLocaleData({locale:"rm",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"rn",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"ro",messageformat:{pluralFunction:o[29]}}),e.__addLocaleData({locale:"rof",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"ru",messageformat:{pluralFunction:o[30]}}),e.__addLocaleData({locale:"rw",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"rwk",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"sah",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"saq",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"sbp",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"se",messageformat:{pluralFunction:o[21]}}),e.__addLocaleData({locale:"seh",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"ses",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"sg",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"shi",messageformat:{pluralFunction:o[31]}}),e.__addLocaleData({locale:"si",messageformat:{pluralFunction:o[32]}}),e.__addLocaleData({locale:"sk",messageformat:{pluralFunction:o[10]}}),e.__addLocaleData({locale:"sl",messageformat:{pluralFunction:o[33]}}),e.__addLocaleData({locale:"sn",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"so",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"sq",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"sr",messageformat:{pluralFunction:o[8]}}),e.__addLocaleData({locale:"ss",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"ssy",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"st",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"sv",messageformat:{pluralFunction:o[9]}}),e.__addLocaleData({locale:"sw",messageformat:{pluralFunction:o[9]}}),e.__addLocaleData({locale:"swc",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"ta",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"te",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"teo",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"tg",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"th",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"ti",messageformat:{pluralFunction:o[2]}}),e.__addLocaleData({locale:"tig",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"tn",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"to",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"tr",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"ts",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"twq",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"tzm",messageformat:{pluralFunction:o[34]}}),e.__addLocaleData({locale:"uk",messageformat:{pluralFunction:o[35]}}),e.__addLocaleData({locale:"ur",messageformat:{pluralFunction:o[9]}}),e.__addLocaleData({locale:"uz",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"vai",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"ve",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"vi",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"vo",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"vun",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"wae",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"wal",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"xh",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"xog",messageformat:{pluralFunction:o[1]}}),e.__addLocaleData({locale:"yav",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"yo",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"zgh",messageformat:{pluralFunction:o[0]}}),e.__addLocaleData({locale:"zh",messageformat:{pluralFunction:o[6]}}),e.__addLocaleData({locale:"zu",messageformat:{pluralFunction:o[3]}})})("undefined"!=typeof global?global:this);var o=IntlMessageFormat.__localeData__.en.pluralFunction;IntlMessageFormat.__localeData__.zh.pluralFunction=o,IntlMessageFormat.__localeData__.vi.pluralFunction=o,IntlMessageFormat.__localeData__.ko.pluralFunction=o,IntlMessageFormat.__localeData__.id.pluralFunction=o},"@VERSION@",{es:!0});
YUI.add("handlebars-helper-intl",function(e,t){!(function(e,t){"use strict";var r=e.Intl||e.IntlPolyfill;"function"==typeof define&&define.amd&&define(["intl-messageformat"],function(e){return t(r,e)}),"object"==typeof exports&&(module.exports=t(r,require("intl-messageformat"))),e.HandlebarsHelperIntl=t(r,e.IntlMessageFormat)})("undefined"!=typeof global?global:this,function(e,t){"use strict";function r(t,r,n){var a,o,l,f,s,u,m;if(JSON){if(n){a=[];for(l in n)n.hasOwnProperty(l)&&a.push(l);for(a.sort(),f=0,s=a.length;f<s;f+=1)l=a[f],o={},o[l]=n[l],a[f]=o}u=JSON.stringify([r,a])}if(m=i[t][u])return m;switch(t){case"number":m=new e.NumberFormat(r,n);break;case"date":m=new e.DateTimeFormat(r,n)}return u&&(i[t][u]=m),m}function n(e){var t,r,n,a,i=Array.prototype.slice.call(arguments,1);for(t=0,r=i.length;t<r;t+=1)if(n=i[t])for(a in n)n.hasOwnProperty(a)&&(e[a]=n[a]);return e}if(!e)throw new ReferenceError("Intl must be available.");if(!t)throw new ReferenceError("IntlMessageFormat must be available.");var a={};a.registerWith=function(e){function a(e){if(!e.fn)throw new ReferenceError("{{#intl}} must be invoked as a block helper");var t=c(e.data),r=n({},t.intl,e.hash);return t.intl=r,e.fn(this,{data:t})}function i(e,t,a){if(!(e=new Date(e))||!e.getTime())throw new TypeError("A date must be provided.");a||(a=t,t=null);var i=a.hash,o=a.data,f=o.intl&&o.intl.locales;return t?("string"==typeof t&&(t=l("formats.date."+format,a)),t=n({},t,i)):t=i,r("date",f,t).format(e)}function o(e,t,a){if("number"!=typeof e)throw new TypeError("A number must be provided.");a||(a=t,t=null);var i=a.hash,o=a.data,f=o.intl&&o.intl.locales;return t?("string"==typeof t&&(t=l("formats.number."+format,a)),t=n({},t,i)):t=i,r("number",f,t).format(e)}function l(e,t){var r,n,a,i=t.data&&t.data.intl,o=e.split(".");try{for(a=0,n=o.length;a<n;a++)r=i=i[o[a]]}finally{if(void 0===r)throw new ReferenceError("Could not find Intl object: "+e)}return r}function f(e,r){r||(r=e,e=null);var n=r.hash;if(!e&&"string"!=typeof e&&!n.intlName)throw new ReferenceError("{{intlMessage}} must be provided a message or intlName");var a=r.data.intl||{},i=a.locales,o=a.formats;return!e&&n.intlName&&(e=l(n.intlName,r)),"function"==typeof e?e(n):("function"!=typeof e.format&&(e=new t(e,i,o)),e.format(n))}function s(){var e,t,r=[].slice.call(arguments).pop(),n=r.hash;for(e in n)n.hasOwnProperty(e)&&"string"==typeof(t=n[e])&&(n[e]=p(t));return new m(String(f.apply(this,arguments)))}var u,m=e.SafeString,c=e.createFrame,p=e.Utils.escapeExpression,d={intl:a,intlDate:i,intlNumber:o,intlGet:l,intlMessage:f,intlHTMLMessage:s};for(u in d)d.hasOwnProperty(u)&&e.registerHelper(u,d[u])};var i={number:{},date:{}};return a})},"@VERSION@",{es:!0,requires:["intl-messageformat"]});
YUI.add("god-message",function(i){"use strict";i.godMessage=function(n){var o,r,f,g,e,l;if(void 0===n.intlName)return"GOD_MESSAGE_MISSING";if(r=n.intlName,f=r.split("."),!(i.config.flickr&&i.config.flickr.god&&i.config.flickr.god.lang&&i.config.flickr.god.lang))return"GOD_MESSAGE_MISSING";o=i.clone(i.config.flickr.god.lang);try{for(l=0,e=f.length;l<e;l++)g=o=o[f[l]]}finally{if(void 0===g)return"GOD_MESSAGE_MISSING"}return g}},"@VERSION@",{requires:["oop"]});
YUI.add("handlebars-helpers",function(e){"use strict";function t(t,n,r){var i,s,a,o,l,u,c,f,p={s:"SECOND_",ss:"SECONDS_",m:"MINUTE_",mm:"MINUTES_",h:"HOUR_",hh:"HOURS_",d:"DAY_",dd:"DAYS_",M:"MONTH_",MM:"MONTHS_",y:"YEAR_",yy:"YEARS_"},g="";return t?(i=e.moment.duration(t.diff(e.moment())),s=Math.round(Math.abs(+i)/1e3),a=Math.round(s/60),o=Math.round(a/60),l=Math.round(o/24),u=Math.round(l/365),f=s<45&&["s",s]||1===a&&["m"]||a<45&&["mm",a]||1===o&&["h"]||o<22&&["hh",o]||1===l&&["d"]||l<=25&&["dd",l]||l<=45&&["M"]||l<345&&["MM",Math.round(l/30)]||1===u&&["y"]||["yy",u],c=i>0,r&&(g=c?"_FUTURE":"_PAST"),{intlName:"relative-dates."+p[f[0]]+(n?"SHORT":"LONG")+g,time:f[1]}):{intlName:"relative-dates.NO_DATE"}}var n,r,i,s=e.Handlebars,a={outlet:function(e,t){var n,r;return t=void 0===t||t,e?e.render?(r=e,n=YUI.Env.isServer?r.get("container").get("outerHTML"):'<div id="'+r.getId()+'" class="hb-placeholder"></div>'):n=YUI.Env.isServer&&t?e.get("outerHTML"):t?'<div id="'+e._yuid+'"></div>':e:n="",new s.SafeString(n)},photoDescription:function(e,t){return t?new s.SafeString(e.split("\n").map(function(e){return""===e.trim()?"&nbsp;":"<p>"+a.addLinkToHash(e)+"</p>"}).join("").split("<br>").map(function(e){return""===e.trim()?"&nbsp;":a.addLinkToHash(e)}).join("")):new s.SafeString(e.split("\n").map(function(e){return"<p>"+(""===e.trim()?"&nbsp;":a.addLinkToHash(e))+"</p>"}).join(""))},photoAttribution:function(e,t,n){var r,i="";return e.owner&&e.owner.displayname&&(i=e.owner.displayname),t&&t["remove-by-attribution"]||(e.isOwner?(r="common.BY_YOU",i=""):r="common.BY_USER"),n.fn({user:i,intlName:r})},commentPermalinkId:function(e){return e=e.split("-"),"comment"+e[2]},contactUrl:function(e){return"/photos/"+e.pathAlias||e.id},renderTrustedMarkupWithLineBreaks:function(t){return t=t.replace(/(\r\n|\n|\r)/gm,"<br>"),e.Handlebars.helpers.renderTrustedMarkup(t)},renderSafeInlineComment:function(t,n){t=t.replace(/(\r\n|\n|\r)/gm," ");var r=r||120,i=t?t.length:0,s="";return i?(n&&(n=" "+n),e.Handlebars.helpers.stripTags(t).length<=r?s=t:(s=e.Handlebars.helpers.stripTags(t),s.length>r&&(s=e.Handlebars.helpers.truncate(s,r.toString(),!1,n))),e.Handlebars.helpers.renderTrustedMarkupWithLineBreaks(s)):s},stripTags:function(e){var t="";return e&&(t=String(e).replace(/<\/?[^>]+>/g,"")),t},photoNote:function(e){return e=e.replace(/(\r\n|\n|\r)/gm,"<p>&nbsp;</p>"),new s.SafeString(e)},canRemoveTag:function(t,n,r,i){return e.Handlebars.helpers.canRemoveAnyTag(t,n,r,null,i)},canRemoveAnyTag:function(e,t,n,r,i){return n||t&&e===t||r&&r===t?i.fn(this):""},formatNumber:function(t){var n=0;try{n="number"!=typeof t?parseInt(t,10):t}catch(e){}return n<1?"":n<1e3?e.Handlebars.helpers.friendlyNumber(n):n<1e6?e.Handlebars.helpers.friendlyNumber(Math.floor(n/100)/10)+"k":e.Handlebars.helpers.friendlyNumber(Math.floor(n/1e5)/10)+"M"},obfuscateInternals:function(e){return e=e.toString(),parseInt(e.split("").map(function(e){return e.charCodeAt(0)}).join(""),10).toString(16)},renderMetaInfo:function(e){return e||"boolean"==typeof e?e.indexOf&&e.indexOf("<")>-1?e:new s.SafeString(e):""},addLinkToHash:function(e){var t=/\s#[^#\s]+/gi,n=/<[\s]*[\/]*[\s]*script[\s]*>/gi,r=/<[^>]*(on[a-zA-Z]+=)[^>]*>/gi,i=/<[\s]*[\/]*[\s]*iframe[\s]*>/gi;return e=e.replace(n,""),e=e.replace(i,""),e=e.replace(r,""),e.replace(t,function(t,n,r){return n>0&&"&"===e.slice(n-1,n)?t:' <a href="/photos/tags/'+t.slice(2)+'">'+t.slice(1)+"</a>"})},isFlipped:function(e,t){var n=t.data.flippers||this.flippers;if(e)return n[e]?t.fn(this):t.inverse(this)},isNotFlipped:function(e,t){var n=t.data.flippers||this.flippers;if(e)return n[e]?t.inverse(this):t.fn(this)},urlPhoto:function(t,n){return e.URLHelper.getPhotoPage({photoId:t.id,pathAlias:t.owner.pathAlias,contextSuffix:n})},getTagSearchUrl:function(e){return"/search/?tags="+e},shortUrlPhoto:function(t,n){return t?e.URLHelper.getShortURL(t.id,n):window.location.href},friendlyDateScrappySubphoto:function(t,n,r,i){var s,a="";return a=r?8===n?"photo-page-scrappy.TAKEN_CIRCA":6===n?"photo-page-scrappy.TAKEN_SOMETIME_IN":4===n?"photo-page-scrappy.TAKEN_IN_MONTH":"photo-page-scrappy.TAKEN_ON_INTL":"photo-page-scrappy.UPLOADED_ON_INTL",s=(function(){return r&&8===n?"granularity"in t&&"year"in t?t.year:t.replace(/^([\d]+)(.*)/g,"$1"):(t instanceof Date||("granularity"in t&&"year"in t?(t=e.moment(t.year+"-"+t.month+"-"+t.day+" "+t.hour+":"+t.minute+":"+t.second,"YYYY-M-D HH:mm:ss"),t.tzOffset&&t.utcOffset(t.tzOffset)):t="string"==typeof t&&t.indexOf("-")>-1?e.moment(t):e.moment(t,"X")),6===n&&r?t.format("YYYY"):t.toDate())})(),i.fn({intlName:a,intlDate:s})},friendlyDate:function(t,n){return 8===n?"Circa "+t.replace(/^([\d]+)(.*)/g,"$1"):(t instanceof Date||(t="string"==typeof t&&t.indexOf("-")>-1?e.moment(t):e.moment(t,"X")),6===n?"Sometime in "+t.format("YYYY"):4===n?t.format("MMMM")+" "+t.format("YYYY"):t.format("MMMM D, YYYY"))},friendlyNumber:function(t){return e.Number.format(t,{thousandsSeparator:","})},friendlyDataSize:function(e){var t,n,r,i,s=["B","KB","MB","GB","TB"],a=parseInt(e,10)||1;return t=Math.ceil(Math.log(a)/Math.LN10),r=Math.floor(t/3),i=a/Math.pow(10,3*r),i=Math.floor(100*i)/100,n=s[r],0===e&&(i=0),i+n},_friendlySinceDate:function(n,r,i){var s=e.moment(n,"X");return 0===s.unix()?t():t(s,r,i)},friendlySinceDate:function(t,n,r,i){return i.fn(e.Handlebars.helpers._friendlySinceDate(t,n,r))},capitalize:function(e){return e[0].toLocaleUpperCase()+e.slice(1)},renderTrustedMarkup:function(e){if(e)return new s.SafeString(e)},randomLine:function(e){var t,n=e.fn(this);return n?(n=n.trim(),"\n"===n[0]&&(n=n.slice(1)),"\n"===n[n.length-1]&&(n=n.slice(0,n.length-1)),t=n.split("\n"),t[Math.floor(t.length*Math.random())]):"\x3c!-- no lines to return --\x3e"},configVal:function(e,t){return void 0!==t&&e&&r[e]?(r._index=r._index||{},r._index[e]||(r._index[e]=r[e].reduce(function(e,t){return e[t.value+""]=t.text,e},{})),r._index[e][t+""]||""):""},eachConfigVal:function(e,t){return(r[e]||[]).map(function(e){return t.fn(e)}).join("")},safetyLevelString:function(e,t){for(var n=0;n<r.safetyLevel.length;n++)if(e.toString()===r.safetyLevel[n].value)return t.fn(r.safetyLevel[n])},privacyString:function(e,t){for(var n=0;n<r.privacy.length;n++)if(e===r.privacy[n].value)return t.fn(r.privacy[n])},licenseString:function(e,t){for(var n=0;n<r.licenseDisplay.length;n++)if(e.toString()===r.licenseDisplay[n].value)return t.fn(r.licenseDisplay[n])},truncate:function(e,t,n,r,s){return i.truncate(e,t,{respectWords:!1!==n,ellipsis:"string"==typeof r?r:"...",escape:void 0===s||s})},json:function(e){var t;return"object"==typeof e?(t=JSON.stringify(e,null,""),t.indexOf("\u2028")>-1&&(t=t.replace(/\u2028/g,"\\u2028")),t.indexOf("\u2029")>-1&&(t=t.replace(/\u2029/g,"\\u2029")),t=t.replace(/\//g,"\\/")):t="{}",new s.SafeString(t)},ifCond:function(e,t,n,r){switch(t){case"===":return e===n?r.fn(this):r.inverse(this);case"!==":return e!==n?r.fn(this):r.inverse(this);case"<":return e<n?r.fn(this):r.inverse(this);case"<=":return e<=n?r.fn(this):r.inverse(this);case">":return e>n?r.fn(this):r.inverse(this);case">=":return e>=n?r.fn(this):r.inverse(this);case"in":return(n+"").trim().replace(/\s*[,;]\s*/,",").split(/[,;]/).indexOf(e)>=0?r.fn(this):r.inverse(this);case"||":return e||n?r.fn(this):r.inverse(this);case"&&":return e&&n?r.fn(this):r.inverse(this);default:return r.inverse(this)}},fallback:function(e,t,n){return null===e||void 0===e||""===e?t:e},for:function(e,t,n,r){var i,s="";for(i=e;i<t;i+=n)s+=r.fn(i);return s},log:function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];console[YUI.Env.isServer?"warn":"log"].apply(console,Array.prototype.slice.call(e,0,e.length-1))},protocol:function(){return e.config.flickr.url.protocol},host:function(){return e.config.flickr.url.host},assetRoot:function(){return e.config.flickr.urls.assetRoot},godMessage:function(t){return e.godMessage(t.hash)},chainHelpers:function(){for(var e,t,n=new Array(arguments.length),r=0;r<n.length;++r)n[r]=arguments[r];return e=n.shift(),n.forEach(function(n){"string"==typeof n&&(t=n.split(" "),e=a[t.shift()].apply(null,[e].concat(t)))}),e},multiHighlightString:function(e,t,n){var r,i,a,o,l="",u=0,c=!1;for(e=e||"",t=t||[],e=s.Utils.escapeExpression(e),t=t.sort(function(e,t){return e.end-t.end}),o=0,r=e.length,i=t.length;o<i;o++){for(a=t[o],c=!1;u<a.start&&u<r;)l+=e[u++];for(u<a.end&&(l+='<span class="'+n+'">',c=!0);u<a.end&&u<r;)l+=e[u++];c&&(l+="</span>")}for(;u<r;)l+=e[u++];return new s.SafeString(l)},ifDefined:function(e,t){return void 0===e?t.inverse(this):t.fn(this)},spaceball:function(){return"https://s.yimg.com/pw/images/spaceball.gif"},eq:function(e,t){return e===t},ne:function(e,t){return e!==t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t},lt:function(e,t){return e<t},lte:function(e,t){return e<=t},not:function(e){return!e},and:function(){return Array.prototype.every.call(arguments,Boolean)},or:function(){return Array.prototype.some.call(arguments,Boolean)},formatRequestID:function(t){return e.moment().utc().format()+"-"+t+"@"+(YUI.Env.isServer?"server":"client")}};for(n in a)e.Handlebars.registerHelper(n,a[n]);e.config.global.HandlebarsHelperIntl.registerWith(e.Handlebars),i={truncate:function(e,t,n){return e||(e=""),n||(n={}),e.length>t&&(e=n.respectWords?e.substr(0,t+1).split(/([^\w])/).reduce(function(e,n){return e.length+n.length>t-1?e:e+=n},""):e.substr(0,t-1),e+=n.ellipsis),n.escape?e:new s.SafeString(e)}},r={safetyLevel:[{value:"0",text:"Safe",key:"settings.SAFE"},{value:"1",text:"Moderate",key:"settings.MODERATE"},{value:"2",text:"Restricted",key:"settings.RESTRICTED"}],privacy:[{value:"public",text:"Public",key:"settings.PUBLIC"},{value:"private",text:"Private",key:"settings.PRIVATE"},{value:"friends",text:"Friends",key:"settings.FRIENDS"},{value:"family",text:"Family",key:"settings.FAMILY"},{value:"friendsandfamily",text:"Friends & Family",key:"settings.FRIENDS_AND_FAMILY"}],commentingPermission:[{value:"0",text:"Only you",key:"settings.ONLY_YOU"},{value:"1",text:"Friends & Family",key:"settings.FRIENDS_AND_FAMILY"},{value:"2",text:"People you follow",key:"settings.PEOPLE_YOU_FOLLOW"},{value:"3",text:"Any Flickr member",key:"settings.ANY_FLICKR_MEMBER"}],metaPermission:[{value:"0",text:"Only you",key:"settings.ONLY_YOU"},{value:"1",text:"Friends & Family",key:"settings.FRIENDS_AND_FAMILY"},{value:"2",text:"People you follow",key:"settings.PEOPLE_YOU_FOLLOW"},{value:"3",text:"Any Flickr member",key:"settings.ANY_FLICKR_MEMBER"}],licenseDisplay:[{value:"0",text:"All rights reserved",key:"settings.ALL_RIGHTS_RESERVED"},{value:"10",text:"Public Domain Work",key:"settings.PUBLIC_DOMAIN_WORK"},{value:"9",text:"Public Domain Dedication (CC0)",key:"settings.PUBLIC_DOMAIN_DEDICATION"},{value:"4",text:"Attribution",key:"settings.ATTRIBUTION"},{value:"5",text:"Attribution-ShareAlike",key:"settings.ATTRIBUTION_SHAREALIKE"},{value:"6",text:"Attribution-NoDerivs",key:"settings.ATTRIBUTION_NODERIVS"},{value:"2",text:"Attribution-NonCommercial",key:"settings.ATTRIBUTION_NONCOMMERCIAL"},{value:"1",text:"Attribution-NonCommercial-ShareAlike",key:"settings.ATTRIBUTION_NONCOMMERCIAL_SHAREALIKE"},{value:"3",text:"Attribution-NonCommercial-NoDerivs",key:"settings.ATTRIBUTION_NONCOMMERCIAL_NODERIVS"},{value:"7",text:"No known copyright restrictions",key:"settings.NO_COPYRIGHT_RESTRICTIONS"},{value:"8",text:"United States government work",key:"settings.US_GOV_WORK"}],licenseSelect:[{value:"0",text:"All rights reserved",key:"settings.ALL_RIGHTS_RESERVED"},{value:"10",text:"Public Domain Work",key:"settings.PUBLIC_DOMAIN_WORK"},{value:"9",text:"Public Domain Dedication (CC0)",key:"settings.PUBLIC_DOMAIN_DEDICATION"},{value:"4",text:"Attribution",key:"settings.ATTRIBUTION"},{value:"5",text:"Attribution-ShareAlike",key:"settings.ATTRIBUTION_SHAREALIKE"},{value:"6",text:"Attribution-NoDerivs",key:"settings.ATTRIBUTION_NODERIVS"},{value:"2",text:"Attribution-NonCommercial",key:"settings.ATTRIBUTION_NONCOMMERCIAL"},{value:"1",text:"Attribution-NonCommercial-ShareAlike",key:"settings.ATTRIBUTION_NONCOMMERCIAL_SHAREALIKE"},{value:"3",text:"Attribution-NonCommercial-NoDerivs",key:"settings.ATTRIBUTION_NONCOMMERCIAL_NODERIVS"}],licenseUrls:[{value:"0",text:"https://help.yahoo.com/kb/flickr/SLN25525.html?impressions=true"},{value:"1",text:"https://creativecommons.org/licenses/by-nc-sa/2.0/"},{value:"2",text:"https://creativecommons.org/licenses/by-nc/2.0/"},{value:"3",text:"https://creativecommons.org/licenses/by-nc-nd/2.0/"},{value:"4",text:"https://creativecommons.org/licenses/by/2.0/"},{value:"5",text:"https://creativecommons.org/licenses/by-sa/2.0/"},{value:"6",text:"https://creativecommons.org/licenses/by-nd/2.0/"},{value:"7",text:"/commons/usage/"},{value:"8",text:"http://www.usa.gov/copyright.shtml"},{value:"9",text:"https://creativecommons.org/publicdomain/zero/1.0/"},{value:"10",text:"https://creativecommons.org/publicdomain/mark/1.0/"}],addMetaPermission:[{value:"0",text:"Only you",key:"settings.ONLY_YOU"},{value:"1",text:"Friends & Family",key:"settings.FRIENDS_AND_FAMILY"},{value:"2",text:"People you follow",key:"settings.PEOPLE_YOU_FOLLOW"},{value:"3",text:"Any Flickr member",key:"settings.ANY_FLICKR_MEMBER"}]}},"@VERSION@",{requires:["handlebars-base","url-helper","moment","datatype-number","flipper","handlebars-helper-intl","god-message"]});
YUI.add("localizable",function(n,e){var t=n.config.global.IntlMessageFormat,a=function(){var n={};return function(e,t){var a=e.join(".");return n.hasOwnProperty(a)?n[a]:n[a]=t()}},r=a(),l=a(),s=function(e,t,a){var l={};return n.Array.each(e,function(n){l[n]=r([t,n],function(){return i(n,t,a)})}),l},i=function(e,a,r){var s=n.Intl.get("hermes/"+e,null,a);return n.Object.each(s,function(n,i){s[i]=l([a,e,i],function(){return new t(n,a,r)})}),s};n.Localizable={appContext:{},langBundles:[],langFormatters:{date:{monthYear:{month:"long",year:"numeric"},monthYearShort:{month:"short",year:"numeric"},month:{month:"long"},year:{year:"numeric"}},number:{USD:{style:"currency",currency:"USD"}}},defaultLang:n.config.lang,getLang:function(){return this.appContext.lang||this.defaultLang},getLangBundles:function(){return s(this.langBundles,this.getLang(),this.langFormatters)},intlMessage:function(e){var t=this.getLangBundles();return t.locales=this.getLang(),n.Handlebars.helpers.intlMessage({hash:e,data:{intl:t}})},intlHTMLMessage:function(e){var t=this.getLangBundles();return t.locales=this.getLang(),n.Handlebars.helpers.intlMessage({hash:e,data:{intl:t}})}}},"@VERSION@",{requires:["handlebars-base","handlebars-helpers","intl-messageformat"]});
YUI.add("experiments-fullscreen",function(e){var t;t=function(e){this.flipper=e.flipper,this.appContext=e},t.prototype.disableRealFullscreenButtons=function(){return!this.mode},t.prototype.getMode=function(){return this.mode},t.prototype.enableFullscreen=function(){this.mode=!0},t.prototype.disableFullscreen=function(){this.mode=!1},e.namespace("Experiments").Fullscreen=t},"@VERSION@",{requires:[]});
YUI.add("experiments-opt-out",function(t,e){var p,i=require("lib/flog")(e);p=function(t){this.appContext=t,this.optOutEnabled=void 0},p.prototype.enabled=function(){var t=this.appContext.flipper.isFlipped("reboot_photo_page_optin_type");if(void 0===this.optOutEnabled){if(!this.appContext.flipper.isFlipped("buckets"))return this.optOutEnabled=!0,i.log("Buckets not flipped; optOutEnabled is true"),this.optOutEnabled;switch(t){case"optin":this.optOutEnabled=!0;break;case"forced_in":this.optOutEnabled=!1;break;default:this.optOutEnabled=!0}}return this.optOutEnabled},t.namespace("Experiments").OptOut=p},"@VERSION@",{requires:[]});
YUI.add("murmurhash",function(h){function r(h,r){var a,e,t,c,o,d,n,u;for(a=3&h.length,e=h.length-a,t=r,o=3432918353,d=461845907,u=0;u<e;)n=255&h.charCodeAt(u)|(255&h.charCodeAt(++u))<<8|(255&h.charCodeAt(++u))<<16|(255&h.charCodeAt(++u))<<24,++u,n=(65535&n)*o+(((n>>>16)*o&65535)<<16)&4294967295,n=n<<15|n>>>17,n=(65535&n)*d+(((n>>>16)*d&65535)<<16)&4294967295,t^=n,t=t<<13|t>>>19,c=5*(65535&t)+((5*(t>>>16)&65535)<<16)&4294967295,t=27492+(65535&c)+((58964+(c>>>16)&65535)<<16);switch(n=0,a){case 3:n^=(255&h.charCodeAt(u+2))<<16;case 2:n^=(255&h.charCodeAt(u+1))<<8;case 1:n^=255&h.charCodeAt(u),n=(65535&n)*o+(((n>>>16)*o&65535)<<16)&4294967295,n=n<<15|n>>>17,n=(65535&n)*d+(((n>>>16)*d&65535)<<16)&4294967295,t^=n}return t^=h.length,t^=t>>>16,t=2246822507*(65535&t)+((2246822507*(t>>>16)&65535)<<16)&4294967295,t^=t>>>13,t=3266489909*(65535&t)+((3266489909*(t>>>16)&65535)<<16)&4294967295,(t^=t>>>16)>>>0}h.murmurhash=r},"@VERSION@");
YUI.add("moola-manager",function(e,t){"use strict";function o(e,t){this.initialAdShown=!1,this.adCouldBeShown=!1,this.dwellTime=0,this.isUpsell=!1,this.isFetching=!1,this.contextOwnerIsPro=!1,this.origin={},this.context={},this.preloaded=!1,this.timeoutID=0,this.adCallsCounter=0,this.currentlyShowingAd=!1,this.fetchingPhotoAd=!1,this.adPosition=1,e&&t?(this.referrer=e,this.appContext=t):i.error("Attempt to instantiate moola-manager without appContext/referrer")}var i=require("lib/flog")(t);o.prototype.markAdAsSeen=function(){this.initialAdShown=!0,this.resetPhotoAdsCounter(),this.adCallsCounter--},o.prototype.beaconDwellTime=function(){var t=Date.now()-this.dwellTime;this.dwellTime=0,e.rapidTracker.beacon(this.name,"adDwellTime",{dwell:t})},o.prototype.adIsUnloading=function(){this.beaconDwellTime(),clearTimeout(this.timeoutID),this.currentlyShowingAd=!1},o.prototype.adIsLoading=function(){this.currentlyShowingAd=!0},o.prototype.isEnabled=function(){return!this.appContext.forceServerRender&&!this.appContext.flipper.isFlipped("moola_killswitch")&&!this.appContext.getViewer().signedIn},o.prototype.adNext=function(){var t,o,i,r,n,s,a,l;return!(YUI.Env.isServer||!this.context.current)&&(this.adPosition++,t=this.isEnabled(),o=this.adCouldBeShown,n=this.enoughPhotoViewsAccrued(),i=this.contextOwnerIsPro,s=!this.isUpsell,r=!s||this.preloaded,a=this.adjacentPhotosAreAdFriendly(),l=this.referrerIsBlacklisted(),t&&o&&n&&!i&&a&&!l&&e.rapidTracker.beacon(this.name,"adSlotAvailable"),t&&o&&!i&&r&&n&&a&&!l)},o.prototype.resetPhotoAdsCounter=function(){e.Cookie.set("adCounter",0,{path:"/",domain:"flickr.com"})},o.prototype.enoughPhotoViewsAccrued=function(){var t=e.Cookie.get("adCounter",Number),o=this.getThreshold();return(t=t||0)>=o},o.prototype.enoughPhotoViewsToPrefetchAd=function(){var t=e.Cookie.get("adCounter",Number),o=this.getThreshold();return t=t||0,o-t<=e.config.flickr.moola.prefetch_threshold},o.prototype.adjacentPhotosAreAdFriendly=function(){return"next"===this.origin.arrow?this.context.next.adFriendly&&this.context.current.adFriendly:this.context.previous.adFriendly&&this.context.current.adFriendly},o.prototype.referrerIsBlacklisted=function(){var e=[];return this.appContext.getViewer().signedIn||e.push("/"),e.indexOf(this.appContext.getPreviousURL())>-1},o.prototype.setAdCouldBeShown=function(e,t,o){void 0===e&&(e=!1),t&&o?(this.origin.arrow=t,this.origin.url=o):e&&(i.error("Attempt to schedule an ad without setting nav direction or URL"),e=!1),this.adCouldBeShown=e},o.prototype.updateContext=function(t){var o,i=["photostream-models","set-models","photoList-models"];this.contextOwnerIsPro=!1,(-1!==e.Array.indexOf(i,t.type)||/^\/search\/\?.+=[0-9]+@N[0-9]{2}.*/.test(t.entryURL))&&(o=t.current.getValue("owner"))&&(this.contextOwnerIsPro=o.getValue("isPro")),this.context.previous=this.extractKeyDataFromPhotoModel(t.prev),this.context.current=this.extractKeyDataFromPhotoModel(t.current),this.context.next=this.extractKeyDataFromPhotoModel(t.next)},o.prototype.getThreshold=function(){var t;try{t=this.initialAdShown?e.config.flickr.moola.threshold[this.referrer].subsequent:e.config.flickr.moola.threshold[this.referrer].initial}catch(e){i.error("There is no matching value for referrer in the ad/referrer config",{referrer:this.referrer,err:e}),t=100}return t},o.prototype.fetchAdIfRequired=function(){this.isFetching||(this.isUpsell?(this.isFetching=!0,this.preloadAd()):!this.preloaded&&this.adCallsCounter<e.config.flickr.moola.number_of_ad_calls&&this.enoughPhotoViewsToPrefetchAd()&&(this.isFetching=!0,this.adCallsCounter++,this.preloadAd(),this.checkIfAdBlock()))},o.prototype.updatePhotoAdsCounter=function(){var t=e.Cookie.get("adCounter",Number);return t=t||0,e.Cookie.set("adCounter",++t,{path:"/",domain:"flickr.com"}),t},o.prototype.extractKeyDataFromPhotoModel=function(e){var t={};return e&&(t={adFriendly:0===e.getValue("safetyLevel"),url:this.getBackgroundImage(e),link:e.getValue("url")}),t},o.prototype.getBackgroundImage=function(e){var t,o,i,r={height:40,width:101};return o=this.appContext.getViewer().getPixelRatio(),t={width:r.width*o,height:r.height*o},i={cropToFit:!0,includeSizes:["sq","t","q","s","n"]},e.getSizeToFit(t,i).url},o.prototype.preloadAd=function(t){var o,i,r,n,s,a,l=this,h=e.one("#preloaded-ad-frame");h||(h=e.Node.create("<div>"),h.setAttribute("id","preloaded-ad-frame"),e.one("body").appendChild(h)),o=function(){a.remove(!0),s=e.Node.create("<a>"),s.setAttribute("id","pro-upsell-image"),s.setAttribute("href","https://www.flickr.com/account/upgrade/pro"),s.setAttribute("target","_blank"),n=new Image,n.src=e.config.flickr.urls.assetRoot+"/images/general/pro-upsell.jpg",n.style.width="480px",s.appendChild(n),h.appendChild(s),h.setStyles({marginLeft:"-240px",marginTop:"-395px",transition:"opacity 0.25s",opacity:0}),a.setAttribute("width",240),a.setAttribute("height",240)},setTimeout(function(){l.isUpsell&&(h.one("#pro-upsell-image")||o())},2e3),r=function(e){var t={};"https://y-flickr.yahoo.com"===e.origin&&(e.data.split("&").map(function(e){var o=e.split("=");t[o[0]]=o[1]}),"true"===t.no_ad?o():(l.isUpsell=!1,"MAST"===t.position?(h.setStyles({marginLeft:"-485px",marginTop:"-280px"}),a.setAttribute("width",970),a.setAttribute("height",250)):(h.setStyles({marginLeft:"-150px",marginTop:"-280px"}),a.setAttribute("width",300),a.setAttribute("height",250)),h.setStyle("opacity",0)))},a=h.get("children").item(0),this.isUpsell?o():a?(a=e.Node(a),a.setAttribute("src",e.config.flickr.moola.endpoint)):(i=e.one("#pro-upsell-image"),i&&i.remove(!0),e.config.win.removeEventListener("message",r,!1),a=e.Node.create("<iframe>"),a.on("load",function(){l.preloaded=!0,l.isFetching=!1}),e.config.win.addEventListener("message",r,!1),a.setAttribute("scrolling","no"),a.setAttribute("src",e.config.flickr.moola.endpoint),h.appendChild(a))},o.prototype.checkIfAdBlock=function(){var t,o=this;t=e.Node.create("<div>"),t.setHTML("&nbsp;"),t.addClass("adsbox"),e.one("body").appendChild(t),setTimeout(function(){o.preloaded=!0,o.isFetching=!1,0===t.get("offsetHeight")&&(o.isUpsell=!0),t.remove(!0)},100)},o.prototype.isUpsell=function(){return this.isUpsell||!1},o.prototype.hideAd=function(){var t,o=e.one("#preloaded-ad-frame");o&&(o.setStyles({top:"initial",left:"initial",opacity:0}),t=e.one("#pro-upsell-image"),this.isUpsell&&t&&t.setStyle("display","none"))},o.prototype.showAd=function(){var t,o=e.one("#preloaded-ad-frame");this.preloaded=!1,o&&(o.setStyles({top:"50%",left:"50%",opacity:1}),t=e.one("#pro-upsell-image"),this.isUpsell&&t&&t.setStyle("display","block"))},e.namespace("AdManager"),e.AdManager=o},"@VERSION@",{requires:["cookie","io-base","json-parse","murmurhash","url"]});
YUI.add("viewport-data",function(t){"use strict";var i=function(i){var e,o,n,r=this;r.appContext=i,e=i.getCookie("vp"),e&&(o=e.split(","),o.length>4?(this.containerWidths=o.slice(4),this.containerWidths=this.containerWidths.map(function(t){return n=t.split(":"),{name:n[0],width:n[1]}})):this.containerWidths=[]),YUI.Env.isServer?e?(this.viewport={width:parseInt(o[0],10),height:parseInt(o[1],10)},this.density=o[2]?parseFloat(o[2]):1,this.scrollbarWidth=o[3]?parseInt(o[3],10):16):(this.viewport={width:0,height:0},this.density=1,this.scrollbarWidth=16,this.containerWidths=[]):(t.config.win&&(r.density=t.config.win.devicePixelRatio||1,r.scrollbarWidth=t.OverflowHelper.detectScrollbarSize(t.one("body"))),r.setCookieWithCurrentViewportRegion(),r.containerWidths||(r.containerWidths=[]),t.globalEvents.subscribe("window:resize",function(t){r.setCookieWithCurrentViewportRegion()}))};i.VIEWPORT_COOKIE_NAME="vp",i.MAX_NUM_CONTAINER_WIDTHS=20,i.prototype.setCookie=function(){var i,e;!this.viewport.width||this.viewport.width<0||!this.viewport.height||this.viewport.height<0||(i=this.viewport.width+","+this.viewport.height+","+this.density+","+this.scrollbarWidth,t.Lang.isArray(this.containerWidths)&&(e=this.containerWidths.reduce(function(t,i,e,o){return t+=i.name+":"+i.width,e<o.length-1&&(t+=","),t},""))&&(i=i+","+e),this.appContext.setCookie({cookieName:"vp",cookieValue:i,path:"/",expiresMonthsFromNow:1}))},i.prototype.setCookieWithCurrentViewportRegion=function(){this.viewport=t.DOM.viewportRegion(),this.setCookie()},i.prototype.getWidth=function(){return this.viewport.width},i.prototype.getHeight=function(){return this.viewport.height},i.prototype.getDevicePixelRatio=function(){return this.density},i.prototype.getScrollbarWidth=function(){return this.scrollbarWidth},i.prototype.getCommonMobileViewportWidth=function(){return 320},i.prototype.getContainerWidth=function(t){var i=0;return this.containerWidths.some(function(e){if(e.name===t)return i=parseInt(e.width,10),!0}),i},i.prototype.setContainerWidth=function(t,e){var o;this.containerWidths.length>=i.MAX_NUM_CONTAINER_WIDTHS&&(this.containerWidths=this.containerWidths.slice(this.containerWidths.length-i.MAX_NUM_CONTAINER_WIDTHS+1)),o=this.containerWidths.some(function(i){if(i.name===t)return i.width=e,!0}),o||this.containerWidths.push({name:t,width:e}),this.setCookie()},t.ViewportData=i},"@VERSION@");
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("querystring-parse-simple",function(e,t){var n=e.namespace("QueryString");n.parse=function(e,t,r){t=t||"&",r=r||"=";for(var i={},s=0,o=e.split(t),u=o.length,a;s<u;s++)a=o[s].split(r),a.length>0&&(i[n.unescape(a.shift())]=n.unescape(a.join(r)));return i},n.unescape=function(e){return decodeURIComponent(e.replace(/\+/g," "))}},"3.16.0",{requires:["yui-base"]});
YUI.add("browser-support",function(e,r){var o=new RegExp(["UP\\.Link","UP\\.Browser","Profile\\/MIDP-","MMP\\/","NetFront","BlackBerry","Danger hiptop","Windows CE","MMP\\/","MIDP","Palm","Nokia","Symbian","iPhone","iPod","Android.+Mobile","Mobile.+Firefox","BB10.+Mobile","webOS","SAMSUNG.+Mobile Safari","SEC_.+Mobile Safari","Google Page Speed Insights.+Mobile"].join("|"),"i"),i=new RegExp(["Google Page Speed Insights"].join("|"),"i"),n=new RegExp(["Edge"].join("|"),"i"),t=["facebot","facebook","facebookexternalhit","twitterbot","twitter","pinterest"],s=["bot","crawl","slurp","spider"],a=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i,u="Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 10.0; WOW64; Trident/7.0; .NET4.0C; .NET4.0E; .NET CLR 2.0.50727; .NET CLR 3.0.30729; .NET CLR 3.5.30729)",c=function(e){var r;try{r=YUI.Env.parseUA(e)}catch(e){}return r&&r.userAgent?r.userAgent.toLowerCase():""},p=function(e,r){var o,i=!1;if(void 0===e||""===e)return!0;if(r)for(o in r)void 0!==r[o]&&!isNaN(r[o])&&r[o]>0&&(i=!0);return!i};e.mix(e.namespace("BrowserSupport"),{isUnsupportedBrowser:function(e){var r,o=!1;try{r=YUI.Env.parseUA(e)}catch(e){}return!p(e,r)&&(r.safari>=536||r.chrome>=20||r.gecko>=24||r.opera>=15||"android"===r.os||"ios"===r.os&&r.ios>=6||r.ie>=10||(o=!0),i.test(r.userAgent)&&(o=!1),e!==u&&o)},isReallyUnsupportedBrowser:function(e){var r,o=!1;try{r=YUI.Env.parseUA(e)}catch(e){}return!p(e,r)&&(r.safari>=533.21||r.chrome>=13||r.gecko>=2||(e||"").indexOf("Firefox/4.0")>-1||r.opera>=12||"android"===r.os||"ios"===r.os&&r.ios>=4||r.ie>=9||(o=!0),e!==u&&o)},isMobileBrowser:function(e){try{var r=YUI.Env.parseUA(e);return!r.ipad&&((!r.mobile||!/Nexus 10/.test(r.userAgent))&&(!!r.mobile||o.test(r.userAgent)))}catch(e){}return!1},isMobileOrTablet:function(e){try{var r=YUI.Env.parseUA(e);return!!r.mobile||o.test(r.userAgent)}catch(e){}return!1},isBot:function(e){var r,o=!1;return r=c(e),s.some(function(e){return r.indexOf(e)>-1&&(o=!0,!0)}),o},isSharingBot:function(e){var r,o=!1;return r=c(e),t.some(function(e){return r.indexOf(e)>-1&&(o=!0,!0)}),o},isFacebook:function(e){var r,o=!1;return r=c(e),r.indexOf("facebookexternalhit/1.1")>-1&&(o=!0),o},getOSString:function(e){var r,o="";try{r=YUI.Env.parseUA(e)}catch(e){}return e&&e.indexOf("Windows Phone")>-1?o="windows":r&&r.os&&(o=r.os.toLowerCase()),o},isWebview:function(e){return a.test(e)},isGooglePageSpeedToolMobile:function(e){return new RegExp("Google Page Speed Insights.+Mobile").test(e)},isGooglePageSpeedToolDesktop:function(e){return new RegExp("Google Page Speed Insights").test(e)},isEdge:function(e){return new RegExp(n).test(e)}})},"@VERSION@",{requires:[]});
YUI.add("healthjs",function(e,n){"undefined"!=typeof window?(!(function e(n,t,o){function i(s,u){if(!t[s]){if(!n[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=t[s]={exports:{}};n[s][0].call(h.exports,function(e){var t=n[s][1][e];return i(t||e)},h,h.exports,e,n,t,o)}return t[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i})({1:[function(e,n,t){var o=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];n.exports=function(e){var n,t=-1,i=e.length;for(n=0;n<i;n++)t=t>>>8^o[255&(t^e.charCodeAt(n))];return t=t>0?Math.abs(t-4294967295):Math.abs(-1^t),t.toString(16)}},{}],2:[function(e,n,t){function o(e){if(!(this instanceof o))return new o(e);if(e=e||{},!e.postEndpoint)throw new Error(r+"Constructor needs an endpoint.");this.queued=[],this.pendingFlush=void 0,this.avoidDuplicates=!1,this.maxPerCall=e.maxPerCall||10,this.flushDelay=e.flushDelay||1e3,this.postEndpoint=e.postEndpoint}var i=e("./checksum"),r="[healthjs client] - ",s=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],u=function(){for(var e=!1,n=0;n<s.length;n++){try{e=s[n]()}catch(e){continue}break}return e},a=function(e,n,t){var o=u();o&&(o.open("POST",e,!0),o.setRequestHeader("Content-Type","application/json"),o.onreadystatechange=function(){4===o.readyState&&200!==o.status&&t(o.responseText)},o.send(n))};o.prototype={beacon:function(e,n){this.queued.push({action:e,metadata:n}),this.pendingFlush||(this.pendingFlush=setTimeout(this.flushQueue.bind(this),this.flushDelay)),this.queued.length>=this.maxPerCall&&this.flushQueue({force:!this.pendingFlush})},flushQueue:function(e){if(e=e||{},this.pendingFlush||e.force){this.pendingFlush&&(clearTimeout(this.pendingFlush),this.pendingFlush=void 0);for(var n,t,o=[],i=this.queued,r=i.length,s=0;s<r;s++){var u=i[s];o.push({a:u.action,m:u.metadata})}n=(new Date).getTime()+"",t=this.makeChecksum({beacons:o,d:n}),this.queued=[];try{this.doPostBeacon({beacons:o,d:n,c:t},e)}catch(i){this.doPixelBeacon(o,n,t,e)}}},doPostBeacon:function(e,n){var t=this;a(this.postEndpoint,JSON.stringify(e),function(o){if(o)return void t.doPixelBeacon(e.beacons,e.d,e.c,n)})},doPixelBeacon:function(e,n,t,o){var i,r=new Image;i=this.postEndpoint+"?"+this.jsonToQueryString({beacons:JSON.stringify(e)})+"&d="+encodeURIComponent(n)+"&c="+encodeURIComponent(t),o.callback&&(r.onload=r.onerror=o.callback),r.src=i},makeChecksum:function(e){var n=JSON.stringify(e);return i(n)},jsonToQueryString:function(e){for(var n=Object.keys(e),t=n.length,o=[],i=0;i<t;i++)o.push(encodeURIComponent(n[i])+"="+encodeURIComponent(e[n[i]]));return o.join("&")}},n.exports=o,(function(e){e.Health=o})("undefined"!=typeof window?window:this)},{"./checksum":1}]},{},[2]),e.Health=window.Health(e.config.flickr.healthjs)):e.Health=require("health-beaconer").serverBeaconing},"@VERSION@");
YUI.add("app-context",function(e,i){var t,n=require("lib/flog")(i),o=YUI.Env.isServer?e.config.flickr.api.server_default_timeout:e.config.flickr.api.client_default_timeout,r=YUI.Env.isServer?e.config.flickr.api.server_retry_timeout:e.config.flickr.api.client_retry_timeout,s=[117,118,119],a=new RegExp(e.config.flickr.api.write_api_method_regex),l=e.config.flickr.model_eviction,c={};t=e.AppContext=function(i){i=i||{},i.request&&(this.request=i.request),this.params={},this._initializeParams(i),this.viewTiming={},this.modelRegistries={},this.modelImportExport=new e.ModelImportExport(this),this.flickrAPI=new e.FlickrAPI(this.request,this),this.auth=i.auth,this.flapp=i.flapp,this.writeAPICallsMadeOnThisPage={},this._moduleInstances={},this._pendingYUIPromises={},this._loadedViews={},this._apiCalls={},this._previousLocation=null,this._uploadInProgress=!1,this._pendingUploadErrorModal=null,this._concurrentAPICalls=0,this._apiQueueOrder=[],this._apiQueueFunctions={},this._preliminaryNsid=null,this.flipper=new e.Flipper(i.flipper),this.experiments={fullscreen:new e.Experiments.Fullscreen(this),optOut:new e.Experiments.OptOut(this)},this.secure=this.normalizedProtocol&&"https"===this.normalizedProtocol,this.adManager=new e.AdManager(this.params.referrer,this),this.viewportData=new e.ViewportData(this),this.clientId="f"+Math.round(1e4*Math.random()).toString(36),this.initGlobalEvictionExemptionConfig()},t.getValidParams=function(){return["bucket","normalizedProtocol","buckets","slice","random_slice","referrer","flipper","lang","gp_code","gp_owner","share_code"]},t.prototype={routeConfig:{},_initializeParams:function(e){var i=this;t.getValidParams().forEach(function(t){e.request&&t in e.request&&(e[t]=e.request[t]),t in e&&(i[t]=e[t],i.params[t]=e[t])})},instantiateYUIModule:function(i,t){if(!e.Lang.isString(i)||!e.Lang.isFunction(t))return e.Promise.reject("[app-context] `instantiateYUIModule` called without a `name` or `initializer`.");var n,o=this,r=this._moduleInstances,s=this._pendingYUIPromises;return s[i]||(r[i]?s[i]=e.Promise.resolve(r[i]):(n=YUI.Env.isServer?o.request.app.yui:e,s[i]=e.betterUse(i,n).then(function(){var e=t();return r[i]=e,delete s[i],e}))),s[i]},getModelRegistry:function(i){if(!e.Lang.isString(i))return e.Promise.reject("[app-context] `getModelRegistry` called without a `name`.");var t,o=this;return this.instantiateYUIModule(i,function(r){if(!e.Models||!e.Models[i]||"function"!=typeof e.Models[i])throw n.error("There was an error loading the modelregistry",{status:r}),e.fletrics.increment("appContext.getmodelregistry.failures"),t=new Error("[app-context] - Model registry failed to load:"+i),t.moduleLoadingError=!0,t;var s=new e.Models[i](o);return o.modelRegistries[i]=s,s})},getModel:function(i,t,n){return e.Lang.isString(i)&&t?this.getModelRegistry(i).then(function(i){var o;return this._refetchExistingModels&&(o=e.Lang.isObject(t,!0)?i.attributeSearch(t):[t],o.forEach(function(e){this.canEvictModel(i,e)&&this.evictModel(i,e)}.bind(this))),i.get(t,n)}.bind(this)):e.Promise.reject("[app-context] `getModelRegistry` called without a `registryName` or `modelId`.")},markAsNewlyFetched:function(e,i){this._refetchExistingModels&&(this._refetchedModels[e]||(this._refetchedModels[e]={}),this._refetchedModels[e][i]=!0)},getRoute:function(i){var t,o=this;return this.instantiateYUIModule(i,function(r){if(!e.Routes||!e.Routes[i]||"function"!=typeof e.Routes[i])throw n.error("There was an error loading the route",{status:r}),e.fletrics.increment("appContext.getroute.failures"),t=new Error("[app-context] - Route failed to load:"+i),t.moduleLoadingError=!0,t;return new e.Routes[i](o)})},getView:function(i,t,o){var r,s=this,a=YUI.Env.isServer?s.request.app.yui:e,l=[i];return t=t||{},t.appContext=s,e.betterUse(l,a).then(function(o){if(!e.Views||!e.Views[i]||"function"!=typeof e.Views[i])throw n.error("There was an error loading the view",{status:o}),e.fletrics.increment("appContext.getview.failures"),r=new Error("[app-context] - View failed to load:"+i),r.moduleLoadingError=!0,r;return s._loadedViews[i]=!0,new e.Views[i](t)})},getLoadedViews:function(){return Object.keys(this._loadedViews)},setGPCredentials:function(e){var i=this;null===e?(delete i.params.gp_owner,delete i.params.gp_code,delete i.params.share_code,delete c.gp_owner,delete c.gp_code,delete c.share_code,n.info("Setting GP credentials to null")):null!==e&&e.gp_code&&(i.params.gp_owner=e.gp_owner,i.params.gp_code=e.gp_code,i.params.share_code=e.share_code,c.gp_owner=e.gp_owner,c.gp_code=e.gp_code,c.share_code=e.share_code,n.info("Setting GP credentials to "+e.share_code))},getCookie:function(i){return YUI.Env.isServer?this.request.cookies[escape(i)]:e.Cookie.get(i)},setCookie:function(i){if(YUI.Env.isServer)n.warn("You can't set a cookie from the server with AppContext -- use middleware.",i);else{i.cookieName&&void 0!==i.cookieValue&&i.path||n.error("Missing important parameters to set a cookie");var t=i.cookieName,o=i.cookieValue,r=i.domain||".flickr.com",s=i.path,a=i.expiresMonthsFromNow||3,l=i.expires?i.expires:e.moment().add(a,"months").toDate();i.remove&&e.Cookie.remove(t,{domain:i.domain||".flickr.com",path:s}),e.Cookie.set(t,o,{domain:r,path:s,expires:l})}},removeCookie:function(i){YUI.Env.isServer?n.warn("You can't remove a cookie from the server with AppContext -- use middleware.",i):(i.cookieName&&i.path||n.error("Missing important parameters to remove a cookie"),e.Cookie.remove(i.cookieName,{domain:i.domain||".flickr.com",path:i.path}))},getViewer:function(){var e={},i=this;return e.getPixelRatio=function(){var e;return e=YUI.Env.isServer?i.getCookie("density"):window.devicePixelRatio,e||(e=1),e},this.auth&&this.auth.signedIn?(e.nsid=this.auth.user.nsid,e.intl=this.auth.intl,e.signedIn=this.auth.signedIn,e.isInsecureGod=this.auth.isInsecureGod,e.isMinor=this.auth.isMinor,e.canReact=this.auth.canReact,e.prefs={keyboardShortcutsEnabled:this.auth.keyboardShortcutsEnabled,timezonePref:this.auth.timezonePref,downloadAccessPref:this.auth.downloadAccessPref}):this._preliminaryNsid?(e.nsid=this._preliminaryNsid,e.signedIn=!0):(e.signedIn=!1,e.prefs={keyboardShortcutsEnabled:!0,timezonePref:{name:"",dst:!1,offset:"00:00",isDefaults:!0}}),e},setPreliminaryViewerNsid:function(e){this._preliminaryNsid=e},getKeyboardManager:function(){return this._keyboardManager||(this._keyboardManager=new e.KeyboardManager),this._keyboardManager},initGlobalEvictionExemptionConfig:function(){var e=this.getViewer().nsid;this._globalEvictionExemptionConfig={},e&&(this._globalEvictionExemptionConfig["person-preferences-models"]={exemptIds:[e]})},getPreviousURL:function(){var e="";return this._previousLocation&&(e=this._previousLocation.pathname,this._previousLocation.querystring&&(e+="?"+this._previousLocation.querystring),this._previousLocation.hash&&(e+="#"+this._previousLocation.hash)),e},getPreviousLocation:function(){return e.merge(this._previousLocation)},setPreviousLocation:function(){this._previousLocation=this.getLocation()},updateModelRefetchState:function(i,t){if(!this.flipper.isFlipped("evict-models-on-navigate")||!i||t)return this._refetchExistingModels=!1,void(this._refetchedModels=null);var n,o;this._previousLocation&&(n=e.URLHelper.getSiteSectionByURL(this._previousLocation.pathname)),i&&(i="/"+i.split("/").slice(3).join("/"),o=e.URLHelper.getSiteSectionByURL(i)),this._refetchExistingModels=void 0,o&&l.entry_refetch_exemptions[o.name]&&(this._refetchExistingModels=!1),n&&l.exit_refetch_exemptions[n.name]&&(this._refetchExistingModels=!1),void 0===this._refetchExistingModels&&o&&n&&(l.transition_refetch_exemptions[n.name]&&l.transition_refetch_exemptions[n.name][o.name]?this._refetchExistingModels=!1:this._refetchExistingModels=n.name!==o.name),void 0===this._refetchExistingModels&&(this._refetchExistingModels=!1),this._refetchedModels={}},hasClientSideRouted:function(){return!!this._clientSideRouted},setClientSideRouted:function(e){this._clientSideRouted=e},getReferrer:function(){var e;try{e=this.flapp.get("activeView").getViewDataFromHistory("referrer")}catch(e){}return e},getLocation:function(){var i;return YUI.Env.isServer?(i={protocol:this.request.normalizedProtocol,hostname:this.request.hostname,pathname:this.request.path,query:this.request.query,querystring:this.request.query?e.QueryString.stringify(this.request.query):"",hash:""},i.href=i.protocol+"://"+i.hostname+this.request.originalUrl):(i={protocol:e.config.win.location.protocol.split(":")[0],hostname:e.config.win.location.hostname,pathname:e.config.win.location.pathname,querystring:e.config.win.location.search.split("?")[1],href:e.config.win.location.href,hash:e.config.win.location.hash},i.query=i.querystring?e.QueryString.parse(i.querystring):""),i},getViewCounter:function(){return this._viewCounter||(this._viewCounter=new e.ViewCounter({appContext:this})),this._viewCounter},getBucket:function(e){if(this.buckets)return this.buckets[e]},handleMismatchedNSID:function(){var i,t;i=e.mix({langBundles:["common"],appContext:this},e.Localizable),t=new e.Views.FluidModal({title:i.intlMessage({intlName:"common.ERROR"}),actionButtonLabel:i.intlMessage({intlName:"common.OK"}),textMessage:i.intlMessage({intlName:"common.MISMATCHED_NSID_ERROR"}),appContext:this,dismissOnOverlayClick:!1,dismissOnActionClick:!0,actionButtonDisabled:!1,showCancelButton:!0,hideModalOverlay:!1,showCancelX:!0}),t.on("actionClick",function(i){e.config.win.location.reload(!0)}),t.show()},mitigateClientPanda:function(i){var t,n;return t=e.mix({langBundles:["common"],appContext:this},e.Localizable),n=new e.Views.FluidModal({title:t.intlMessage({intlName:"common.ERROR"}),actionButtonLabel:t.intlMessage({intlName:"common.OK"}),htmlMessage:t.intlMessage({intlName:i}),appContext:this,dismissOnOverlayClick:!1,dismissOnActionClick:!0,actionButtonDisabled:!1,showCancelButton:!0,hideModalOverlay:!1,showCancelX:!0}),n.on("actionClick",function(i){e.config.win.location.reload(!0)}),n.show(),e.PromiseChainDestroyer()},callAPI:function(i,t,l,u){var h,d,p,f=this,g=[i,t,null,u];return l=l&&!YUI.Env.isServer,g=null!==c?[i,e.merge(t,c),null,u]:[i,t,null,u],h=i+"__"+Object.keys(t).sort().map(function(e){return encodeURIComponent(e)+"_"+encodeURIComponent(t[e])}).join("__"),this._apiCalls[h]?(e.config.flickr.cameraroll.suppress_logging&&"flickr.cameraroll.getPhotosByOffset"===i||n.log("Reusing API call",{method:i}),f._apiQueueOrder.length>1&&(p=f._apiQueueOrder.indexOf(h))>-1&&p<f._apiQueueOrder.length-1&&(f._apiQueueOrder.splice(p,1),f._apiQueueOrder.push(h)),this._apiCalls[h].then(function(i){return e.clone(i,!0)},function(i){throw e.clone(i,!0)})):(l&&(g.push(null),g.push({timeout:o})),i.match(a)&&this.cacheWriteAPICall(h,i),this._apiCalls[h]=new e.Promise(function(t,o){var a;a=function(){f.flickrAPI.callMethod.apply(f.flickrAPI,g).then(function(e){return f.onAPICallComplete(h,!0),e},function(t){if(f.onAPICallComplete(h,!1),f.flipper.isFlipped("enable-viewer-nsid-check")&&!YUI.Env.isServer&&-1!==s.indexOf(t.code))return f.handleMismatchedNSID(),e.PromiseChainDestroyer();if(!YUI.Env.isServer&&0===t.status&&0===t.total)return f.mitigateClientPanda("common.NETWORK_CONNECTIVITY_ISSUE");if(l&&(t.clientTimeout||0===t.status||t.transportFailure)){if(n.log("Retrying API call",{method:i}),delete f._apiCalls[h],!YUI.Env.isServer&&e.config.win.beaconError){if(e.config.win.document)try{t.domain=e.config.win.document.domain}catch(e){}e.config.win.beaconError("[app-context] Retrying API ",e.config.win.location.href,t)}return d=g[g.length-1],d.timeout&&(d.timeout=r),f._apiCalls[h]=f.flickrAPI.callMethod.apply(f.flickrAPI,g).then(function(t){return f.onAPICallComplete(h,!0),n.log("Successfully retried API call",{method:i}),e.fire("appContext:apiRetry",{apiMethod:i,code:418}),!YUI.Env.isServer&&e.config.win.beaconError&&e.config.win.beaconError("[app-context] Successful API retry ",e.config.win.location.href,{}),t},function(t){throw f.onAPICallComplete(h,!1),n.log("Failed retry of API call",{method:i}),e.fire("appContext:apiRetry",{apiMethod:i,code:408}),!YUI.Env.isServer&&e.config.win.beaconError&&e.config.win.beaconError("[app-context] Failed API retry ",e.config.win.location.href,{}),t}),f._concurrentAPICalls++,f._apiCalls[h]}throw t}).then(t,o)},YUI.Env.isServer?a():(f._apiQueueOrder.push(h),f._apiQueueFunctions[h]=a,f.callNextInQueue())}),this._apiCalls[h])},callNextInQueue:function(){var i,t,n=e.config.flickr.api.max_concurrent_api_calls;this._apiQueueOrder.length&&this._concurrentAPICalls<n&&(this._concurrentAPICalls++,i=this._apiQueueOrder.pop(),t=this._apiQueueFunctions[i],delete this._apiQueueFunctions[i],t())},cacheWriteAPICall:function(e,i){this.writeAPICallsMadeOnThisPage[e]={methodName:i,completed:!1,failed:!1}},onAPICallComplete:function(e,i){var t=this.writeAPICallsMadeOnThisPage[e];t&&(t.completed=!0,t.failed=!i),delete this._apiCalls[e],this._concurrentAPICalls--,this.callNextInQueue()},clearWriteAPICallCache:function(){this.writeAPICallsMadeOnThisPage={}},canEvictModel:function(e,i){var t,n,o;return!(!e||!i)&&(!!e.exists(i)&&(t=e.name,n=this._globalEvictionExemptionConfig[t],!(n&&n.exemptIds&&-1!==n.exemptIds.indexOf(i))&&(this._refetchedModels[t]||(this._refetchedModels[t]={}),o=this._refetchedModels[t],!o[i])))},evictModel:function(e,i){var t,n=e.name;this.flipper.isFlipped("model-eviction-debugging")&&console.log("[EVICT] "+n+" ["+i+"]"),t=e.getOwnedModels(i),t.forEach(function(e){this.canEvictModel(e.registry,e.id)&&this.evictModel(e.registry,e.id)}.bind(this)),e.remove(i)},evictModels:function(i){var t,o,r,s,a=this.getViewer().nsid,l=[],c=this.modelRegistries;for(t in this.writeAPICallsMadeOnThisPage)o=this.writeAPICallsMadeOnThisPage[t],o.completed&&!o.failed&&l.push(o);l.forEach(function(e){}),this._refetchExistingModels&&(a&&(i=e.merge(i,this._globalEvictionExemptionConfig)),Object.keys(this.modelRegistries).forEach(function(e){r=c[e],s=i[e],s?s.exemptIds?(s.evictIds&&n.warn("Error in eviction config for registry: cannot specify both a whitelist (`evictIds`) and a blacklist (`exemptIds`) for model eviction. Ignoring `evictIds` and evicting all models except those listed in `exemptIds`.",{modelRegistryName:e}),r.removeAllExcept(s.exemptIds)):s.evictIds&&s.evictIds.forEach(function(i){c[e].remove(i)}):c[e].removeAll()}))},markUploadInProgress:function(e){this._uploadInProgress=e},uploadIsInProgress:function(){return this._uploadInProgress},storePendingUploadErrorModal:function(e){this._pendingUploadErrorModal=e},retrievePendingUploadErrorModal:function(e){return this._pendingUploadErrorModal},_doForcedServerRender:function(){if(!YUI.Env.isServer||!this.request||!this.request.headers)return!1;var e=!1;return e=e||this.request.UA.isBot,e=e||this.request.UA.isSharingBot,this.flipper.isFlipped("enable-server-render-for-unsupported-browsers")&&(e=e||this.request.UA.isUnsupportedBrowser),this.flipper.isFlipped("enable-forced-server-render")&&(e=!0),e},getUA:function(){return YUI.Env.isServer?this.request.UA:e.config.flickr.request.UA},logViewTiming:function(){var e,i=this.flapp.get("activeView"),t=0,n=this;e=function(i,o){t++,Object.keys(i.subviews).forEach(function(r){var s=i.subviews[r].get("container").hasClass("requiredToShowOnServer")||i.subviews[r]._params.requiredToShowOnClient,a=o&&s,l="-";l=s?"🔹":"-",l=a?"🔷":l,console.log("| \t\t "+new Array(t).join(" |\t\t ")+" "+l+" "+r+" (initialization: "+n.viewTiming[r].initialize+"ms) (loadState: "+n.viewTiming[r].loadState+"ms)"),e(i.subviews[r],a)}),t--},console.log(this.routeConfig.module+": "+this.routeTiming+"ms"),console.log("🔷 "+i.name+" (initialization: "+this.viewTiming[i.name].initialize+"ms) (loadState: "+this.viewTiming[i.name].loadState+"ms)"),e(i,!0)},getHealthBeaconer:function(){var i={beacon:function(){},flushQueue:function(){}};if(this.flipper.isFlipped("enable-healthjs-beaconing")){if(this._beaconer)return this._beaconer;var t=this.request&&this.request.UA&&this.request.UA.isUnsupportedBrowser,o=function(i){r.indexOf(i)>-1&&-1===i.indexOf(".viewtiming.")&&!YUI.Env.isServer&&e.config.win.beaconError&&e.config.win.beaconError("flickr-heartbeat."+i+(t||""),e.config.win.location.href,{unsupported:t})},r=["route.photo.route.500.client","api.other.client","api.timeouts.client","page.failures.client","api.other.bot.client","api.timeouts.bot.client","page.failures.other.client","crashes.client","server.error.500.client","client.error.500.client"],s=e.Health,a=e.Health.beacon;return s.beacon=function(e,i){var t=["api.calls.responded.client","api.calls.client","api.calls.initiated.client","api.flickr.photos.getInfo.calls.client","test.photo.page.requests.client"];if(!(e&&e.name&&t.indexOf(e.name)>-1))return a.call(s,e,i)},(n.log("Setting up healthjs beaconer."),s&&e.on)?(e.on("metrics:increment",function(e,i){s.beacon({name:e+".client",type:"TYPE_NUMBER",aggregation:"AGG_SUM",value:i||1},{unsupported:t}),o(e+".client")}),e.on("metrics:set",function(e,i){s.beacon({name:e+".client",type:"TYPE_STATS",aggregation:"AGG_AVERAGE",value:i||1},{unsupported:t}),o(e+".client")}),e.on("metrics:sync",function(){s.flushQueue({force:!0})}),this._beaconer=s,s):(n.error("Healthjs beaconer failed to initialize."),i)}return i}}},"@VERSION@",{requires:["oop","flickr-api","flickr-promise","fletrics","promise","model-import-export","cookie","better-use","view-counter","flipper","localizable","moment","experiments-fullscreen","experiments-opt-out","moola-manager","viewport-data","querystring-parse-simple","querystring-stringify-simple","url-helper","browser-support","api-helper","healthjs"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("querystring-stringify",function(e,t){var n=e.namespace("QueryString"),r=[],i=e.Lang;n.escape=encodeURIComponent,n.stringify=function(e,t,s){var o,u,a,f,l,c,h=t&&t.sep?t.sep:"&",p=t&&t.eq?t.eq:"=",d=t&&t.arrayKey?t.arrayKey:!1;if(i.isNull(e)||i.isUndefined(e)||i.isFunction(e))return s?n.escape(s)+p:"";if(i.isBoolean(e)||Object.prototype.toString.call(e)==="[object Boolean]")e=+e;if(i.isNumber(e)||i.isString(e))return n.escape(s)+p+n.escape(e);if(i.isArray(e)){c=[],s=d?s+"[]":s,f=e.length;for(a=0;a<f;a++)c.push(n.stringify(e[a],t,s));return c.join(h)}for(a=r.length-1;a>=0;--a)if(r[a]===e)throw new Error("QueryString.stringify. Cyclical reference");r.push(e),c=[],o=s?s+"[":"",u=s?"]":"";for(a in e)e.hasOwnProperty(a)&&(l=o+a+u,c.push(n.stringify(e[a],t,l)));return r.pop(),c=c.join(h),!c&&s?s+"=":c}},"3.16.0",{requires:["yui-base"]});
YUI.add("better-cache",function(e){function c(e,c){return e.score<c.score?-1:e.score>c.score?1:0}function t(){var e,t,o;for(r.sort(c),u={},r.length>n&&(o=r.shift(),o.callback&&o.callback()),e=r.length,t=0;t<e;t++)u[r[t].key]=t}var n,r=[],o=0,u={};n=e.config.flickr.better_cache_size||100,e.betterCache={reset:function(){r=[],o=0,u={}},_cache:r,getSize:function(){return r.length},unset:function(e){var c=u[e];void 0!==c&&(r.splice(c,1),t())},set:function(e,c,n){var a;if(!1===c)return void this.unset(e);a=!!u[e]&&r[u[e]],a?(r[u[e]].value=c,r[u[e]].score=o++,"function"==typeof n&&(a.callback=n)):(a={key:e,value:c,score:o++},"function"==typeof n&&(a.callback=n),r.push(a)),t()},get:function(e){return"number"==typeof u[e]?(r[u[e]].score=++o,r[u[e]].value):null}}},"@VERSION@");
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datatype-xml-parse",function(e,t){e.mix(e.namespace("XML"),{parse:function(t){var n=null,r;return typeof t=="string"&&(r=e.config.win,r.ActiveXObject!==undefined?(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(t)):r.DOMParser!==undefined?n=(new DOMParser).parseFromString(t,"text/xml"):r.Windows!==undefined&&(n=new Windows.Data.Xml.Dom.XmlDocument,n.loadXml(t))),n===null||n.documentElement===null||n.documentElement.nodeName==="parsererror",n}}),e.namespace("Parsers").xml=e.XML.parse,e.namespace("DataType"),e.DataType.XML=e.XML},"3.16.0");
